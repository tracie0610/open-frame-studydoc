registerNamespace("Spaces");registerNamespace("Spaces.Controls");Spaces.Controls.Popover=function(){this.modal=true;this.header=null;this.body=null;this.footerText=null;this.width=300;this.bodyPadding=true;this.showHeader=true;this.showFooter=true;this.shadow=true;this.showCloseBox=false;var n=false;this.addButton=function(e,d,b,c){var a={};a.name=e;a.value=d;a.isDefault=b;a.isCancel=c;f.push(a)};this.show=function(e,d){if(n)return;q=e;c=d;if(!b)w();b.show();n=true;if(a.modal)document.getElementById("Web_UI_Popup_Modal_Background").className+=" Spaces_Controls_Popover_Background"};this.hide=function(){if(!n)return;try{d.dispose();b.hide();b.dispose()}catch(a){}n=false;if(c&&!$Browser.isMozilla())e.parentNode.removeChild(e);e=null;k=null;j=null;g=null;i=null;p=null;m=null;if(c)setTimeout(y,10)};this.enableButton=function(a){l[a].disabled=false};this.disableButton=function(a){l[a].disabled=true};function y(){try{c.focus()}catch(a){}}function r(b){var a=document.createElement("div");a.innerHTML=b;return a.firstChild}function u(b,f,c,e){var a;if(Spaces.IsRTL()&&$Browser.isMozilla())m.appendChild(document.createTextNode(" "));if(c){a=r('<button id="popover_btn_{0}" type="submit" />'.format(b));d.Nodes.register(a);a.className+="Default";s=b}else{a=r('<button id="popover_btn_{0}" type="button" />'.format(b));d.Nodes.register(a)}l[b]=a;a.innerHTML="<nobr>"+f+"</nobr>";if(e)h=b;d.Events.register(a,{onclick:function(a){o(b);a.returnValue=false}});$Binding.validate(a);m.appendChild(a)}function x(){switch(event.keyCode){case 27:if(h)o(h)}}function o(c){var b=true;if(q)b=q(a,c);if(b)a.hide();event.returnValue=false}function z(){k.style.display=a.showHeader?"block":"none";j.style.display=a.showFooter?"block":"none";if(!a.bodyPadding)g.style.padding="0px";if(a.header)if(typeof a.header=="string")i.innerHTML=a.header;else{i.innerHTML="";i.appendChild(a.header)}if(a.body)if(typeof a.body=="string")g.innerHTML=a.body;else{g.innerHTML="";g.appendChild(a.body)}}function w(){if(a.modal)b=new Web.UI.Dialog.Modal;else{b=new Web.UI.Dialog;b.setModal(true)}e=document.createElement("div");e.style.display="none";e.innerHTML='<div><h3></h3><span class="ControlBox"></span><div style="clear:both"></div></div><div></div><div><nobr></nobr></div>';b.setContents(e);var r=b.getContents();r.onkeypress=x;r.className="Spaces_Controls_Popover SecondaryTextBorder";k=r.childNodes[1];g=r.childNodes[2];j=r.childNodes[3];i=k.firstChild;m=j.firstChild;k.className=" Header ContainerBGColor2 PrimaryTextColor";g.className=" Body";j.className=" Footer ContainerBGColor2 PrimaryTextColor";p=r.childNodes[1].childNodes[1];if(a.shadow){t=new Web.UI.ShadowPopup(b);d.Properties.register(t)}b.getContents().style.width=a.width+"px";s=null;h=null;l=[];for(var v=0;v<f.length;v++)u(f[v].name,f[v].value,f[v].isDefault,f[v].isCancel);if(f.length==0)a.showFooter=false;if(a.showCloseBox){h="cancel";var n=document.createElement("a");n.href="#";n.title=Spaces.Utility.GetString(Spaces.Common.Strings,"global_cancel");n.id="popover_close";var q=document.createElement("img");q.style.height="10px";q.style.width="10px";q.src=$Config.Themes.url+"hig/img/glyph/close_rest_~BodyTextLuminance~.gif";q.alt=Spaces.Utility.GetString(Spaces.Common.Strings,"global_cancel");n.appendChild(q);p.appendChild(n);d.Events.register(n,{onclick:function(a){o(h);a.returnValue=false}});d.Properties.register(new Spaces.Controls.HoverButton(q,{hoversrc:$Config.Themes.url+"hig/img/glyph/close_hover_~ContainerHeaderTextLuminance~.gif"}))}z();if(a.modal||!c){b.setAnchor(Web.UI.Popup.VAnchor.Middle,Web.UI.Popup.HAnchor.Center);b.setDock(Web.UI.Popup.VDock.Screen,Web.UI.Popup.HDock.Screen);b.dockTo({},null,true)}else{b.setDock(Web.UI.Popup.VDock.Bottom,Web.UI.Popup.HDock.Center);b.setAnchor(Web.UI.Popup.VAnchor.Top,Spaces.IsRTL()?Web.UI.Popup.HAnchor.Right:Web.UI.Popup.HAnchor.Left);b.dockTo(c,null,true)}if(c&&!$Browser.isMozilla()){var w=d.Nodes.create("span",null,null,null);w.className="Spaces_Controls_Popover_Outer";w.appendChild(e);c.parentNode.insertBefore(w,c.nextSibling)}b.setPadding(0,0)}var b,a=this,k,g,j,i,m,s,h,v=new $Memory.Groups,d=v.create("show"),t,l,e,p,f=[],q=null,c=null,a=this};Spaces.Controls.Popover.BindingInit=function(a){Spaces.Controls.Popover.BindingInit.initializeBase(this,arguments);this.initialize=function(){Spaces.Controls.Popover.BindingInit.callBaseMethod(this,"initialize",arguments)};this.dispose=function(){a=null;Spaces.Controls.Popover.BindingInit.callBaseMethod(this,"dispose",arguments)}};Spaces.Controls.Popover.BindingInit.registerClass("Spaces.Controls.Popover.BindingInit","$Binding");Spaces.Controls.Popover.BindingInit.skipClass=true;registerNamespace("Spaces");registerNamespace("Spaces.Controls");Spaces.Controls.NotificationBar=function(r,f){Spaces.Controls.NotificationBar.initializeBase(this,arguments);var a=r,c,j=null,o=this,e,b,i=false,d,h,g=$Config.Themes.url+"hig/img/notification/",k=new $Memory.Groups,m=k.create(null);f=this.getParameters();this.show=function(c,f,e,b,d){q(c,f,e,b,d);if(a.style.display!="block"){a.style.display="block";o.fire("onshow")}};this.hide=function(){if(a.style.display!="none"){a.style.display="none";o.fire("onhide")}};this.initialize=function(){Spaces.Controls.NotificationBar.callBaseMethod(this,"initialize",arguments);if($Dom.Css.getElementsByCssSelector("a.DetailExpand",a).length>0){d=$Dom.Css.getElementsByCssSelector("a.DetailExpand",a)[0];c=$Dom.Css.getElementsByCssSelector("img.Icon",a)[0];e=a.childNodes[0].rows[0].childNodes[1];b=a.childNodes[0].rows[1].childNodes[1].childNodes[0]}else{var t='<table cellspacing="0" cellpadding="0">'+'<tr><td class="Icon"></td><td></td><td class="DetailExpand"></td></tr>'+"<tr><td></td><td></td><td></td></tr>"+"</table>",s=document.createElement("div");s.innerHTML=t;var k=s.childNodes[0];e=document.createElement("div");e.className+=" NBContent";b=document.createElement("div");b.className+=" NBContent NBDetailContent";var q=$Dom.Css.getElementsByCssSelector("div.Content",a),r=$Dom.Css.getElementsByCssSelector("div.Detail",a),j=a,g=null;if(q.length==1&&r.length==1){j=q[0];g=r[0];j.parentNode.removeChild(j);g.parentNode.removeChild(g)}while(j.childNodes.length>0)e.appendChild(j.childNodes[0]);while(g&&g.childNodes.length>0){b.appendChild(g.childNodes[0]);i=true}c=document.createElement("img");c.className="Icon";c.alt="";var o=document.createElement("img");o.src=Spaces.Controls.NotificationBar.Img_Closed_Rest;o.alt="";d=document.createElement("a");d.className="DetailExpand";d.href="#";d.appendChild(o);l();k.rows[0].childNodes[0].appendChild(c);k.rows[0].childNodes[1].appendChild(e);k.rows[0].childNodes[2].appendChild(d);k.rows[1].childNodes[1].appendChild(b);a.appendChild(k);if(f.fullwidth=="1"){a.style.borderLeftWidth=0;a.style.borderRightWidth=0}if(f.importance)n(f.importance,f.shield,f.customimg);if(f.makevisible)a.style.visibility="visible"}m.Events.register(d,{onclick:p});var o=d.getElementsByTagName("img")[0];h=new Spaces.Controls.HoverButton(o,{hoversrc:Spaces.Controls.NotificationBar.Img_Closed_Hover});m.Properties.register(h)};this.dispose=function(a){if(k)k.dispose(a);Spaces.Controls.NotificationBar.callBaseMethod(this,"dispose",arguments)};var p=function(){if(b.style.display==""){b.style.display="block";h.ChangeImage(Spaces.Controls.NotificationBar.Img_Open_Rest,Spaces.Controls.NotificationBar.Img_Open_Hover)}else{b.style.display="";h.ChangeImage(Spaces.Controls.NotificationBar.Img_Closed_Rest,Spaces.Controls.NotificationBar.Img_Closed_Hover)}event.returnValue=false},n=function(b,e,d){if(j)a.className=a.className.removeSpaceDelimitedString("Error"+j);j=b;a.className+=" Error"+j;if(d)c.src=d;else if(b==Spaces.Controls.NotificationBar.Importance.Low)c.src=g+"tip.gif";else if(b==Spaces.Controls.NotificationBar.Importance.Med)if(e=="1")c.src=g+"warning.gif";else c.src=g+"annotation_warning.gif";else if(e=="1")c.src=g+"error.gif";else c.src=g+"annotation_error.gif"},l=function(){if(i){e.className+=" ContentWithDetails";b.className+=" ContentWithDetails";d.style.display="block"}else{e.className=e.className.removeSpaceDelimitedString("ContentWithDetails");b.className=b.className.removeSpaceDelimitedString("ContentWithDetails");d.style.display="none"}b.style.display=""},q=function(d,g,c,a,f){n(d,g,f);if(typeof c=="string")e.innerHTML=c;if(typeof a=="string"&&a!=""){b.innerHTML=a;i=true}else{b.innerHTML="";i=false}l()}};Spaces.Controls.NotificationBar.registerClass("Spaces.Controls.NotificationBar","$Binding");Spaces.Controls.NotificationBar.Events=new $Enum("onshow","onhide");Spaces.Controls.NotificationBar.Params=new $Enum("importance","shield","makevisible","fullwidth","customimg");Spaces.Controls.NotificationBar.Importance=new $Enum("Low","Med","High");Spaces.Controls.NotificationBar.Img_Closed_Rest=$Config.Themes.url+"hig/img/glyph/expand2_rest_Dark.gif";Spaces.Controls.NotificationBar.Img_Closed_Hover=$Config.Themes.url+"hig/img/glyph/expand2_hover_Dark.gif";Spaces.Controls.NotificationBar.Img_Open_Rest=$Config.Themes.url+"hig/img/glyph/collapse2_rest_Dark.gif";Spaces.Controls.NotificationBar.Img_Open_Hover=$Config.Themes.url+"hig/img/glyph/collapse2_hover_Dark.gif";registerNamespace("Spaces");registerNamespace("Spaces.Controls");Spaces.Controls.HoverButton=function(b,d){Spaces.Controls.HoverButton.initializeBase(this,arguments);d=this.getParameters();var a,f=b.src,c,e=false;this.initialize=function(){Spaces.Controls.HoverButton.callBaseMethod(this,"initialize",arguments);c=d.hoversrc;var e=Number.coerceInt(d.attachtoancestor);if(!e||e==0)e=1;a=b;for(var f=0;f<e&&a;f++)a=a.parentNode;if(a){a.attachEvent("onmouseenter",h);a.attachEvent("onmouseleave",g)}};this.dispose=function(){b=null;if(a){a.detachEvent("onmouseenter",h);a.detachEvent("onmouseleave",g);a=null}Spaces.Controls.HoverButton.callBaseMethod(this,"dispose",arguments)};this.ChangeImage=function(d,a){f=d;c=a;if(e)b.src=c;else b.src=f};var h=function(){b.src=c;e=true},g=function(){b.src=f;e=false}};Spaces.Controls.HoverButton.registerClass("Spaces.Controls.HoverButton","$Binding");Spaces.Controls.HoverButton.Params=new $Enum("hoversrc","attachtoancestor")