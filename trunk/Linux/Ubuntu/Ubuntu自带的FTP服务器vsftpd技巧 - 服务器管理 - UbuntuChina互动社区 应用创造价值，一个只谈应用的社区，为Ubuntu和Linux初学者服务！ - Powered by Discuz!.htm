<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Ubuntu自带的FTP服务器vsftpd技巧 - 服务器管理 -  UbuntuChina互动社区 应用创造价值，一个只谈应用的社区，为Ubuntu和Linux初学者服务！ - Powered by Discuz!</title>
<meta name="keywords" content="Ubhuntu中文社区,Ubuntu中文论坛,Ubuntu入门'学习'应用'技巧、经验 , Ubuntu开发经验、技巧,Linux入门、提高、学习、应用技巧、经验 ,原创,教程,学习资源,Linux入门,Ubuntu入门 ,LPI教程 ,LPI考试,RHCE教程，RHCE教材,RHCE考试,Linux职位,高级职位" />
<meta name="description" content=" UbuntuChina互动社区 实现了Apache多用户的虚拟主机设置，那么一般这些用户都会选择用ftp上传的方式来管理自己的web内容，这就需要我们再为他们开设FTP服务。 
Ubuntu自带的FTP服务器是vs ... - Discuz! Board" />
<meta name="generator" content="Discuz! 6.0.0" />
<meta name="author" content="Discuz! Team and Comsenz UI Team" />
<meta name="copyright" content="2001-2007 Comsenz Inc." />
<meta name="MSSmartTagsPreventParsing" content="True" />
<meta http-equiv="MSThemeCompatible" content="Yes" />
<link rel="archives" title="UbuntuChina互动社区" href="http://www.ubuntuchina.com/archiver/" />
	<link rel="stylesheet" type="text/css" href="forumdata/cache/style_1.css" />
	<link rel="stylesheet" type="text/css" href="forumdata/cache/style_1_append.css" />
<script type="text/javascript">var IMGDIR = 'images/default';var attackevasive = '0';var gid = 0;gid = parseInt('55');var fid = parseInt('23');var tid = parseInt('5659');</script>
<script src="include/javascript/common.js" type="text/javascript"></script>
<script src="include/javascript/menu.js" type="text/javascript"></script>
<script src="include/javascript/ajax.js" type="text/javascript"></script>
</head>

<body onkeydown="if(event.keyCode==27) return false;">

	<div id="append_parent"></div><div id="ajaxwaitid"></div>
	<div class="wrap">
		<div id="header">
			<h2><a href="index.php" title="UbuntuChina互动社区"><img src="images/default/logo.gif" alt="UbuntuChina互动社区" border="0" /></a></h2>
			<div id="ad_headerbanner"></div>
		</div>
		<div id="menu">
					<span class="frameswitch">
			<script type="text/javascript">
			if(top == self) {
							document.write('<a href="frame.php?frameon=yes" target="_top" class="frameon">分栏模式<\/a>');
			} else {
				document.write('<a href="frame.php?frameon=no" target="_top" class="frameoff">平板模式<\/a>');
			}
			</script>
			</span>
		
			<ul>
							<li><a href="register.php" class="notabs">注册</a></li>
				<li><a href="logging.php?action=login">登录</a></li>
			
			<li><a href="member.php?action=list">会员</a></li>																		<li><a href="stats.php">统计</a></li>							<li><a href="faq.php">帮助</a></li>
			</ul>
		</div>
<script src="include/javascript/viewthread.js" type="text/javascript"></script>
<script type="text/javascript">zoomstatus = parseInt(1);</script>

<div id="foruminfo">
	<div id="nav">
		<a href="index.php" id="forumlist" onmouseover="showMenu(this.id)" class="dropmenu">UbuntuChina互动社区</a> &raquo; <a href="forumdisplay.php?fid=23">服务器管理</a> &raquo; Ubuntu自带的FTP服务器vsftpd技巧	</div>
	<div id="headsearch">
			<script src="forumdata/cache/google_var.js" type="text/javascript"></script>
		<script src="include/javascript/google.js" type="text/javascript"></script>
			</div>
</div>

<div id="ad_text"></div>


<div class="pages_btns">
	<div class="threadflow"><a href="redirect.php?fid=23&amp;tid=5659&amp;goto=nextoldset"> &lsaquo;&lsaquo; 上一主题</a> | <a href="redirect.php?fid=23&amp;tid=5659&amp;goto=nextnewset">下一主题 &rsaquo;&rsaquo;</a></div>
				<span class="postbtn" id="newspecial" onmouseover="$('newspecial').id = 'newspecialtmp';this.id = 'newspecial';showMenu(this.id)"><a href="post.php?action=newthread&amp;fid=23&amp;extra="><img src="images/default/newtopic.gif" border="0" alt="发新话题" title="发新话题" /></a></span>
		<span class="replybtn"><a href="post.php?action=reply&amp;fid=23&amp;tid=5659&amp;extra="><img src="images/default/reply.gif" border="0" alt="" /></a></span></div>

	<ul class="popupmenu_popup newspecialmenu" id="newspecial_menu" style="display: none">
		<li><a href="post.php?action=newthread&amp;fid=23&amp;extra=">发新话题</a></li>
		<li class="poll"><a href="post.php?action=newthread&amp;fid=23&amp;extra=&amp;special=1">发布投票</a></li>		<li class="trade"><a href="post.php?action=newthread&amp;fid=23&amp;extra=&amp;special=2">发布商品</a></li>		<li class="reward"><a href="post.php?action=newthread&amp;fid=23&amp;extra=&amp;special=3">发布悬赏</a></li>		<li class="activity"><a href="post.php?action=newthread&amp;fid=23&amp;extra=&amp;special=4">发布活动</a></li>		<li class="debate"><a href="post.php?action=newthread&amp;fid=23&amp;extra=&amp;special=5">发布辩论</a></li>		<li class="video"><a href="post.php?action=newthread&amp;fid=23&amp;extra=&amp;special=6">发布视频</a></li>			</ul>

<form method="post" name="modactions">
	<input type="hidden" name="formhash" value="311c2afe" />
	<div class="mainbox viewthread">
		<span class="headactions">
				<a href="viewthread.php?action=printable&amp;tid=5659" target="_blank" class="notabs">打印</a>
		</span>
		<h1>Ubuntu自带的FTP服务器vsftpd技巧		</h1>
							<table id="pid12244" summary="pid12244" cellspacing="0" cellpadding="0">
			<tr>
				<td class="postauthor">
					 					<cite>											<a href="space.php?uid=552" target="_blank" id="userinfo12244" class="dropmenu" onmouseover="showMenu(this.id)">dsj</a></cite>
																			<div class="avatar"><img src="images/avatars/14.gif" width="95" height="95" border="0" alt="" /></div>												<p><em>超级版主</em></p>
						<p><img src="images/default/star_level3.gif" alt="Rank: 8" /><img src="images/default/star_level3.gif" alt="Rank: 8" /></p>
																		
						<ul>
												<li class="pm"><a href="pm.php?action=send&amp;uid=552" target="_blank" id="ajax_uid_12244" onclick="ajaxmenu(event, this.id, 9000000, null, 0)">发短消息</a></li>
						<li class="buddy"><a href="my.php?item=buddylist&amp;newbuddyid=552&amp;buddysubmit=yes" target="_blank" id="ajax_buddy_0" onclick="ajaxmenu(event, this.id, null, 0)">加为好友</a></li>

																					<li class="online">当前在线
														</li>
						
						</ul>
									</td>
				<td class="postcontent" >
					<div class="postinfo">
						<strong title="复制帖子链接到剪贴板" id="postnum_12244" onclick="setcopy('http://www.ubuntuchina.com/viewthread.php?tid=5659&amp;page=1#pid12244', '帖子链接已经复制到剪贴板')">1<sup>#</sup></strong>
													<em onclick="$('postmessage_12244').className='t_bigfont'">大</em>							<em onclick="$('postmessage_12244').className='t_msgfont'">中</em>
							<em onclick="$('postmessage_12244').className='t_smallfont'">小</em>												发表于 2009-1-13 11:11&nbsp;																					<a href="viewthread.php?tid=5659&amp;page=1&amp;authorid=552">只看该作者</a>
																		</div>
					<div id="ad_thread2_0"></div>
					<div class="postmessage defaultpost">
												<div id="ad_thread3_0"></div><div id="ad_thread4_0"></div>
													<h2>Ubuntu自带的FTP服务器vsftpd技巧</h2>
						
						
																											<div id="postmessage_12244" class="t_msgfont">实现了Apache多用户的虚拟主机设置，那么一般这些用户都会选择用ftp上传的方式来管理自己的web内容，这就需要我们再为他们开设FTP服务。 <br />
Ubuntu自带的FTP服务器是vsftpd. <br />
1、安装vsftpd <br />
Ubuntu安装软件倒不是件困难的事，输入： <br />
sudo apt-get install vsftpd <br />
如果没换源可能会提示你使用光盘，放进去再按回车就行了。 <br />
我用CN99的源，速度是300K每秒，够快吧。 <br />
安装了之后会在/home/下建立一个ftp目录。这时候你可以试着访问下ftp://IP地址。应该可以看到一个空白内容的ftp空间。 <br />
默认设置下匿名用户可以下载，但不能写入或是上传 <br />
2、设置 vsftpd.conf文件 <br />
现在我们要让匿名用户无法访问，并且得输入linux上的用户密码后才能访问到他们自己目录里的内容。 <br />
首先找到设置vsftpd的文件，位置在/etc/vsftpd.conf <br />
修改之前最好先备份下这个文件： <br />
sudo cp /etc/vsftpd.conf /etc/vsftpd.conf.old <br />
然后可以改动了： <br />
#不让匿名用户使用 <br />
#anonymous_enable=YES <br />
#本地用户可用 <br />
local_enable=YES <br />
#可用写操作 <br />
write_enable=YES <br />
#不需要显示某目录下文件信息 <br />
#dirmessage_enable=YES <br />
#加点banner提示 <br />
ftpd_banner=Hello~~ <br />
#FTP服务器最大承载用户 <br />
max_clients=100 <br />
新的问题 <br />
1、输入用户名密码后显示的位置是在用户的根目录下，而我们的WEB内容是在public_html目录里 <br />
2、用户可以跳到任何其他目录 <br />
要解决这些问题我们还得设置下vsftpd.conf <br />
#启动chroot列表（Change root） <br />
chroot_list_enable=YES <br />
#指定列表位置（我这用的是默认地址） <br />
chroot_list_file=/etc/vsftpd.chroot_list <br />
接下来我们得在vsftpd.chroot_list上写进去我们要限制哪些用户，不让他们“漂移”…… <br />
现在有用户linyupark，所以只要sudo nano一下，往里面写就行了 <br />
这样我们已经解决第2个问题了，登陆的用户只能在它的用户文件夹里活动，下面我们要更狠一点，让他只能在public_html里活动 <br />
依然还是找vsftpd.conf <br />
#这句默认设置里是没有的，自己加 <br />
user_config_dir=/etc/自己定义一个设置个别用户用的文件夹地址 <br />
根据自己设置的地址，建立一个相应的文件夹，然后往里面建立和用户名相同的文件，nano一下： <br />
#本地用户的根地址，假设用户是linyupark <br />
local_root=/home/linyupark/public_html <br />
重启下服务器。</div>

							
							
							
													</div>
													<div class="signatures" style="maxHeightIE: 100px;">
								软件交流群：17264279<br />
图书分享群：18246379							</div>
															</div>
			</td>
		</tr>
		<tr>
			<td class="postauthor">
								<div class="popupmenu_popup userinfopanel" id="userinfo12244_menu" style="display: none;">
										<dl><dt>UID</dt><dd>552&nbsp;</dd><dt>帖子</dt><dd>4225&nbsp;</dd><dt>精华</dt><dd><a href="digest.php?authorid=552">106</a>&nbsp;</dd><dt>积分</dt><dd>8857&nbsp;</dd><dt>阅读权限</dt><dd>150&nbsp;</dd><dt>在线时间</dt><dd>444 小时&nbsp;</dd><dt>注册时间</dt><dd>2008-8-2&nbsp;</dd><dt>最后登录</dt><dd>2009-3-27&nbsp;</dd></dl>
										<p><a href="space.php?action=viewpro&amp;uid=552" target="_blank">查看详细资料</a></p>
									</div>
							</td>
			<td class="postcontent">
				<div class="postactions">
										<p>
																																																<strong onclick="scroll(0,0)" title="顶部">TOP</strong>
					</p>
					<div id="ad_thread1_0"></div>
				</div>
			</td>
		</tr>
		</table>
		</div><div id="ad_interthread"></div>
</form>

<div class="pages_btns">
	<div class="threadflow"><a href="redirect.php?fid=23&amp;tid=5659&amp;goto=nextoldset"> &lsaquo;&lsaquo; 上一主题</a> | <a href="redirect.php?fid=23&amp;tid=5659&amp;goto=nextnewset">下一主题 &rsaquo;&rsaquo;</a></div>
				<span class="postbtn" id="newspecialtmp" onmouseover="$('newspecial').id = 'newspecialtmp';this.id = 'newspecial';showMenu(this.id)"><a href="post.php?action=newthread&amp;fid=23&amp;extra="><img src="images/default/newtopic.gif" border="0" alt="发新话题" title="发新话题" /></a></span>
		<span class="replybtn"><a href="post.php?action=reply&amp;fid=23&amp;tid=5659&amp;extra="><img src="images/default/reply.gif" border="0" alt="" /></a></span></div>

	<script type="text/javascript">
		function modaction(action) {
			if(!action) {
				return;
			}
			if(!in_array(action, ['delpost', 'banpost'])) {
				window.location=('topicadmin.php?tid=5659&fid=23&action='+ action +'&sid=2yJp57');
			} else {
				document.modactions.action = 'topicadmin.php?action='+ action +'&fid=23&tid=5659&page=1;'
				document.modactions.submit();
			}
		}
	</script>
	<div id="footfilter" class="box">
					<select onchange="if(this.options[this.selectedIndex].value != '') {
		window.location=('forumdisplay.php?fid='+this.options[this.selectedIndex].value+'&amp;sid=2yJp57') }">
		<option value="">最近访问的版块 ...</option>
		<option value="37">Linux/Ubuntu学习资源大全</option><option value="81">Linux读书月活动专区</option><option value="8">新手入门</option><option value="52">硬件驱动</option><option value="9">安装配置</option><option value="73">社区图书《完美应用Ubuntu》读者专区</option><option value="10">美化专区</option><option value="14">娱乐天堂</option><option value="20">《Full Cirle》中文版</option><option value="74">系统管理</option>		</select>
	</div>
	<div class="popupmenu_popup" id="forumlist_menu" style="display: none">
		<dl><dt><a href="index.php?gid=72">UbuntuChina原创图书读者论坛</a></dt><dd><ul><li><a href="forumdisplay.php?fid=81">Linux读书月活动专区</a></li><li><a href="forumdisplay.php?fid=82">社区图书《Ubuntu实战技巧精粹》专区</a></li><li><a href="forumdisplay.php?fid=73">社区图书《完美应用Ubuntu》读者专区</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=5">社区管理</a></dt><dd><ul><li><a href="forumdisplay.php?fid=40">互动专区</a></li><li class="sub"><a href="forumdisplay.php?fid=42">线下活动和自助活动</a></li><li class="sub"><a href="forumdisplay.php?fid=43">有奖活动</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=48">社区新知</a></dt><dd><ul><li><a href="forumdisplay.php?fid=89">Ubuntu 9.04专区</a></li><li><a href="forumdisplay.php?fid=19">新闻播报</a></li><li><a href="forumdisplay.php?fid=51">新软快递</a></li><li><a href="forumdisplay.php?fid=44">新书快讯</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=7">初学者专区</a></dt><dd><ul><li><a href="forumdisplay.php?fid=8">新手入门</a></li><li><a href="forumdisplay.php?fid=52">硬件驱动</a></li><li><a href="forumdisplay.php?fid=9">安装配置</a></li><li><a href="forumdisplay.php?fid=15">软件应用</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=11">桌面应用</a></dt><dd><ul><li><a href="forumdisplay.php?fid=10">美化专区</a></li><li><a href="forumdisplay.php?fid=12">办公应用</a></li><li><a href="forumdisplay.php?fid=14">娱乐天堂</a></li><li><a href="forumdisplay.php?fid=54">聊天世界</a></li><li><a href="forumdisplay.php?fid=13">图形图像</a></li><li><a href="forumdisplay.php?fid=74">系统管理</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=55">企业应用</a></dt><dd><ul><li class="current"><a href="forumdisplay.php?fid=23">服务器管理</a></li><li><a href="forumdisplay.php?fid=56">数据库管理</a></li><li><a href="forumdisplay.php?fid=57">架站指南</a></li><li><a href="forumdisplay.php?fid=58">安全防护</a></li><li><a href="forumdisplay.php?fid=22">虚拟化专区</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=59">开发应用</a></dt><dd><ul><li><a href="forumdisplay.php?fid=61">Web开发</a></li><li><a href="forumdisplay.php?fid=62">嵌入开发</a></li><li><a href="forumdisplay.php?fid=16">系统开发</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=18">开源杂志</a></dt><dd><ul><li><a href="forumdisplay.php?fid=80">《开源实用技术文摘》</a></li><li><a href="forumdisplay.php?fid=20">《Full Cirle》中文版</a></li><li><a href="forumdisplay.php?fid=64">《PHPer》专区</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=75">其他Linux发行版</a></dt><dd><ul><li><a href="forumdisplay.php?fid=76">Debian交流区</a></li><li><a href="forumdisplay.php?fid=77">SUSE/OpenSUSE交流区</a></li><li><a href="forumdisplay.php?fid=78">RHEL/CentOS/Fedora交流区</a></li><li><a href="forumdisplay.php?fid=79">国产发行版红旗交流区</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=36">分享专区</a></dt><dd><ul><li><a href="forumdisplay.php?fid=38">原创贴吧</a></li><li><a href="forumdisplay.php?fid=39">Linux认证和职业专区</a></li><li class="sub"><a href="forumdisplay.php?fid=85">Linux类职位招聘和求职专区</a></li><li><a href="forumdisplay.php?fid=37">Linux/Ubuntu学习资源大全</a></li></ul></dd></dl><dl><dt><a href="index.php?gid=65">社区茶馆</a></dt><dd><ul><li><a href="forumdisplay.php?fid=66">音乐分享</a></li><li><a href="forumdisplay.php?fid=67">茶余饭后</a></li></ul></dd></dl>	</div>

<script type="text/javascript">
var maxpage = 1;
if(maxpage > 1) {
	document.onkeyup = function(e){
		e = e ? e : window.event;
		var tagname = is_ie ? e.srcElement.tagName : e.target.tagName;
		if(tagname == 'INPUT' || tagname == 'TEXTAREA') return;
		actualCode = e.keyCode ? e.keyCode : e.charCode;
					}
}
</script>

</div>


<div id="ad_footerbanner1"></div><div id="ad_footerbanner2"></div><div id="ad_footerbanner3"></div>

<div id="footer">
	<div class="wrap">
		<div id="footlinks">
			<p>当前时区 GMT+8, 现在时间是 2009-3-27 12:54 <a href="http://www.miibeian.gov.cn/" target="_blank">京ICP备07039416</a></p>
			<p>
				<a href="member.php?action=clearcookies&amp;formhash=311c2afe">清除 Cookies</a>
				- <a href="mailto:hxl2000@gmail.com">联系我们</a> - <a href="http://www.UbuntuChina.com/" target="_blank">UbuntuChina互动社区（2006－2008）</a>
				 - <a href="archiver/" target="_blank">Archiver</a>								- <span class="scrolltop" onclick="window.scrollTo(0,0);">TOP</span>
							</p>
		</div>

		<a href="http://www.discuz.net" target="_blank" title="Powered by Discuz!"><img src="images/default/discuz_icon.gif" border="0" alt="Discuz!" /></a>
		<p id="copyright">
			Powered by <strong><a href="http://www.discuz.net" target="_blank">Discuz!</a></strong> <em>6.0.0</em>			&copy; 2001-2007 <a href="http://www.comsenz.com" target="_blank">Comsenz Inc.</a>
		</p>			<p id="debuginfo">Processed in 0.027349 second(s), 8 queries.</p>
			</div>
</div>
</body>
</html><script src="include/javascript/msn.js" type="text/javascript"></script>
