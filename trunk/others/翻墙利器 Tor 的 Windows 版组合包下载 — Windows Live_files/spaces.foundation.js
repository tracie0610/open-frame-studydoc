/* Copyright (C) 2009 Microsoft Corporation */registerNamespace("$Spaces");function OpenFriendWindow(a){window.open(a,"_blank","height=572,width=766,resizable=no,menubar=no,toolbar=no,status=yes,scrollbars=yes")}function ValidateNonEmptyString(a){a=a.trim();if(a.length==0)return false;else return true}function ValidateEmail(b){var a=/^([a-zA-Z0-9_\-\.\+]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return a.test(b)}function ValidateEmailEx(b){var a=/^[\w\.\+\-]+@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return a.test(b)}function ValidateAlphaNumeric(b){var a=/[^a-zA-Z0-9]/g;return !a.test(b)}function encodeURI(b){var a;a=escape(b);a=a.replace(/\+/g,"%2B");return a}function decodeURI(a){return unescape(a)}function GetXmlHttpObject(){var a;if(!window.XMLHttpRequest){try{a=new ActiveXObject("Msxml2.XMLHTTP.4.0");return a}catch(b){}try{a=new ActiveXObject("MSXML2.XMLHTTP");return a}catch(b){}try{a=new ActiveXObject("Microsoft.XMLHTTP");return a}catch(b){}return null}else{try{a=new XMLHttpRequest;return a}catch(b){}return null}}function XMLHttp(a,c,b){var d=XMLHttpEx(a,c,b);return d.ResponseText}function XMLHttpEx(b,e,d){var a=[];a["Exception"]=false;a["ResponseText"]="";var c=typeof d!="undefined"&&d==true?"GET":"POST";xmlhttp=GetXmlHttpObject();try{if(xmlhttp!=null){if(c=="POST")b+="&"+C_CANARY_COOKIE_NAME+"="+encodeURI(GetCookieValue(C_CANARY_COOKIE_NAME));xmlhttp.open(c,e,false);xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xmlhttp.send(b);a["ResponseText"]=xmlhttp.responseText;a["Status"]=xmlhttp.status}}catch(f){a["Exception"]=true}return a}var g_spudPopOver;function LoadPhotoUploadcontrol(d,b,a,c){var e=565;g_spudPopOver=new $UI.Popover;g_spudPopOver.width=705;g_spudPopOver.modal=true;g_spudPopOver.shadow=true;g_spudPopOver.header='<span id="photoUploadTitle">'+a+"</span>";g_spudPopOver.body='<div id="_spuddiv" style="height:565px">';g_spudPopOver.bodyPadding=false;g_spudPopOver.showFooter=true;g_spudPopOver.showCloseBox=true;g_spudPopOver.addButton("cancel",c,false,true);g_spudPopOver.show(onPhotoUploadDismiss,b);document.getElementById("_spuddiv").innerHTML='<iframe src ="'+d+'" id="__photoUploadFrame" style="height:'+e+'px; width:705px" frameborder="0"> </iframe>';return null}function onPhotoUploadDismiss(){g_spudPopOver=null;var a=[],c=__photoUploadFrame.window.document.getElementById("MyComputer");a.push(c);while(a.length>0){var b=a.pop();if(b.children)addChildToArray(a,b)}return true}function addChildToArray(d,a){for(var b=a.children.length-1;b>=0;b--){var c=a.children[b];d.push(c);a.removeChild(c)}}function RecopyRTE(a){if(a&&a.webBindings&&a.webBindings.length>0)for(var b=0;b<a.webBindings.length;b++)if(a.webBindings[b].getType()=="$UI.Editor"){a.value=a.webBindings[b].getValue();return}}function BlogIt(c){var g=document.getElementById("subj"+c),h=document.getElementById("msg"+c);if(g!=null&&h!=null){url=BlogJSBlogEntryUrl;var a=document.createElement("form");a.action=url;a.method="post";a.id="doTrackback";a.style.display="none";var b=document.createElement("textarea");b.name="Title";b.value=g.innerText;a.appendChild(b);var f=document.createElement("textarea");f.name="Description";f.value=h.innerHTML;a.appendChild(f);var b=document.createElement("textarea");b.name="SourceURL";b.value=BlogJSPersonalSpaceurl+"blog/"+c+".entry";a.appendChild(b);var d=document.createElement("textarea");d.name="Trackback";d.value=BlogJSPersonalSpaceurl+"blog/"+c+".trak";a.appendChild(d);var e=document.createElement("textarea");e.name="BlogIt";e.value="true";a.appendChild(e);if(document.getElementById("doTrackback"))document.getElementById("doTrackback").outerHTML="";var i=document.body.appendChild(a);i.submit()}}function ScaleImageContactImage(a){window.setTimeout(function(){ScaleImageContactImageCb(a)},1)}function ScaleImageContactImageCb(a){if(null!=a){var b=new Image;b.src=a.src;if(null==b.width||0==b.width||null==b.height||0==b.height||0==a.width||0==a.height)return;var g=Math.min(a.width/b.width,a.height/b.height),f=g*b.width,e=g*b.height,h=(a.width-f)/2,i=(a.height-e)/2;try{a.style.width=f+"px";a.style.height=e+"px";var d=a.parentNode,c;if(null!=d){c=parseInt(d.style.paddingTop);d.style.paddingTop=(isNaN(c)?0:c)+i+"px";c=parseInt(d.style.paddingLeft);d.style.paddingLeft=(isNaN(c)?0:c)+h+"px"}}catch(j){}}}SpacesUrlBuilder=new function(){this.GotoUrl=function(a){window.location.href=a};this.ConstructFrontdoorUrl=function(b,a){if(a!=null){var c="http://{0}{1}?{2}";return c.format(C_FRONTDOOR_HOSTNAME,b,a)}else{var c="http://{0}{1}";return c.format(C_FRONTDOOR_HOSTNAME,b)}};this.ConstructUserUrl=function(e,c,b){var a=C_WEB_HOSTNAME.format(e);if(b!=null){var d="http://{0}{1}?{2}";return d.format(a,c,b)}else{var d="http://{0}{1}";return d.format(a,c)}};this.ConstructDashboardUrl=function(b,a){if(a!=null){var c="http://{0}{1}?{2}";return c.format(C_DASHBOARD_HOSTNAME,b,a)}else{var c="http://{0}{1}";return c.format(C_DASHBOARD_HOSTNAME,b)}};this.GetDomainSetterProxyUrl=function(){var a=document.location.href,b=a.indexOf(document.domain);if(b>0)a=a.substring(0,b+document.domain.length);a=a+"/setdomain.aspx";return a};this.ConstructUserUrlFromCid=function(e,d,c){var b="cid-{0}",a=function(c){var d="0123456789ABCDEF",h=0;if(c.charAt(0)=="-"){h=1;c=c.substr(1,c.length-1)}var a="";while(c!=""){var e="",f=0;for(var b=0;b<c.length;b+=1){var j=d.indexOf(c.charAt(b))+10*f,k=Math.floor(j/16);f=j%16;if(k!=0||e.length>0)e+=d.charAt(k)}c=e;a=d.charAt(f)+a}while(a.length<16)a="0"+a;if(h!=0){for(var b=a.length-1;b>=0;b--)a=a.substr(0,b)+d.charAt(15-d.indexOf(a.charAt(b)))+a.substr(b+1,a.length-b-1);var i=1;for(var b=a.length-1;b>=0;b--){var g=d.indexOf(a.charAt(b))+i;if(g>15)g-=16;else i=0;a=a.substr(0,b)+d.charAt(g)+a.substr(b+1,a.length-b-1)}}return a};return SpacesUrlBuilder.ConstructUserUrl(b.format(a(e)),d,c)}};GetCookieValue=function(c){var d="",b=document.cookie.indexOf(c+"=");if(b!=-1){var a=document.cookie.indexOf(";",b);if(a==-1)a=document.cookie.length;d=document.cookie.substring(b+c.length+1,a)}return d};$Spaces.registerAllBaseMethods=function(c,a){for(var b in a)if("function"==typeof a[b])c.registerBaseMethod(a,b)};$Spaces.bindIfNotBound=function(a,d,e,f){var b=null;if(a.webBindings)for(var c=0;c<a.webBindings.length;c++)if(a.webBindings[c].getType()==d){b=a.webBindings[c];break}if(!b)b=$Spaces.attachElementBindingSync(a,d,null,e?e:{},f);return b};$Spaces.MessengerNavigate=function(a){if(typeof __IdCtrlNs!=undefined&&__IdCtrlNs.Utility&&__IdCtrlNs.Utility.OpenWindow)__IdCtrlNs.Utility.OpenWindow(a)};$Spaces.attachElementBindingSync=function(f,c,e,d,b){var h=Object,g=h.resolve(c),a=new g(f,d,b);a.initialize(e);return a};$Spaces.attachElementBinding=function(j,g,i,h,f,k,b,d,l,e,c){var o=Object,n=$Binding,a=$Network;function m(){n.define(g,null,i).setDefaults(h).setNS(f).bindTo(j).attach(function(a){k(a&&a[0])})}if(!b&&!d&&!c&&!e)return Web.Bindings.attachElementBindingSync(j,g,i,h,f);else(new a(l)).add(a.Type.Script,b).add(a.Type.CSS,d).add(a.Type.Image,c).add(a.Type.XML,e).load(m)};Live_Spaces_Ads=function(b,a){Live_Spaces_Ads.initializeBase(this,arguments);a=this.getParameters();var c=this;this.id=b.id;this.initialize=function(){Live_Spaces_Ads.callBaseMethod(this,"initialize",arguments);if(typeof dapMgr!="undefined"){dapMgr.enableACB(b.id,false);dapMgr.renderAd(b.id,a.callstring,a.width,a.height)}};this.dispose=function(){c=null;Live_Spaces_Ads.callBaseMethod(this,"dispose",arguments)};this.isHeaderBanner=function(){if(c.id=="dap_header")return true;else return false}};Live_Spaces_Ads.Params=new $Enum("callstring","width","height");Live_Spaces_Ads.registerClass("Live_Spaces_Ads","$Binding");Live_Spaces_Ads.skipClass=true;registerNamespace("Spaces.Utility");Spaces.Utility.GetString=function(a,b){if(a)if(a[b])return a[b];return ""};Spaces.Utility.GetLtrString=function(a){return "‭"+a+"‬"};Spaces.Utility.JScriptStringEscape=function(b){var a=b;a=a.replace(/\\/g,"\\\\");a=a.replace(new RegExp("/","g"),"\\/");a=a.replace(/</g,"\\x3C");a=a.replace(/>/g,"\\x3E");a=a.replace(/'/g,"\\x27");a=a.replace(/\"/g,"\\x22");a=a.replace(/\r/g,"\\r");a=a.replace(/\n/g,"\\n");a=a.replace(/\t/g,"\\t");return a};registerNamespace("Spaces.Lists");registerNamespace("Spaces.PopOvers");var g_currSimplePopover;function ComplexDialogData(e,c,b,g,f,d,a){if(a==null)a=false;this.LabelArray=e;this.DefaultsArray=c;this.DialogItemDetails=b;this.BtnOk=g;this.BtnCancel=f;this.LimitsArray=d;this.LabelsHtmlSafe=a}function SimpleDialogData(f,c,d,b,a,g,e){return new ComplexDialogData([f,d],[c,b],a,g,e)}Spaces.PopOvers.SimplePopOver=function(b,h,f,a,i,e,c,g,d){Spaces.PopOvers.SimplePopOverWithCancelCB(b,h,f,a,i,null,e,c,g,d)};Spaces.PopOvers.SimplePopOverWithCancelCB=function(d,q,a,r,p,g,e,f,o,k){if(typeof $UI=="undefined"||typeof $UI.Popover=="undefined")return;var b=new $UI.Popover,c=document.getElementById("SpacesPopOversSimplePopOver");if(c==null){c=document.createElement("div");c.id="SpacesPopOversSimplePopOver";g_currSimplePopover=b;document.body.appendChild(c)}var s=[];function m(){if(e){var g=e,d=e;for(var i=0;i<10;i++){if(d.tagName.toLowerCase()=="a"){g=d;break}if(d.parentElement)d=d.parentElement}}l();if(f)b.width=f;else b.width=416;b.header=q;b.body=c;b.modal=true;b.shadow=true;g_currSimplePopover=b;var p=a.BtnOk?a.BtnOk:o,m=a.BtnCancel?a.BtnCancel:k;if(a.BtnOk!=false)b.addButton("ok",p,true,false);if(a.BtnCancel!=false)b.addButton("cancel",m,false,true);j();b.show(n,g);h()}function l(){var e="";if(a.DialogItemDetails)e='<div style="margin-bottom:10px">'+a.DialogItemDetails+"</div>";var b="";if(d=="Message")b='<b><div id="pvrLabel1"></div></b>';else if(d=="ChangeAd"){b='<label id="pvrLabel1" for="pvrValue1"></label>'+'<div class="InputWrapper"><input id="pvrValue1" name="checkbox" type="text" onkeyup="Spaces.PopOvers.SimplePopOver.ValidateTextboxInput()" onchange="Spaces.PopOvers.SimplePopOver.ValidateTextboxInput()" /></div>'+'<label id="pvrLabel2" for="pvrValue2"></label>'+'<div class="InputWrapper"><input id="pvrValue2" name="checkbox" type="text" onkeyup="Spaces.PopOvers.SimplePopOver.ValidateTextboxInput() "onchange="Spaces.PopOvers.SimplePopOver.ValidateTextboxInput()"/></div>';if(a.DefaultsArray[2]=="true")b+='<input id="pvrValue3" type="checkbox" checked="CHECKED" /><label for="pvrValue3" id="pvrLabel3"></label>';else b+='<input id="pvrValue3" type="checkbox" /><label for="pvrValue3" id="pvrLabel3"></label>'}else if(d=="SingleNameValue")var b='<label id="pvrLabel1" for="pvrValue1"></label>'+'<div class="InputWrapper"><input id="pvrValue1" name="checkbox" type="text" onkeyup="Spaces.PopOvers.SimplePopOver.ValidateTextboxInput()" onchange="Spaces.PopOvers.SimplePopOver.ValidateTextboxInput()" /></div>';else var b="";c.innerHTML=e+b}var n=function(d,c){var a=true;if(c=="ok"){var e=i(),f=p({obj:e,Popover:d});if(f==false)a=false}if(c=="cancel")if(!!g)g();if(a){b=null;g_currSimplePopover=null}return a};function j(){if(a.LabelArray!=null)for(var b=0;b<a.LabelArray.length;b++)if(document.getElementById("pvrLabel"+(b+1))!=null)if(a.LabelsHtmlSafe)document.getElementById("pvrLabel"+(b+1)).innerHTML=a.LabelArray[b];else document.getElementById("pvrLabel"+(b+1)).innerText=a.LabelArray[b];if(a.DefaultsArray!=null)for(var b=0;b<a.DefaultsArray.length;b++){var c=document.getElementById("pvrValue"+(b+1));if(c!=null)if(c.type=="checkbox"){if(a.DefaultsArray[b]=="true")c.checked=true}else c.value=a.DefaultsArray[b]}if(a.LimitsArray!=null)for(var b=0;b<a.LimitsArray.length;b++)if(document.getElementById("pvrValue"+(b+1))!=null)document.getElementById("pvrValue"+(b+1)).maxLength=a.LimitsArray[b]}function h(){if(document.getElementById("pvrValue1")!=null)Spaces.PopOvers.SimplePopOver.ValidateTextboxInput()}function i(){var a,e={};e.Action="NameValueReturn";for(a=1;true;a++)if(document.getElementById("pvrValue"+a)==null)break;a=a-1;var d=new Array(a),c;for(var b=0;b<a;b++){c=document.getElementById("pvrValue"+(b+1));if(c.type=="checkbox")if(c.checked==true)d[b]="true";else d[b]="false";else d[b]=c.value}e.ReturnValues=d;return e}m()};Spaces.PopOvers.SimplePopOver.ValidateTextboxInput=function(){if(!g_currSimplePopover)return;var c=false,a=Spaces.PopOvers.SimplePopOver.GetCheckboxes();if(!a)return;for(var b=0;b<a.length;b++)if(""==a[b].value&&a[b].getAttribute("name")=="checkbox"){g_currSimplePopover.disableButton("ok");c=true;break}if(!c)g_currSimplePopover.enableButton("ok")};Spaces.PopOvers.SimplePopOver.GetCheckboxes=function(){var a=document.getElementById("SpacesPopOversSimplePopOver");if(a)var b=a.getElementsByTagName("INPUT");return b};window.WLPhotoPreview=function(K,J){var c,P=this,g=new $Memory.Groups,a=null,r=null,q=document.body,k,o,l=0,d,h,n,b,i=document.documentElement,p=$Browser.isSafari()?document.body:document.documentElement,e=null,j,f;function s(){if(c){var a=c.style,b=$Browser._isIE&&$Browser.version==7?j.offsetLeft/100:1;a.pixelLeft=0;a.width="100%";a.pixelTop=Math.max(0,p.scrollTop/b);a.pixelHeight=i.clientHeight/b}}function v(){var b;if(null!=window["event"]&&event.srcElement==k)b=t(a,o,false);else b=t(a,k,true);if(b)setTimeout(function(){try{b.focus()}catch(a){}},0)}function t(b,a,c){function g(a){function c(a){while(a&&a.style&&a.style.display!="none"&&a.style.visibility!="hidden")a=a.parentNode;if(!a||!a.style)return true;return false}var b="INPUT|BUTTON|TEXTAREA|FIELDSET|IFRAME|SELECT|";return a.tagName&&!a.disabled&&((b.indexOf(a.tagName+"|")>-1||a.tagName=="A"&&a.href)&&c(a))}function d(b){if(!b)return null;var a=c?b.nextSibling:b.previousSibling;while(a&&a.nodeType!=1)a=c?a.nextSibling:a.previousSibling;if(!a)return d(b.parentNode);else return a}function f(b,e){var a=e;if(a&&b.contains(a))while(a!=null)if(!g(a))if(c&&a.firstChild)a=a.firstChild;else if(!c&&a.lastChild)a=a.lastChild;else a=d(a);else return a;return null}if(a)a=d(a);else a=b;var e=f(b,a);if(!e&&a&&a!=b)return f(b,b);else return e}this.dispose=function(){if(g){g.dispose();g=null}c=null;k=null;o=null;d=null;h=null;n=null;b=null;e=null;j=null;f=null};function m(){event.cancelBubble=true;event.returnValue=false;return false}function L(f){a=f;var e=a.parentNode;if(null==e||null==e.tagName){a.style.display="none";q.appendChild(a);b.Nodes.register(a)}var d={href:"#"},c={position:"absolute"};o=b.Nodes.create("a",d,c,a);k=b.Nodes.create("a",d,c);a.insertAdjacentElement("afterBegin",k);b.Events.register(o,{onfocus:v});b.Events.register(k,{onfocus:v});a.style.position="absolute";if($Browser._isIE&&($Browser._isIE&&$Browser.version<=6)){r=new $UI.FramePopup;b.Properties.register(r)}return a}var w=function(c,d,b,a){return {x:c,y:d,width:b,height:a,isEmpty:function(){return this.width<=0||this.height<=0}}};function A(a){if(!a)return new w(0,0,0,0);return new w(a.offsetLeft,a.offsetTop,a.offsetWidth,a.offsetHeight)}function y(e){if(!a)return;if(!f)f=new w;var b=a.style,c=A(a);if(!c||c.isEmpty()){var d={visibility:a.currentStyle.visibility||b.visibility||"visible",display:a.currentStyle.display||b.display||"auto"};b.visibility="hidden";b.display="block";c=A(a);b.display=d.display;b.visibility=d.visibility}f.x=Math.max(i.clientWidth/2-c.width/2,10);if(e)f.y=p.scrollTop+Math.max(i.clientHeight-c.height,0)/2;f.height=c.height;f.width=c.width;b.pixelTop=f.y;b.pixelLeft=f.x;if(r)r.positionAt(f,1000)}function G(){if(!c){var a=g.create("show");c=_ce("div");c.className=c.id="WLPP_ModalBackground";c.style.position="absolute";q.appendChild(c);a.Events.register(c,{onfocus:v,onclick:m,onmousedown:m,onkeydown:m,onkeypress:m,ondblclick:m});a.Events.register(window,{onresize:s,onfocus:m});a.Nodes.register(c);s();C()}}function O(){y(true);B(a,l);a.style.display="block";function c(){try{t(a).focus()}catch(b){}}if($Browser._isIE&&$Browser.version<=6){e=document.getElementsByTagName("select");if(e)for(var b=0;b<e.length;b++){e[b].wlppHide=e[b].style.visibility;e[b].style.visibility="hidden"}}setTimeout(c,10)}function N(){g.create("show").dispose();g.create("ext").dispose();if($Browser._isIE&&$Browser.version<=6)if(e)for(var a=0;a<e.length;a++)e[a].style.visibility=e[a].wlppHide}function B(b,a){var c="undefined"==typeof b.style.filter?"opacity":"filter";b.style[c]=c=="filter"?"alpha(opacity="+a+")":.01*a}function C(){g.create("ext").Events.register(window,{onresize:z,onscroll:z})}function z(){g.create("ext").dispose();F();y(false);s();C()}function x(){if(l>100){l=0;return}B(a,Math.min(l,100));l=l+20;window.setTimeout(x,1)}function M(i){event.returnValue=false;j=_ce("div");j.className="UI_Dialog_ZoomTest";q.appendChild(j);G();g.create("show").Nodes.register(j);H();var a=i.srcElement;if(a.nodeName=="IMG")a=a.parentElement;var h=a.rel.split(";"),c=null;n={};for(var f=0;f<h.length;f++){c=h[f].split("=");if(c[0]!="WLPP")n[c[0]]=c[1]}d=new Image;b.Events.register(d,{onload:D});b.Events.register(d,{onerror:u});var e=n["url"];if(e==null)e=a.href;d.src=e}function F(){if(h){h.style.top=Math.max(p.scrollTop+(i.clientHeight-24)/2,0);h.style.left=Math.max((i.clientWidth-24)/2,0)}}function H(){h=q.appendChild(b.Nodes.create("img",{id:"wlppLoading",src:K},{top:Math.max(p.scrollTop+(i.clientHeight-24)/2,0)+"px",left:Math.max((i.clientWidth-24)/2,0)+"px"},null,null))}function I(){q.removeChild(h);h=null}function D(){var a=d.height,c=d.width,k=a/(i.clientHeight-100),j=c/(p.scrollWidth-50);if(k>1||j>1){var h=Math.max(k,j);a=a/h;c=c/h;d.height=a;d.width=c}var e=b.Nodes.create("div",{id:"wlppContainer",innerHTML:"<img id='wlppImage' src='"+d.src.encodeHtml()+"' height='"+a+"' width='"+c+"' />"},{padding:"10px 10px 10px 10px"},null,null);b.Events.register(e,{onkeypress:E});var l=b.Nodes.create("div",{id:"wlppDetails"},{width:d.width+"px"},null,null),f=b.Nodes.create("div",{id:"wlppClose"},null,null,null),g=b.Nodes.create("a",{id:"wlppCloseA",href:"#",innerHTML:J.encodeHtml()},null,null,null);b.Events.register(g,{onclick:u});f.appendChild(g);e.appendChild(l);e.appendChild(f);L(e);I();O();x()}function E(){if(event.keyCode==27)u()}function u(){event.returnValue=false;b.dispose();N();d=null;c=null;k=null;o=null;a=null;h=null;n=null;e=null;j=null;f=null}this.WirePhotoPreview=function(){var a=null,d=document.getElementById("wlppScope");b=g.create("wlppLocal");if(d){a=d.getElementsByTagName("a");for(var c=0;c<a.length;c++)if(a[c].rel&&a[c].rel.indexOf("WLPP")==0)g.create("wlppGlobal").Events.register(a[c],{onclick:M})}}};$UI.MsgBoxEx=function(o,l,i,f,p,g,h,j){var e="ok",d="cancel",a=new $UI.Popover,k=_ce("div"),n=function(f,c){var b=true;if(c==e){if(p({Popover:f})==false)b=false}else if(c==d&&!!g)g();if(b)a=null;return b};if(h){var b=temp=h;for(var m=0;m<10&&temp;m++){var c=temp.tagName.toLowerCase();if(c=="a"||c=="button"||c=="input"){b=temp;break}temp=temp.parentElement;if(!temp){b=null;break}}}if(l)k.innerHTML='<div style="margin-bottom:10px">'+l+"</div>";a.width=j?j:"416px";a.header=o;a.body=k;a.modal=true;if(i!=false)a.addButton(e,i,true,false);if(f!=false)a.addButton(d,f,false,true);a.show(n,b)};$UI.MsgBox=function(d,e,c,a,b,f){$UI.MsgBoxEx(d,e,c,a,f,null,b,null)};registerNamespace("Spaces");registerNamespace("Spaces.Controls");Spaces.Controls.NotificationBar=function(i,c){Spaces.Controls.NotificationBar.initializeBase(this,arguments);var a=i,d=null,g=this,b,e=new $Memory.Groups,k=e.create(null);c=this.getParameters();this.show=function(b,f,c){h(b,c);if(a.style.display!="block"){a.style.display="block";g.fire("onshow")}};this.hide=function(){if(a.style.display!="none"){a.style.display="none";g.fire("onhide")}};this.initialize=function(){Spaces.Controls.NotificationBar.callBaseMethod(this,"initialize",arguments);if($Dom.Css.getElementsByCssSelector("td.NBContent",a).length>0)b=a.childNodes[0].rows[0].childNodes[0];else{var i='<table cellspacing="0" cellpadding="0">'+"<tr><td></td></tr>"+"</table>",h=document.createElement("div");h.innerHTML=i;var g=h.childNodes[0];b=document.createElement("div");b.className+=" NBContent";var e=$Dom.Css.getElementsByCssSelector("div.Content",a),d=a;if(e.length==1){d=e[0];d.parentNode.removeChild(d)}while(d.childNodes.length>0)b.appendChild(d.childNodes[0]);g.rows[0].childNodes[0].appendChild(b);a.appendChild(g);if(c.fullwidth=="1"){a.style.borderLeftWidth=0;a.style.borderRightWidth=0}if(c.importance)f(c.importance);if(c.makevisible)a.style.visibility="visible"}};this.dispose=function(a){if(e)e.dispose(a);Spaces.Controls.NotificationBar.callBaseMethod(this,"dispose",arguments)};var f=function(b){if(d)a.className=a.className.removeSpaceDelimitedString("Error"+d);d=b;a.className+=" Error"+d},h=function(c,a){f(c);if(typeof a=="string")b.innerHTML=a}};Spaces.Controls.NotificationBar.registerClass("Spaces.Controls.NotificationBar","$Binding");Spaces.Controls.NotificationBar.Events=new $Enum("onshow","onhide");Spaces.Controls.NotificationBar.Params=new $Enum("importance","makevisible","fullwidth");Spaces.Controls.NotificationBar.Importance=new $Enum("Low","Med","High");registerNamespace("Spaces");registerNamespace("Spaces.Controls");Spaces.Controls.HoverButton=function(b,d){Spaces.Controls.HoverButton.initializeBase(this,arguments);d=this.getParameters();var a,f=b.src,c,e=false;this.initialize=function(){Spaces.Controls.HoverButton.callBaseMethod(this,"initialize",arguments);c=d.hoversrc;var e=Number.coerceInt(d.attachtoancestor);if(!e||e==0)e=1;a=b;for(var f=0;f<e&&a;f++)a=a.parentNode;if(a){a.attachEvent("onmouseenter",h);a.attachEvent("onmouseleave",g)}};this.dispose=function(){b=null;if(a){a.detachEvent("onmouseenter",h);a.detachEvent("onmouseleave",g);a=null}Spaces.Controls.HoverButton.callBaseMethod(this,"dispose",arguments)};this.ChangeImage=function(d,a){f=d;c=a;if(e)b.src=c;else b.src=f};var h=function(){b.src=c;e=true},g=function(){b.src=f;e=false}};Spaces.Controls.HoverButton.registerClass("Spaces.Controls.HoverButton","$Binding");Spaces.Controls.HoverButton.Params=new $Enum("hoversrc","attachtoancestor")