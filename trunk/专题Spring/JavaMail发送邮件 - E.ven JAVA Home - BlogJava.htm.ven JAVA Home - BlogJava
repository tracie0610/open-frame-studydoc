<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head id="Head"><title>
	JavaMail发送邮件 - E.ven JAVA Home - BlogJava
</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta id="metaKeywords" name="keywords" content="JavaMail发送邮件" /><link id="MainCss" type="text/css" rel="stylesheet" href="http://www.blogjava.net/Skins/BlueCurve/style.css" /><link id="RSSLink" title="RSS" type="application/rss+xml" rel="alternate" href="http://www.blogjava.net/Even/rss.aspx" /></head>
<body>
    <form name="Form1" method="post" action="120135.html" onsubmit="javascript:return WebForm_OnSubmit();" id="Form1">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="
__VIEWSTATE" value="" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['Form1'];
if (!theForm) {
    theForm = document.Form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="/WebResource.axd?d=PyW-m2hLmppJ9byT1bYEqw2&amp;t=633595624754539605" type="text/javascript"></script>

<script language=JavaScript>
									function ctlent(evt,id)
											{
												if(evt.ctrlKey && evt.keyCode == 13)
												{	
													try
													{
														TempSave(id);
													}
													catch(ex)
													{
													}
													finally
													{
													    __doPostBack('AjaxHolder$PostComment$btnSubmit','')
													}
												}
		
												}</script>
												<script language=JavaScript>function SetReplyAuhor(author){document.getElementById('AjaxHolder_PostComment_tbComment').value+="@"+author+"\n";document.getElementById('AjaxHolder_PostComment_tbComment').focus();return false}</script>
<script src="/ScriptResource.axd?d=keXr1l0ODizNGwpG5umihnLbiZlZFmnBNv9PADikeydJNFn_nnzWP6nCtj5LEvCjoGqazIbHl5iuU6pakvSNXw2&amp;t=633595624754539605" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=keXr1l0ODiwWLTaLPM0Wf405seaw-kJY_J94dRUexb3hftiy5dT0X5GxWLiqANj30&amp;t=633065726440000000" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=keXr1l0ODiwWLTaLPM0Wf405seaw-kJY_J94dRUexb1YLr7RQriMsNXsDWOxc8wQub8O_qeSuZ41&amp;t=633065726440000000" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
function WebForm_OnSubmit() {
if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;
return true;
}
//]]>
</script>

        
<div id="container">
	<!-- Header -->
  <div id="banner">
    <h1><a id="Header1_HeaderTitle" href="http://www.blogjava.net/Even/">E.ven JAVA Home</a></h1><br><br>
    <h1>Share</h1>
  </div>

	
 <div id="nav-main" align="center">   
    <ul>
	<li><a id="MyLinks1_HomeLink" href="http://www.blogjava.net/">BlogJava</a></li>
	<li><a id="MyLinks1_MyHomeLink" href="http://www.blogjava.net/Even/">首页</a></li>
	<li><a id="MyLinks1_NewPostLink" href="http://www.blogjava.net/Even/admin/EditPosts.aspx?opt=1">新随笔</a></li>
	<li><a id="MyLinks1_ContactLink" accesskey="9" href="http://www.blogjava.net/Even/contact.aspx?id=1">联系</a></li>
	<li><a id="MyLinks1_Syndication" href="http://www.blogjava.net/Even/rss">聚合</a></li>
	<li><a id="MyLinks1_Admin" href="http://www.blogjava.net/Even/admin/EditPosts.aspx">管理</a></li>
	<!--<a id="MyLinks1_XMLLink" href="http://www.blogjava.net/Even/rss"><img src="http://www.blogjava.net/images/xml.gif" alt="RSS 2.0 Feed" style="border-width:0px;" /></a>-->
    </ul>
   </div>


	<!-- Left Sidebar -->
	<div id="leftsidebar">
			<DIV id="nav-supp">
				
		<h3>随笔档案</h3>
		
				<ul>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl01_Link" href="http://www.blogjava.net/Even/archive/2009/04.html">2009年4月 (1)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl02_Link" href="http://www.blogjava.net/Even/archive/2009/01.html">2009年1月 (1)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl03_Link" href="http://www.blogjava.net/Even/archive/2008/08.html">2008年8月 (1)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl04_Link" href="http://www.blogjava.net/Even/archive/2008/03.html">2008年3月 (1)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl05_Link" href="http://www.blogjava.net/Even/archive/2007/06.html">2007年6月 (1)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl06_Link" href="http://www.blogjava.net/Even/archive/2007/05.html">2007年5月 (3)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl07_Link" href="http://www.blogjava.net/Even/archive/2007/03.html">2007年3月 (2)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl08_Link" href="http://www.blogjava.net/Even/archive/2007/01.html">2007年1月 (2)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl09_Link" href="http://www.blogjava.net/Even/archive/2006/10.html">2006年10月 (6)</a> </li>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl00_LinkList_ctl10_Link" href="http://www.blogjava.net/Even/archive/2006/08.html">2006年8月 (8)</a> </li>
			
				</ul>
			
	
		<h3>文章档案</h3>
		
				<ul>
			
				<li><a id="ArchiveLinks1_Categories_CatList_ctl01_LinkList_ctl01_Link" href="http://www.blogjava.net/Even/archives/2006/08.html">2006年8月 (1)</a> </li>
			
				</ul>
			
	

				
<h3>最新随笔</h3>
<ul style="word-break:break-all">
	
	
			<li><a id="RecentPosts1_RecentPostsList_ctl00_RecentPostsList2_ctl00_Hyperlink1" href="http://www.blogjava.net/Even/archive/2009/04/13/265220.html">1. web2.0 兼容IE6/IE7/FF的通用方法</a></li>
		
		
	
			<li><a id="RecentPosts1_RecentPostsList_ctl01_RecentPostsList2_ctl00_Hyperlink1" href="http://www.blogjava.net/Even/archive/2009/01/21/252198.html">2. SVN 自动邮件通知 的两种方式以及中文解决方案 （转）</a></li>
		
		
	
			<li><a id="RecentPosts1_RecentPostsList_ctl02_RecentPostsList2_ctl00_Hyperlink1" href="http://www.blogjava.net/Even/archive/2008/08/25/224234.html">3. Java 删除文件夹里所有文件</a></li>
		
		
	
			<li><a id="RecentPosts1_RecentPostsList_ctl03_RecentPostsList2_ctl00_Hyperlink1" href="http://www.blogjava.net/Even/archive/2008/03/22/187851.html">4. Hibernate 缓存</a></li>
		
		
	
			<li><a id="RecentPosts1_RecentPostsList_ctl04_RecentPostsList2_ctl00_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/06/12/123527.html">5. jspsmartupload文件上下传攻略转CSDN</a></li>
		
		
	
			<li><a id="RecentPosts1_RecentPostsList_ctl05_RecentPostsList2_ctl00_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/05/26/120137.html">6. Java RMI的简单例子</a></li>
		
			<li><a id="RecentPosts1_RecentPostsList_ctl05_RecentPostsList2_ctl01_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/05/26/120136.html">7. Java读出配置文件的方法</a></li>
		
			<li><a id="RecentPosts1_RecentPostsList_ctl05_RecentPostsList2_ctl02_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/05/26/120135.html">8. JavaMail发送邮件</a></li>
		
		
	
			<li><a id="RecentPosts1_RecentPostsList_ctl06_RecentPostsList2_ctl00_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/03/24/106049.html">9. zlib --shared</a></li>
		
			<li><a id="RecentPosts1_RecentPostsList_ctl06_RecentPostsList2_ctl01_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/03/24/106032.html">10. How to build JpegV6 in 64 bit linux</a></li>
		
	
</ul>

				
<h3>最新评论
	<a id="RecentComments1_RSSHyperlink1" href="http://www.blogjava.net/Even/CommentsRSS.aspx"><img src="/images/xml.gif" style="border-width:0px;" /></a></h3>
<div class="RecentComment">
	
			<ul>
		
			<li style="word-break:break-all">
				<a id="RecentComments1_CommentList_ctl01_Hyperlink1" href="http://www.blogjava.net/Even/archive/2008/12/15/224234.html#246384">1. re: Java 删除文件夹里所有文件</a>
			</li>
			<li style="word-break:break-all">
				不错..不错..
			</li>
			<li style="text-align:right;margin-right:4px">
				--sdf</li>
		
			<li style="word-break:break-all">
				<a id="RecentComments1_CommentList_ctl02_Hyperlink1" href="http://www.blogjava.net/Even/archive/2008/09/12/120137.html#228590">2. re: Java RMI的简单例子[未登录]</a>
			</li>
			<li style="word-break:break-all">
				rmi结合spring提供接口，用起来更加方便了
			</li>
			<li style="text-align:right;margin-right:4px">
				--apple0668</li>
		
			<li style="word-break:break-all">
				<a id="RecentComments1_CommentList_ctl03_Hyperlink1" href="http://www.blogjava.net/Even/archive/2008/08/21/65957.html#223512">3. re: Spring 一些连接数据库的方法[未登录]</a>
			</li>
			<li style="word-break:break-all">
				想学习的自己去别的地方找吧，这些都不懂，你们实在垃圾
			</li>
			<li style="text-align:right;margin-right:4px">
				--Even</li>
		
			<li style="word-break:break-all">
				<a id="RecentComments1_CommentList_ctl04_Hyperlink1" href="http://www.blogjava.net/Even/archive/2008/08/21/65957.html#223471">4. re: Spring 一些连接数据库的方法</a>
			</li>
			<li style="word-break:break-all">
				这谁都知道，没个例子，讲个屁啊
			</li>
			<li style="text-align:right;margin-right:4px">
				--ssss</li>
		
			<li style="word-break:break-all">
				<a id="RecentComments1_CommentList_ctl05_Hyperlink1" href="http://www.blogjava.net/Even/archive/2008/07/31/120137.html#219051">5. re: Java RMI的简单例子</a>
			</li>
			<li style="word-break:break-all">
				是啊<br>那现在用什么技术实现分布式
			</li>
			<li style="text-align:right;margin-right:4px">
				--嘉宝</li>
		
			</ul>
		
</div>

				</DIV>
		</div>
	<!-- Main Content -->
	<div id="content"><a id="contentstart" name="contentstart"></a>
					
	<div class="post">
		<div class="posthead">
			<h2>
				<a id="viewpost1_TitleUrl" class="singleposttitle" href="http://www.blogjava.net/Even/archive/2007/05/26/120135.html">JavaMail发送邮件</a>
			</h2>
 			Posted on 2007-05-26 09:38 <a href='http://www.blogjava.net/Even/'>E.ven</a> 阅读(563) <a href='#Post'>评论(2)</a> &nbsp;<a href="http://www.blogjava.net/Even/admin/EditPosts.aspx?postid=120135">编辑</a> &nbsp;<a href="http://www.blogjava.net/Even/AddToFavorite.aspx?id=120135">收藏</a>  
			<img src ="http://www.blogjava.net/Even/aggbug/120135.html?webview=1" width = "1" height = "1" />
			
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
rdf:about="http://www.blogjava.net/Even/archive/2007/05/26/120135.html"
dc:identifier="http://www.blogjava.net/Even/archive/2007/05/26/120135.html"
dc:title="JavaMail发送邮件"
trackback:ping="http://www.blogjava.net/Even/services/trackbacks/120135.aspx" />
</rdf:RDF>
-->

		</div>
		<div class="postbody"><p>昨天写一个JavaMail的程序，发现原来自己忘记了那么多呢，现在补上资料，方便以后回忆。<br><br></p>
<div>1.介绍: <br><br>Java Mail API的开发是SUN为Java开发者提供公用API框架的持续努力的良好例证。提倡公用框架，反对受限于供应商的解决方案，充分预示着一个日益开放的开发环境的建立。 <br>　　Java Mail API的结构本身证明了它的开发者的基本目标之一--软件开发的工作量应该取决于应用程序本身的复杂程度以及开发者所要求的控制程度。换句话说，Java Mail API尽可能地保持简单。乍看起来，JavaMail API所拥有的类总数以及类之间的关系可能让人误解为要花费漫长的学习时间。实际上，一旦正式开始使用，你就会发现该API不失为在应用程序中加入健壮的邮件/通讯支持的简单工具。 <br><br>2.安装: <br><br>安装前要确保你的机子上安装得有标准版的JDK和Web服务器,并且已配置好,有关它们的安装方法,请参考其它文章(网上到处都有). <br><br>(1).安装JavaMail API。现在最常用的 JavaMail API 版本是1.3. <br>　　要使用 JavaMail 1.3 API，请下载 JavaMail 1.3 实现，解开Javamail-1_3.zip 文件，并将 mail.jar 文件添加到 CLASSPATH 中。除了核心类，随版本 1.3 实现一起提供的还有 SMTP、IMAP4 和 POP3 供应商。 <br>　　 <br>(2).JavaBeans Activation Framework(1.0.2版) 的安装 <br>JavaMail API 的所有版本都需要 JavaBeans Activation Framework 来支持任意数据块的输入及相应处理。功能似乎不多，但目前许多浏览器和邮件工具中都能找到这种基本的 MIME 型支持。下载完框架后，解开 jaf1_0_2.zip 文件，并将 activation.jar 文件添加到 CLASSPATH 中。 <br>　　 <br><br>注: 如果您使用的JDK是J2EE，就没有什么特定的事非要用基本 JavaMail API来做不可；J2EE 的类就能处理了,因为它本身就包含有JavaMail API和JAF,您只需要确将 j2ee.jar 文件添加到您的CLASSPATH 中并已全部设置好。 </div>
<div>&nbsp;</div>
<div><br>3.JavaMail的常用类介绍 <br><br>事先说明: <br><br>没用过JavaMail的人可能看不懂这些介绍,不过不要紧,后面的文章有具体的实例,到时也可倒回来查看这些类的用法. <br><br><br>(1) javax.mail.Properties类 <br>　　JavaMail需要Properties来创建一个session对象。它将寻找字符串"mail.smtp.host"，属性值就是发送邮件的主机. <br><br>用法: <br>　Properties props = new Properties (); <br>　　　props.put("mail.smtp.host", "smtp.163.com");//可以换上你的smtp主机名。 <br><br><br>(2) javax.mail.Session类 <br>　　这个Session类代表JavaMail 中的一个邮件session. 每一个基于 JavaMail的应用程序至少有一个session但是可以有任意多的session。 在这个例子中, Session对象需要知道用来处理邮件的SMTP 服务器。 <br><br>用法: <br>　　 Session sendMailSession; <br>　　 sendMailSession = Session.getInstance(props, null); <br><br><br>(3) javax.mail.Transport类 <br>　　邮件是既可以被发送也可以被受到。JavaMail使用了两个不同的类来完成这两个功能：Transport 和Store. Transport 是用来发送信息的，而Store用来收信。对于这的教程我们只需要用到Transport对象。 <br><br>用法： <br>Transport transport; <br>　 transport = sendMailSession.getTransport("smtp"); <br><br>　　用JavaMail Session对象的getTransport 方法来初始化Transport。传过去的字符串申明了对象所要使用的协议，如"smtp"。这将为我们省了很多时间。因为JavaMail以境内置了很多协议的实现方法。 <br><br>　注意: JavaMail并不是绝对支持每一个协议，目前支持IMAP、 SMTP和 POP3. <br><br><br>(4) javax.mail.MimeMessage类 <br>　　Message对象将存储我们实际发送的电子邮件信息，Message对象被作为一个MimeMessage对象来创建并且需要知道应当选择哪一个JavaMail session。 <br><br>　　用法： <br>Message newMessage = new MimeMessage(sendMailSession); <br><br><br>(5) javax.mail.InternetAddress类 <br>一旦您创建了 Session 和 Message，并将内容填入消息后，就可以用Address确定信件地址了。和 Message 一样，Address 也是个抽象类。您用的是Javax.mail.internet.InternetAddress 类. <br><br>用法: <br>InternetAddress from=new InternetAddress("xxf&#64;cafe.com"); <br><br><br>(6) javax.mail.Store类 <br>Store类实现特定邮件协议上的读、写、监视、查找等操作。通过Javax.mail.Store类可以访问Javax.mail.Folder类。 <br><br>用法: <br>Store store=s.getSorte("pop3");//s为一个邮件会话 <br>store.connect(popserver,username,password);//通过你提供的pop地址,用户名和密码登录你的邮箱 <br><br><br>(7) javax.mail.Folder类 <br>Folder类用于分级组织邮件，并提供照Javax.mail.Message格式访问email的能力。 <br><br>用法: <br>Folder folder=store.getFolder("INBOX"); <br>folder.open(Folder.READ_ONLY); <br><br><br>(8) javax.mail.Internet.MimeMultpart <br>一般保存电子邮件内容的容器是Multipart抽象类,它定义了增加和删除及获得电子邮件不同部分内容的方法.由于Multipart是抽象类,我们必须为它使用一个具体的子类,JavaMail API提供javax.mail.Internet.MimeMultpart类来使用MimeMessage对象. <br><br>用法: <br>MimeMultipart multipart=new MimeMultipart(); <br><br>注:我们使用MimeMultipart对象的一个方法是addBodyPart(),它在我们的电子邮件内容里添加BodyPart(BodyPart类在下面紧接着要介绍)对象.消息可以有很多部分,一个BodyPart可以代表一个部分. <br><br><br>(9) javax.mail.Internet.MimeBodyPart类 <br><br>MimeBodyPart是BodyPart具体用于mimeMessage的一个子类. <br>MimeBodyPart对象代表一个MimeMessage对象内容的一部分.每个MimeBodyPart被认为有两部分: <br>⊙一个MIME类型 <br>⊙匹配这个类型的内容 <br><br>用法: <br>MimeBodyPart mdp=new MimeBodyPart(); <br>String text="Hello JavaMail!"; <br>mdp.setContent(text,"text/plain");//定义MIME类型为text/plain,并设置MimeBodyPart的内容. <br><br><br>(10) javax.activation.DataHandler类(包含在JAF中) <br>JavaMail API不限制信息只为文本,任何形式的信息都可能作茧自缚MimeMessage的一部分.除了文本信息,作为文件附件包含在电子邮件信息的一部分是很普遍的.JavaMail API通过使用DataHandler对象,提供一个允许我们包含非文本BodyPart对象的简便方法. <br><br>用法: <br>DataHandler dh=new DataHandler(text,type); <br>mdp.setDatahandler(dh);//mdp是一个MimeBodyPart对象 <br><br><br>(11) javax.activation.FileDataSource类(包含在JAF中) <br>一个FileDataSource对象可以表示本地文件和服务器可以直接访问的资源.一个本地文件可以通过创建一个新的MimeBodyPart对象附在一个mimeMessage对象上. <br><br>用法: <br>MimeMultipart mm=new MimeMultipart(); <br>MimeBodyPart mdp=new MimeBodyPart(); <br>FileDataSource fds=new FileDataSource("c:/exam.txt"); <br>mdp.setDataHandler(new DataHandler(fds)); //设置数据源 <br>mm.addBodyPart(mdp); //为当前消息MimeMultipart对象增加MimeBodyPart <br><br><br>(12) javax.activation.URLDataSource类(包含在JAF中) <br>远程资源,URL不会指向它们,由一个URLDataSource对象表示.一个远程资源可以通过创建一个新mimeBodyPart对象附在一个mimeMessage对象上(同FileDataSource差不多). <br><br>用法: <br>与FileDataSource唯一不同的是数据源的设置: <br>URLDataSource uds=new URLDataSource( <a href="http://www.cnjsp.com/logo.gif"><u><font color=#0000ff>http://www.cnjsp.com/logo.gif</font></u></a> ); </div>
<div>&nbsp;</div>
<div><br>4.试着编写第一个发送程序 <br><br>在前面我们已对JavaMail作了一些介绍,下面我们可试着写自己的程序了. <br><br>首先,我们先写一个撰写邮件的html程序index.htm,如下: <br>------------------------------------------------------------------------------------------- <br>&lt; html &gt; <br>&lt; head &gt; <br>&lt; meta http-equiv="Content-Type" content="text/html; charset=gb2312" &gt; <br>&lt; title &gt; 撰写邮件 &lt; /title &gt; <br>&lt; /head &gt; <br><br>&lt; body &gt; <br>&lt; form name="form1" method="post" action="testmail.jsp" &gt; <br>&lt; table width="75" border="0" align="center" cellspacing="1" bgcolor="#006600" class="black" &gt; <br>&lt; tr bgcolor="#FFFFFF" &gt; <br>&lt; td width="24%" &gt; 收信人地址: &lt; /td &gt; <br>&lt; td width="76%" &gt; <br>&lt; input name="to" type="text" id="to" &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr bgcolor="#FFFFFF" &gt; <br>&lt; td &gt; 主题: &lt; /td &gt; <br>&lt; td &gt; <br>&lt; input name="title" type="text" id="title" &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr &gt; <br>&lt; td height="107" colspan="2" bgcolor="#FFFFFF" &gt; <br>&lt; textarea name="content" cols="50" rows="5" id="content" &gt;&lt; /textarea &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr align="center" &gt; <br>&lt; td colspan="2" bgcolor="#FFFFFF" &gt; <br>&lt; input type="submit" name="Submit" value="发送" &gt; <br>&lt; input type="reset" name="Submit2" value="重置" &gt; <br>&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; /table &gt; <br>&lt; /form &gt; <br>&lt; /body &gt; <br>&lt; /html &gt; <br><br><br>接着,我们再写一个处理程序testmail.jsp,如下: <br>----------------------------------------------------------------------------------------- <br>&lt; %&#64; page contentType="text/html;charset=GB2312" % &gt; <br>&lt; %request.setCharacterEncoding("gb2312");% &gt;&lt; !--中文处理代码-- &gt; <br><br>&lt; !--引入要用到的类库-- &gt; <br>&lt; %&#64; page import="java.util.*,javax.mail.*"% &gt; <br>&lt; %&#64; page import="javax.mail.internet.*"% &gt; <br><br>&lt; html &gt; <br>&lt; head &gt; <br>&lt; meta http-equiv="Content-Type" content="text/html; charset=gb2312" &gt; <br>&lt; title &gt; 发送成功 &lt; /title &gt; <br>&lt; /head &gt; <br><br>&lt; body &gt; <br>&lt; % <br>try{ <br><br>//从html表单中获取邮件信息 <br>String tto=request.getParameter("to"); <br>String ttitle=request.getParameter("title"); <br>String tcontent=request.getParameter("content"); <br><br>Properties props=new Properties();//也可用Properties props = System.getProperties(); <br>props.put("mail.smtp.host","smtp.163.net");//存储发送邮件服务器的信息 <br>props.put("mail.smtp.auth","true");//同时通过验证 <br>Session s=Session.getInstance(props);//根据属性新建一个邮件会话 <br>s.setDebug(true); <br><br>MimeMessage message=new MimeMessage(s);//由邮件会话新建一个消息对象 <br><br>//设置邮件 <br>InternetAddress from=new InternetAddress("boy&#64;163.net"); <br>message.setFrom(from);//设置发件人 <br>InternetAddress to=new InternetAddress(tto); <br>message.setRecipient(Message.RecipientType.TO,to);//设置收件人,并设置其接收类型为TO <br>message.setSubject(ttitle);//设置主题 <br>message.setText(tcontent);//设置信件内容 <br>message.setSentDate(new Date());//设置发信时间 <br><br>//发送邮件 <br>message.saveChanges();//存储邮件信息 <br>Transport transport=s.getTransport("smtp"); <br>transport.connect("smtp.163.net","boy","iloveyou");//以smtp方式登录邮箱 <br>transport.sendMessage(message,message.getAllRecipients());//发送邮件,其中第二个参数是所有 <br>//已设好的收件人地址 <br>transport.close(); <br><br>% &gt; <br>&lt; div align="center" &gt; <br>&lt; p &gt;&lt; font color="#FF6600" &gt; 发送成功! &lt; /font &gt;&lt; /p &gt; <br>&lt; p &gt;&lt; a href="recmail.jsp" &gt; 去看看我的信箱 &lt; /a &gt;&lt; br &gt; <br>&lt; br &gt; <br>&lt; a href="index.htm" &gt; 再发一封 &lt; /a &gt; &lt; /p &gt; <br>&lt; /div &gt; <br>&lt; % <br>}catch(MessagingException e){ <br>out.println(e.toString()); <br>} <br>% &gt; <br>&lt; /body &gt; <br>&lt; /html &gt; <br><br>**********************************注意*************************************** <br><br>有好多书上和网上的文章在关键部分都是这样写testmail.jsp的,如下: <br><br>String tto=request.getParameter("to"); <br>String ttitle=request.getParameter("title"); <br>String tcontent=request.getParameter("content"); <br>Properties props=new Properties(); <br>props.put("mail.smtp.host","smtp.163.net"); <br>Session s=Session.getInstance(props); <br>MimeMessage message=new MimeMessage(s); <br><br>InternetAddress from=new InternetAddress("boy&#64;163.net"); <br>message.setFrom(from); <br>InternetAddress to=new InternetAddress(tto); <br>message.setRecipient(Message.RecipientType.TO,to); <br><br>message.setSubject(ttitle); <br>message.setText(tcontent); <br>message.setSentDate(new Date()); <br><br>Store store=s.getStore("pop3"); <br>store.connect("pop.163.net","boy","iloveyou");//以pop3的方式登录邮箱 <br>Transport transport=s.getTransport("smtp"); <br>transport.send(message); <br>store.close(); <br><br>事实上,这种方式并不可靠,因为很多电子邮局的smtp服务器要求我们通过验证,所以用这种方式发邮件时,只能发给同类邮箱(即相同smtp的邮箱),甚至有时同类邮箱也发不出去.以上两种方式我试过很多次,结果证明第一种方式是最可靠的. <br><br><br>好了,我相信你应该会写最简单的Email发送程序了.OK,下一次我们将说说怎样写发送HTML格式的邮件. </div>
<div>&nbsp;</div>
<div>5.发送HTML格式的邮件 <br><br>所谓HTML格式,就是超文本格式.你的邮件可以用HTML代码编写,发给对方后,对方收到的将是信息将是超文本,超文本比纯文本好看多了.下以面是在以前例子的基础上修改的程序: <br><br>&lt; %&#64; page contentType="text/html;charset=GB2312" % &gt; <br>&lt; %request.setCharacterEncoding("gb2312");% &gt; <br>&lt; %&#64; page import="java.util.*,javax.mail.*"% &gt; <br>&lt; %&#64; page import="javax.mail.internet.*"% &gt; <br>&lt; html &gt; <br>&lt; head &gt; <br>&lt; meta http-equiv="Content-Type" content="text/html; charset=gb2312" &gt; <br>&lt; title &gt; 发送成功 &lt; /title &gt; <br>&lt; /head &gt; <br><br>&lt; body &gt; <br>&lt; % <br>try{ <br>String tto=request.getParameter("to"); <br>String ttitle=request.getParameter("title"); <br>String tcontent=request.getParameter("content"); <br>Properties props=new Properties(); <br>props.put("mail.smtp.host","127.0.0.1"); <br>props.put("mail.smtp.auth","true"); <br>Session s=Session.getInstance(props); <br>s.setDebug(true); <br><br>MimeMessage message=new MimeMessage(s); <br><br>//给消息对象设置发件人/收件人/主题/发信时间 <br>InternetAddress from=new InternetAddress("xxf&#64;cafe.com"); <br>message.setFrom(from); <br>InternetAddress to=new InternetAddress(tto); <br>message.setRecipient(Message.RecipientType.TO,to); <br>message.setSubject(ttitle); <br>message.setSentDate(new Date()); <br><br><br>//给消息对象设置内容 <br>BodyPart mdp=new MimeBodyPart();//新建一个存放信件内容的BodyPart对象 <br>mdp.setContent(tcontent,"text/html;charset=gb2312");//给BodyPart对象设置内容和格式/编码方式 <br>Multipart mm=new MimeMultipart();//新建一个MimeMultipart对象用来存放BodyPart对 <br>//象(事实上可以存放多个) <br>mm.addBodyPart(mdp);//将BodyPart加入到MimeMultipart对象中(可以加入多个BodyPart) <br>message.setContent(mm);//把mm作为消息对象的内容 <br><br>message.saveChanges(); <br>Transport transport=s.getTransport("smtp"); <br>transport.connect("127.0.0.1","xxf","coffee"); <br>transport.sendMessage(message,message.getAllRecipients()); <br>transport.close(); <br>% &gt; <br>&lt; div align="center" &gt; <br>&lt; p &gt;&lt; font color="#FF6600" &gt; 发送成功! &lt; /font &gt;&lt; /p &gt; <br>&lt; p &gt;&lt; a href="recmail.jsp" &gt; 去看看我的信箱 &lt; /a &gt;&lt; br &gt; <br>&lt; br &gt; <br>&lt; a href="index.htm" &gt; 再发一封 &lt; /a &gt; &lt; /p &gt; <br>&lt; /div &gt; <br>&lt; % <br>}catch(MessagingException e){ <br>out.println(e.toString()); <br>} <br>% &gt; <br>&lt; /body &gt; <br>&lt; /html &gt; <br><br>注:撰写邮件的html文件仍然和前面(请参考jsp和Java Mail(三))那个一样,不需要作任何修改. <br><br>怎么样,这个程序是不是很简单呢?如果还有什么不懂的话,请在下面留言.下一次我们将要讲一讲怎样发送附件. </div>
<div>&nbsp;</div>
<div>七.编写灵活的发送程序 <br><br>本小节没加什么新鲜的东西,但是综合了以前的所有内容,可以让你灵活地发送你想要发的邮件.看了本小节之后对你会感觉到非常有用. <br><br>更改后的撰写界面程序如下: <br>------------------------------------------------------------------------------------------- <br>&lt; html &gt; <br>&lt; head &gt; <br>&lt; meta http-equiv="Content-Type" content="text/html; charset=gb2312" &gt; <br>&lt; title &gt; 撰写邮件 &lt; /title &gt; <br>&lt; /head &gt; <br>&lt; body &gt; <br>&lt; form action="testall.jsp" method="post" name="form1" &gt; <br>&lt; table width="75" border="0" align="center" cellspacing="1" bgcolor="#006600" class="black" &gt; <br>&lt; tr bgcolor="#FFFFFF" &gt; <br>&lt; td width="24%" &gt; 收信人地址: &lt; /td &gt; <br>&lt; td width="76%" &gt; &lt; input name="to" type="text" id="to" &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr bgcolor="#FFFFFF" &gt; <br>&lt; td &gt; 主题: &lt; /td &gt; <br>&lt; td &gt; &lt; input name="title" type="text" id="title" &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr &gt; <br>&lt; td height="18" colspan="2" bgcolor="#FFFFFF" &gt; 信件类型 <br>&lt; select name="emailtype" id="emailtype" &gt; <br>&lt; option value="text/plain" selected &gt; Text &lt; /option &gt; <br>&lt; option value="text/html" &gt; Html &lt; /option &gt; <br>&lt; /select &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr &gt; <br>&lt; td height="53" colspan="2" bgcolor="#FFFFFF" &gt;&lt; textarea name="content" cols="50" rows="5" id="content" &gt;&lt; /textarea &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr align="center" &gt; <br>&lt; td colspan="2" bgcolor="#FFFFFF" &gt; 附件1(自定义): <br>&lt; input name="fj1" type="text" id="fj1" &gt; <br>(输入文本信息) &lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr align="center" valign="bottom" &gt; <br>&lt; td colspan="2" bgcolor="#FFFFFF" &gt; 附件2(本地): <br>&lt; input name="fj2" type="file" id="fj2" size="10" &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr align="center" &gt; <br>&lt; td colspan="2" bgcolor="#FFFFFF" &gt; 附件3(远程): <br>&lt; input name="fj3" type="text" id="fj3" value="http://" &gt; <br>(输入URL) &lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; tr align="center" &gt; <br>&lt; td colspan="2" bgcolor="#FFFFFF" &gt; &lt; input type="submit" name="Submit" value="发送" &gt; <br>&lt; input type="reset" name="Submit2" value="重置" &gt;&lt; /td &gt; <br>&lt; /tr &gt; <br>&lt; /table &gt; <br>&lt; /form &gt; <br>&lt; /body &gt; <br>&lt; /html &gt; <br><br><br>处理邮件的JSP程序如下: <br>---------------------------------------------------------------------------------------- <br>&lt; %&#64; page contentType="text/html;charset=GB2312" % &gt; <br>&lt; %request.setCharacterEncoding("gb2312");% &gt; <br>&lt; %&#64; page import="java.util.*,javax.mail.*"% &gt; <br>&lt; %&#64; page import="javax.mail.internet.*"% &gt; <br>&lt; %&#64; page import="javax.activation.*"% &gt;&lt; !--要发送附件必须引入该库-- &gt; <br>&lt; %&#64; page import="java.net.*"% &gt;&lt; !--要用到URL类-- &gt; <br>&lt; html &gt; <br>&lt; head &gt; <br>&lt; meta http-equiv="Content-Type" content="text/html; charset=gb2312" &gt; <br>&lt; title &gt; 发送成功 &lt; /title &gt; <br>&lt; /head &gt; <br>&lt; body &gt; <br>&lt; % <br>try{ <br>String tto=request.getParameter("to"); <br>String ttitle=request.getParameter("title"); <br>String emailtype=request.getParameter("emailtype");//获取email类型 <br>String tcontent=request.getParameter("content"); <br>String tfj1=request.getParameter("fj1"); <br>String tfj2=request.getParameter("fj2"); <br>String tfj3=request.getParameter("fj3"); <br><br>Properties props=new Properties(); <br>props.put("mail.smtp.host","127.0.0.1"); <br>props.put("mail.smtp.auth","true"); <br>Session s=Session.getInstance(props); <br>s.setDebug(true); <br><br>MimeMessage message=new MimeMessage(s); <br><br>//给消息对象设置发件人/收件人/主题/发信时间 <br>InternetAddress from=new InternetAddress("xxf&#64;cafe.com"); <br>message.setFrom(from); <br>InternetAddress to=new InternetAddress(tto); <br>message.setRecipient(Message.RecipientType.TO,to); <br>message.setSubject(ttitle); <br>message.setSentDate(new Date()); <br><br>Multipart mm=new MimeMultipart();//新建一个MimeMultipart对象用来存放多个BodyPart对象 <br><br>//设置信件文本内容 <br>BodyPart mdp=new MimeBodyPart();//新建一个存放信件内容的BodyPart对象 <br>mdp.setContent(tcontent,emailtype+";charset=gb2312");//给BodyPart对象设置内容和格式/编码方式 <br>mm.addBodyPart(mdp);//将含有信件内容的BodyPart加入到MimeMultipart对象中 <br><br>//设置信件的附件1(自定义附件:直接将所设文本内容加到自定义文件中作为附件发送) <br>mdp=new MimeBodyPart();//新建一个存放附件的BodyPart <br>DataHandler dh=new DataHandler(tfj1,"text/plain;charset=gb2312"); <br>//新建一个DataHandler对象,并设置其内容和格式/编码方式 <br>mdp.setFileName("text.txt");//加上这句将作为附件发送,否则将作为信件的文本内容 <br>mdp.setDataHandler(dh);//给BodyPart对象设置内容为dh <br>mm.addBodyPart(mdp);//将含有附件的BodyPart加入到MimeMultipart对象中 <br><br>//设置信件的附件2(用本地上的文件作为附件) <br>mdp=new MimeBodyPart(); <br>FileDataSource fds=new FileDataSource(tfj2); <br>dh=new DataHandler(fds); <br>int ddd=tfj2.lastIndexOf("\\"); <br>String fname=tfj2.substring(ddd);//提取文件名 <br>String ffname=new String(fname.getBytes("gb2312"),"ISO8859-1");//处理文件名是中文的情况 <br>mdp.setFileName(ffname);//可以和原文件名不一致,但最好一样 <br>mdp.setDataHandler(dh); <br>mm.addBodyPart(mdp); <br><br>//设置信件的附件3(用远程文件作为附件) <br>mdp=new MimeBodyPart(); <br><br><br>URL urlfj=new URL(tfj3); <br>URLDataSource ur=new URLDataSource(urlfj); <br>//注:这里用的参数只能为URL对象,不能为URL字串,在前面类介绍时有误(请谅解),这里纠正一下. <br>dh=new DataHandler(ur); <br>int ttt=tfj3.lastIndexOf("/"); <br>String urlname=tfj3.substring(ttt); <br>//String urlfname=new String(urlname.getBytes("gb2312"),"ISO8859-1");//不知怎么回事,这里不能处理中文问题 <br>mdp.setFileName(urlname); <br>mdp.setDataHandler(dh); <br>mm.addBodyPart(mdp); <br><br>message.setContent(mm);//把mm作为消息对象的内容 <br><br>message.saveChanges(); <br>Transport transport=s.getTransport("smtp"); <br>transport.connect("127.0.0.1","xxf","coffee"); <br>transport.sendMessage(message,message.getAllRecipients()); <br>transport.close(); <br>% &gt; <br>&lt; div align="center" &gt; <br>&lt; p &gt;&lt; font color="#FF6600" &gt; 发送成功! &lt; /font &gt;&lt; /p &gt; <br>&lt; p &gt;&lt; a href="recmail.jsp" &gt; 去看看我的信箱 &lt; /a &gt;&lt; br &gt; <br>&lt; br &gt; <br>&lt; a href="index.htm" &gt; 再发一封 &lt; /a &gt; &lt; /p &gt; <br>&lt; /div &gt; <br>&lt; % <br>}catch(MessagingException e){ <br>out.println(e.toString()); <br>} <br>% &gt; <br>&lt; /body &gt; <br>&lt; /html &gt; <br><br>到目前为止,我们基本上已学会了发各种类型的邮件了.</div>
这里最加上一些在实践工程中遇到的一些问题：<br>1&nbsp;&nbsp;&nbsp; 发送Email认证。现在很多Email服务器在SMTP发送前需要做用户名密码认证。<br>不然会抛出javax.mail.AuthenticationFailedException，<br>解决办法：<br>final String username = "username";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final String password = "password";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //使用验证<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Session session = Session.getDefaultInstance(props,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new Authenticator() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protected javax.mail.PasswordAuthentication getPasswordAuthentication() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new javax.mail.PasswordAuthentication(username,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; password);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br><br>把username,password改成你邮箱的用户名和密码<br><br>2当要发邮件的对象不单是一个，是很多个的时候：<br>String to[] = request.getParameterValues("check_box");//获取收件人email地址<br>&nbsp;&nbsp;ArrayList arraylist = new ArrayList();<br>&nbsp;&nbsp;for(int i=0;i &lt; to.length;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;arraylist.add(new InternetAddress(to[i]));<br>&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; //收件地址放进队列<br>Message msg = new MimeMessage(s);<br>&nbsp;&nbsp;&nbsp;&nbsp; msg.setFrom(new InternetAddress(from));//设置发件人<br>&nbsp;&nbsp;msg.setRecipients(Message.RecipientType.TO, (InternetAddress[])arraylist.toArray(new InternetAddress[arraylist.size()]));<br>&nbsp;&nbsp;&nbsp;&nbsp; msg.setSubject(subject);//设置主题<br>&nbsp;&nbsp;&nbsp;&nbsp; msg.setSentDate(new Date());//设置发信时<br>&nbsp;&nbsp;BodyPart mdp=new MimeBodyPart();//新建一个存放信件内容的BodyPart对象<br>msg.setRecipients(Message.RecipientType.TO, (InternetAddress[])arraylist.toArray(new InternetAddress[arraylist.size()]));<br><br>以上是邮件经常遇到的问题，特此纪录<br>
</div>
	</div><script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('AjaxHolder$scriptmanager1', document.getElementById('Form1'));
Sys.WebForms.PageRequestManager.getInstance()._updateControls(['tAjaxHolder$UpdatePanel1'], [], [], 90);
//]]>
</script>

<div id="AjaxHolder_UpdatePanel1">
	    
    <a name="pagedcomment"></a>
<h3>Feedback</h3>
	
			<div class="post">
				<div class="posthead">
					<h2>
						<a title="permalink: re: JavaMail发送邮件" href="/Even/archive/2007/05/26/120135.html#125868">#</a>&nbsp;<a name="125868"></a>re: JavaMail发送邮件&nbsp;&nbsp;<a onclick="return SetReplyAuhor(&quot;PLACE&quot;)" href="/Even/archive/2007/05/26/120135.html#post">回复</a>&nbsp;&nbsp;<a title="查看该作者发表过的评论" href="http://www.blogjava.net/comment?author=PLACE" target="_blank">更多评论</a>
						<a id="AjaxHolder_Comments_CommentList_ctl00_DeleteLink" href="javascript:__doPostBack('AjaxHolder$Comments$CommentList$ctl00$DeleteLink','')"></a>&nbsp;&nbsp;<a id="AjaxHolder_Comments_CommentList_ctl00_EditLink"></a>
					</h2>
					2007-06-22 16:13 by <a id="AjaxHolder_Comments_CommentList_ctl00_NameLink" href="http://www.place.net.cn" target="_blank">PLACE</a>
				</div>
				<div class="postbody">渠道网（低价注册公司）专业从事注册香港公司、海外公司注册、深圳公司注册、注册商标、注册国际书刊号及提供注册公司后企业运作的配套服务，公司注册成立后是企业运作的开始，渠道网并提供：项目融资、项目投资、企业形象资金、公司注册验资及全国打款、国际框架组建、品牌概念合作、品牌加盟、投资移民、技术移民、海外形象代言人、海外股东信托、代理记帐报税、企业营销咨询、企业合理避税、品牌规划、香港上市、新加坡上市、美国上市公关、GOOGLE左侧排名、网站建设、网站推广、企业无抵押无担保融资等系列配套服务。并提供快速消费渠道信息，实现渠道信息共享！如何注册公司请立即咨询：罗鸿汇先生13510141316 </div>
			</div>
		
			<div class="post">
				<div class="posthead">
					<h2>
						<a title="permalink: re: JavaMail发送邮件" href="/Even/archive/2007/05/26/120135.html#156938">#</a>&nbsp;<a name="156938"></a>re: JavaMail发送邮件<a name="Post"></a>&nbsp;&nbsp;<a onclick="return SetReplyAuhor(&quot;mashiguang&quot;)" href="/Even/archive/2007/05/26/120135.html#post">回复</a>&nbsp;&nbsp;<a title="查看该作者发表过的评论" href="http://www.blogjava.net/comment?author=mashiguang" target="_blank">更多评论</a>
						<a id="AjaxHolder_Comments_CommentList_ctl01_DeleteLink" href="javascript:__doPostBack('AjaxHolder$Comments$CommentList$ctl01$DeleteLink','')"></a>&nbsp;&nbsp;<a id="AjaxHolder_Comments_CommentList_ctl01_EditLink"></a>
					</h2>
					2007-10-30 14:53 by <a id="AjaxHolder_Comments_CommentList_ctl01_NameLink" href="http://www.blogjava.net/mashiguang/" target="_blank">mashiguang</a>
				</div>
				<div class="postbody">&quot;(10) javax.activation.DataHandler类(包含在JAF中) <br>JavaMail API不限制信息只为文本,任何形式的信息都可能作茧自缚MimeMessage的一部分.除了文本信息,作为文件附件包含在电子邮件信息的一部分是很普遍的.JavaMail API通过......&quot;<br><br>&quot;作茧自缚&quot;这个词是这样用的吗?</div>
			</div>
		
<style>
td { font-size: 12px }
.commentTextBox 
{ 
    font-family : Verdana; 
    font-size: 13px;
 }
</style>
<!--Beging Temp Save-->
<STYLE>.userData { BEHAVIOR: url(#default#userdata) }
	</STYLE>
<DIV class="userData" id="CommentsPersistDiv"></DIV>

<script type="text/javascript">
function pageLoad()
{
    Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(handleInitializeRequest);
    //Sys.WebForms.PageRequestManager.getInstance().add_endRequest(handleEndRequest);
}

function handleInitializeRequest(sender, args)
{
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    var eid = args.get_postBackElement().id;
    if (eid.indexOf("DeleteLink")>0) 
    {
       args.get_postBackElement().innerHTML = "<font color='red'>正在删除...</font>";         
    }    
    else if (eid.indexOf("btnSubmit")>0) 
    {
       document.getElementById("AjaxHolder_PostComment_ltSubmitMsg").innerHTML="正在提交...";
       document.getElementById("AjaxHolder_PostComment_btnSubmit").disabled = true;       
    }   
    else if(eid.indexOf("refreshList")>0)
    {
        document.getElementById("AjaxHolder_PostComment_refreshList").innerHTML="<font color='red'>正在刷新...</font>";
    }
   
}	

function TempSave(ElementID)
{
	try
	{
	CommentsPersistDiv.setAttribute("CommentContent",document.getElementById(ElementID).value);
	CommentsPersistDiv.save("CommentXMLStore");
	}
	catch(ex)
	{
	}
	
}
function Restore(ElementID)
{
	CommentsPersistDiv.load("CommentXMLStore");
	document.getElementById(ElementID).value=CommentsPersistDiv.getAttribute("CommentContent");
}	
			
			
</script>
<!--Ene TempSave-->
<div id="divRefreshComments" style="text-align:right;margin-right:10px;margin-bottom:5px;font-size:12px"><a href="http://news.cnblogs.com/">IT新闻</a>&nbsp;&nbsp;<a href="/RequireRegister.aspx">新用户注册</a>&nbsp;&nbsp;<a id="AjaxHolder_PostComment_refreshList" href="javascript:__doPostBack('AjaxHolder$PostComment$refreshList','')">刷新评论列表</a>&nbsp;&nbsp;</div>
<div class="commentform">
<span id="AjaxHolder_PostComment_ltSubmitMsg" style="color:Red;"></span>
<br />
<a name="Feedback"></a>
	<TABLE cellSpacing="1" cellPadding="1" border="0">
		<TR>
			<TD colSpan="3" height="5">
<script type="text/javascript" src="http://partner.googleadservices.com/gampad/google_service.js">
</script>
<script type="text/javascript">
  GS_googleAddAdSenseService("ca-pub-4210569241504288");
  GS_googleEnableAllServices();
</script>
<script type="text/javascript">
  GA_googleAddSlot("ca-pub-4210569241504288", "blogjava_commentbox_up");
</script>
<script type="text/javascript">
  GA_googleFetchAds();
</script>
<script type="text/javascript">
  GA_googleFillSlot("blogjava_commentbox_up");
</script>
<br/></TD>
		</TR>
		<TR>
			<TD width="75"></TD>
			<TD></TD>
			<TD></TD>
		</TR>
		<TR>
			<TD width="55">标题</TD>
			<TD><input name="AjaxHolder$PostComment$tbTitle" type="text" value="re: JavaMail发送邮件" id="AjaxHolder_PostComment_tbTitle" class="commenttb" style="width:320" /></TD>
			<TD><span id="AjaxHolder_PostComment_RequiredFieldValidator1" style="color:Red;visibility:hidden;">请输入标题</span></TD>
		</TR>
		<TR>
			<TD>姓名</TD>
			<TD><input name="AjaxHolder$PostComment$tbName" type="text" id="AjaxHolder_PostComment_tbName" class="commenttb" style="width:320" /></TD>
			<TD><span id="AjaxHolder_PostComment_RequiredFieldValidator2" style="color:Red;visibility:hidden;">请输入你的姓名</span></TD>
		</TR>
		<TR>
			<TD>主页</TD>
			<TD><input name="AjaxHolder$PostComment$tbUrl" type="text" id="AjaxHolder_PostComment_tbUrl" class="commenttb" style="width:320" /></TD>
			<TD><FONT face="宋体"></FONT></TD>
		</TR>
		<tr>
			<td align="left" colSpan="3">
				<table id="AjaxHolder_PostComment_tbCaptchaImage" class="CommentForm" cellspacing="0" cellpadding="0" border="0">
		<tr>
			<td colspan="3">
							<span id="AjaxHolder_PostComment_Requiredfieldvalidator4" style="color:Red;display:none;">请输入验证码</span>
							<span id="AjaxHolder_PostComment_lblImage" style="color:Red;font-weight:bold;"></span>
						</td>
		</tr>
		<tr>
			<td width="78">验证码</td>
			<td><input name="AjaxHolder$PostComment$CodeNumberTextBox" type="text" id="AjaxHolder_PostComment_CodeNumberTextBox" />*&nbsp;&nbsp;<img src="http://www.blogjava.net/Modules/CaptchaImage/JpegImage.aspx?cacheid=20090526150541"/></td>
			<td align="left"></td>
		</tr>
	</table>
	
			</td>
		</tr>
		<TR>
			<TD colSpan="3">内容(请不要发表任何与政治相关的内容)
				<span id="AjaxHolder_PostComment_RequiredFieldValidator3" style="color:Red;visibility:hidden;">请输入评论内容</span><BR>
				<textarea name="AjaxHolder$PostComment$tbComment" rows="10" cols="50" id="AjaxHolder_PostComment_tbComment" class="commentTextBox" onkeydown="ctlent(event,'AjaxHolder_PostComment_tbComment')" style="Width:480;Height:220"></textarea></TD>
		</TR>
		<TR>
			<TD colSpan="3">
		<span id="AjaxHolder_PostComment_Message" style="color:Red;"></span>
		</td>
		<TR>
			<TD colSpan="3"><input id="AjaxHolder_PostComment_chkRemember" type="checkbox" name="AjaxHolder$PostComment$chkRemember" checked="checked" tabindex="-1" /><label for="AjaxHolder_PostComment_chkRemember">Remember Me?</label></TD>
		</TR>
		<TR>
			<TD height="23"><input type="submit" name="AjaxHolder$PostComment$btnSubmit" value="提交" onclick="TempSave('AjaxHolder_PostComment_tbComment');WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;AjaxHolder$PostComment$btnSubmit&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="AjaxHolder_PostComment_btnSubmit" class="commentButton" />
				</TD>
			<td colSpan="2" height="23">&nbsp;
				<a id="AjaxHolder_PostComment_lnkLogin" href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/Even/archive/2007/05/26/120135.html&amp;SourceURL=/Even/archive/2007/05/26/120135.html">登录</a>&nbsp;&nbsp;<a id="AjaxHolder_PostComment_linkLoginComment" OnClick="if(document.getElementById('AjaxHolder_PostComment_tbComment').value != '') return confirm('未提交的评论内容将会丢失, 你真的要进入高级评论吗?');" href="http://www.blogjava.net/Even/archive/2007/05/26/120135.html?login=1#Post">使用高级评论</a>&nbsp;&nbsp;<a href="http://www.blogjava.net/RequireRegister.aspx">新用户注册</a>&nbsp;&nbsp;<A href="#Top">返回页首</A>&nbsp;&nbsp;<a id="AjaxHolder_PostComment_lbRestore" OnClick="Restore('AjaxHolder_PostComment_tbComment'); return false;" href="/Even/archive/2007/05/26/120135.html#Post">恢复上次提交</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</td>
		</TR>
		<TR>
			<TD colSpan="3"><label class="CtrlEnter">[使用Ctrl+Enter键可以直接提交]</label></TD>
		</TR>
		<TR>
			<TD colSpan="3"></TD>
		</TR>
		<TR>
			<TD colSpan="3" height="5">
			<a href="http://www.cnblogs.com/cmt/archive/2009/05/21/1486347.html" target="_blank"><img src="http://images.cnblogs.com/ad/nanti_468.gif" style="border:0px"/></a><br/><br/>
			<script type="text/javascript" src="http://a4.yeshj.com/page/148/" ></script>
			<script type="text/JavaScript">show_a4_zone("S1");</script><br/>
			<script type="text/JavaScript">show_a4_zone("Z1");</script></TD>
		</TR>
		<TR>
			<TD colSpan="3" height="5"></TD>
		</TR>
		<TR>
			<TD colSpan="3">
			<a href="http://dotnet.cnblogs.com/">.NET频道</a>&nbsp;&nbsp;<a href="http://space.cnblogs.com/">博客园社区</a>&nbsp;&nbsp;<a href="http://space.cnblogs.com/ing/">闪存</a>
			<br/>
			</TD>
		</TR>
		<TR>
			<TD colSpan="3"></TD>
		</TR>
		<TR>
			<TD colSpan="3" height="5"></TD>
		</TR>
	
		<TR>
			<TD colSpan="3"></TD>
		</TR>	

		<TR>
			<TD colSpan="3" height="5">网站导航:<div id="blogsite">
			<a href="http://www.cnblogs.com">博客园</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="http://www.blogjava.net">BlogJava</a>&nbsp;&nbsp;
			<a href="http://www.cnweblog.com">博客生活</a>&nbsp;&nbsp;
			<a href="http://www.cnitblog.com">IT博客网</a>&nbsp;&nbsp;
			<a href="http://www.cppblog.com">C++博客</a>&nbsp;&nbsp;
			<a href="http://www.phpweblog.net">PHP博客</a>&nbsp;&nbsp;
			<a href="http://space.cnblogs.com">博客园社区</a>
			<br/>
			<a href="http://www.manageblog.net">管理博客</a>&nbsp;&nbsp;
			<a href="http://www.teachblog.net">教师博客</a>&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="http://www.astroblog.cn/">天文博客</a>&nbsp;&nbsp;
			<a href="http://www.cnautoblog.com/">汽车博客</a>&nbsp;&nbsp;
			<a href="http://www.zuqiublog.com/">足球博客</a>&nbsp;&nbsp;
			<a href="http://www.gupiaoblog.com/">股票博客</a>&nbsp;&nbsp;
			<a href="http://www.etronblog.com/">电子博客</a>&nbsp;&nbsp;<a href="/Even/archive/2007/05/26/120135.html?opt=admin">管理</a>
			</div></TD>
		</TR>
		<TR>
			<TD colSpan="3">
				
<br/>
<br/>
<iframe marginheight="0" marginwidth="0" frameborder="0" width="468" height="0" scrolling="no" src="/ad.htm" style="border:0px solid #666" allowTransparency="true"></iframe>
<br/>


</TD>
		</TR>		
	</TABLE>	
</div>
<div id="AjaxHolder_PostComment_ValidationSummary1" style="color:Red;display:none;">

	</div>

</div>

				</div>
	<!-- Right SideBar -->
	<div id="rightsidebar">
			<DIV id="nav-supp">			
				
				
<h3>常用链接</h3>
<ul>
		<li><a id="BlogCustomControl1_repeaterLinks_ctl01_lnkLinkItem" href="http://www.blogjava.net/Even/MyPosts.html">我的随笔</a></li>
	
		<li><a id="BlogCustomControl1_repeaterLinks_ctl02_lnkLinkItem" href="http://www.blogjava.net/Even/MyComments.html">我的评论</a></li>
	
		<li><a id="BlogCustomControl1_repeaterLinks_ctl03_lnkLinkItem" href="http://www.blogjava.net/Even/OtherPosts.html">我的参与</a></li>
	
		<li><a id="BlogCustomControl1_repeaterLinks_ctl04_lnkLinkItem" href="http://www.blogjava.net/Even/RecentComments.html">最新评论</a></li>
	</ul>
				

				
				                
				
<h3>评论排行榜</h3>
<div class="RecentComment">
	
			<ul style="word-break:break-all;width:100%">
		
			<li>
				<a id="TopFeedbackPosts1_TopList_ctl01_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/05/26/120137.html">1. Java RMI的简单例子(3)</a>
			</li>
		
			<li>
				<a id="TopFeedbackPosts1_TopList_ctl02_Hyperlink1" href="http://www.blogjava.net/Even/archive/2006/08/26/65957.html">2. Spring 一些连接数据库的方法(3)</a>
			</li>
		
			<li>
				<a id="TopFeedbackPosts1_TopList_ctl03_Hyperlink1" href="http://www.blogjava.net/Even/archive/2006/08/26/65916.html">3. 关于一些Linux SVN的安装使用(2)</a>
			</li>
		
			<li>
				<a id="TopFeedbackPosts1_TopList_ctl04_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/05/26/120135.html">4. JavaMail发送邮件(2)</a>
			</li>
		
			<li>
				<a id="TopFeedbackPosts1_TopList_ctl05_Hyperlink1" href="http://www.blogjava.net/Even/archive/2006/08/31/66805.html">5. SSH居然存在安全漏洞！！！还发生在我的身上，RedHat你还很狠！(1)</a>
			</li>
		
			</ul>
		
</div>

				
<h3>阅读排行榜</h3>
<div class="RecentComment">
	
			<ul style="word-break:break-all;width:100%">
		
			<li>
				<a id="TopViewPosts1_TopList_ctl01_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/05/26/120137.html">1. Java RMI的简单例子(7407)</a>
			</li>
		
			<li>
				<a id="TopViewPosts1_TopList_ctl02_Hyperlink1" href="http://www.blogjava.net/Even/archive/2006/08/26/65916.html">2. 关于一些Linux SVN的安装使用(6848)</a>
			</li>
		
			<li>
				<a id="TopViewPosts1_TopList_ctl03_Hyperlink1" href="http://www.blogjava.net/Even/archive/2006/08/26/65957.html">3. Spring 一些连接数据库的方法(646)</a>
			</li>
		
			<li>
				<a id="TopViewPosts1_TopList_ctl04_Hyperlink1" href="http://www.blogjava.net/Even/archive/2007/05/26/120135.html">4. JavaMail发送邮件(563)</a>
			</li>
		
			<li>
				<a id="TopViewPosts1_TopList_ctl05_Hyperlink1" href="http://www.blogjava.net/Even/archive/2006/10/16/75375.html">5. 一些安装apche+php+tomcat＋mysql心得(560)</a>
			</li>
		
			</ul>
		
</div>
</DIV>
		</div>
	<!-- Footer -->
<div id="info-site">
	<p id="info-company">
posts - 27, comments - 12, trackbacks - 0, articles - 1</p>
	<p id="info-standards">Copyright &copy E.ven</p>
</div>
</div>

    
<script type="text/javascript">
//<![CDATA[
var Page_ValidationSummaries =  new Array(document.getElementById("AjaxHolder_PostComment_ValidationSummary1"));
var Page_Validators =  new Array(document.getElementById("AjaxHolder_PostComment_RequiredFieldValidator1"), document.getElementById("AjaxHolder_PostComment_RequiredFieldValidator2"), document.getElementById("AjaxHolder_PostComment_Requiredfieldvalidator4"), document.getElementById("AjaxHolder_PostComment_RequiredFieldValidator3"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
var AjaxHolder_PostComment_RequiredFieldValidator1 = document.all ? document.all["AjaxHolder_PostComment_RequiredFieldValidator1"] : document.getElementById("AjaxHolder_PostComment_RequiredFieldValidator1");
AjaxHolder_PostComment_RequiredFieldValidator1.controltovalidate = "AjaxHolder_PostComment_tbTitle";
AjaxHolder_PostComment_RequiredFieldValidator1.errormessage = "请输入标题";
AjaxHolder_PostComment_RequiredFieldValidator1.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
AjaxHolder_PostComment_RequiredFieldValidator1.initialvalue = "";
var AjaxHolder_PostComment_RequiredFieldValidator2 = document.all ? document.all["AjaxHolder_PostComment_RequiredFieldValidator2"] : document.getElementById("AjaxHolder_PostComment_RequiredFieldValidator2");
AjaxHolder_PostComment_RequiredFieldValidator2.controltovalidate = "AjaxHolder_PostComment_tbName";
AjaxHolder_PostComment_RequiredFieldValidator2.errormessage = "请输入你的姓名";
AjaxHolder_PostComment_RequiredFieldValidator2.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
AjaxHolder_PostComment_RequiredFieldValidator2.initialvalue = "";
var AjaxHolder_PostComment_Requiredfieldvalidator4 = document.all ? document.all["AjaxHolder_PostComment_Requiredfieldvalidator4"] : document.getElementById("AjaxHolder_PostComment_Requiredfieldvalidator4");
AjaxHolder_PostComment_Requiredfieldvalidator4.controltovalidate = "AjaxHolder_PostComment_CodeNumberTextBox";
AjaxHolder_PostComment_Requiredfieldvalidator4.errormessage = "请输入验证码";
AjaxHolder_PostComment_Requiredfieldvalidator4.display = "Dynamic";
AjaxHolder_PostComment_Requiredfieldvalidator4.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
AjaxHolder_PostComment_Requiredfieldvalidator4.initialvalue = "";
var AjaxHolder_PostComment_RequiredFieldValidator3 = document.all ? document.all["AjaxHolder_PostComment_RequiredFieldValidator3"] : document.getElementById("AjaxHolder_PostComment_RequiredFieldValidator3");
AjaxHolder_PostComment_RequiredFieldValidator3.controltovalidate = "AjaxHolder_PostComment_tbComment";
AjaxHolder_PostComment_RequiredFieldValidator3.errormessage = "请输入评论内容";
AjaxHolder_PostComment_RequiredFieldValidator3.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
AjaxHolder_PostComment_RequiredFieldValidator3.initialvalue = "";
var AjaxHolder_PostComment_ValidationSummary1 = document.all ? document.all["AjaxHolder_PostComment_ValidationSummary1"] : document.getElementById("AjaxHolder_PostComment_ValidationSummary1");
AjaxHolder_PostComment_ValidationSummary1.showmessagebox = "True";
AjaxHolder_PostComment_ValidationSummary1.showsummary = "False";
//]]>
</script>


<script type="text/javascript">
//<![CDATA[

var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
        
document.getElementById('AjaxHolder_PostComment_ValidationSummary1').dispose = function() {
    Array.remove(Page_ValidationSummaries, document.getElementById('AjaxHolder_PostComment_ValidationSummary1'));
}
Sys.Application.initialize();

document.getElementById('AjaxHolder_PostComment_RequiredFieldValidator1').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('AjaxHolder_PostComment_RequiredFieldValidator1'));
}

document.getElementById('AjaxHolder_PostComment_RequiredFieldValidator2').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('AjaxHolder_PostComment_RequiredFieldValidator2'));
}

document.getElementById('AjaxHolder_PostComment_Requiredfieldvalidator4').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('AjaxHolder_PostComment_Requiredfieldvalidator4'));
}

document.getElementById('AjaxHolder_PostComment_RequiredFieldValidator3').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('AjaxHolder_PostComment_RequiredFieldValidator3'));
}
//]]>
</script>
</form>
    <script type="text/javascript" src="/script/ShowHidden.js"></script>
	<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	try {
	var pageTracker = _gat._getTracker("UA-476124-3");
	pageTracker._trackPageview();
	} catch(err) {}</script>
</body>
</html>
