<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn"><head><meta content="JSP技术,应用/其它" name="keywords" /><meta content="定制自己的xDoclet标签." name="description" /><meta http-equiv="Content-Type" content="text/html; charset=gb2312" /><meta http-equiv="Content-Language" content="zh-cn" /><title>定制自己的xDoclet标签 - 应用/其它</title><meta name="author" content="Host01.com | 教程网" /><link rel="stylesheet" href="/css/news.css" type="text/css" /></head><body><div id="showflash"><script src=/js/newsjs/66.js></script></div><div id="divheader"><div id="divlogo"><img height="60" src="/TempletsImages/hnol_net/hui.gif" width="117" /></div><div id="topad"><script type="text/javascript" src="/JS/AdsJS/1.js"></script></div></div><div id="toplogin"><div id="userlogin"><script type="text/javascript" src="/JS/newsjs/userlogin.js"></script></div><div id="baidusearch"><!-- SiteSearch Google --><table><form method=get action="http://www.google.com/search"><tr><td><a href="http://www.google.com/"><img src="http://www.google.com/logos/Logo_40wht.gif" border="0" alt="Google" width="60" height="30"></a></td><td><input type=text name=q size=12 maxlength=255 value=""><input type=hidden name=ie value=GB2312><input type=hidden name=oe value=GB2312><input type=hidden name=hl value=zh-CN><input type=submit name=btnG value="Google"><font size=-1><input type=hidden name=domains value="host01.com"><input type=hidden name=sitesearch value="host01.com"></font></td></tr></form></table><!-- SiteSearch Google --></div></div><center><SCRIPT type="text/javascript" src="/JS/FreeJs/Index_Top_JS.js"></SCRIPT></center><div id="divnav"><div id="navmenu"><div><script type="text/javascript" src="/JS/newsjs/topmenu.js"></script></div></div><div id="navstat"><div class="stat1"><script type="text/javascript" src="/JS/newsjs/date.js"></script></div><div class="stat2">栏目：183 | 文章：74232 | 会员：3557 | 总阅：4524816 | 新加：694</div><div class="stat3"><script type="text/javascript" src="/JS/newsjs/smalltitle.js"></script></div></div></div><div id="divbody"><div id="divleft"><div id="leftsearch"><script type="text/javascript" src="/JS/newsjs/search.js"></script></div><div id="leftclass">&nbsp;JSP技术相关</div><div id="leftlist"><script type="text/javascript" src="/getAllClass.Asp?ClassID=0541715104347680"></script></div><div id="leftclass">&nbsp;相关文章</div><div id="leftlist"><div class="listpane2"><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215512400.htm" title="兔八哥笔记1：java初学者笔记（1）"><img src="/Files/dot.gif" border=0 />兔八哥笔记1：java初学者笔</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215505186.htm" title="testprovision.java"><img src="/Files/dot.gif" border=0 />testprovision.java</a><br /><a class="listB" href="http://www.host01.com/article/website/00080006/0542014483550315.htm" title="JavaScript实例 连续滚动的制作"><img src="/Files/dot.gif" border=0 />JavaScript实例&nbsp;连续滚动的</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215458782.htm" title="结合验证在struts中减少Action和ActionForm的数量（1）"><img src="/Files/dot.gif" border=0 />结合验证在struts中减少Act</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215501756.htm" title="eclipse3.0.1汉化方法（1）"><img src="/Files/dot.gif" border=0 />eclipse3.0.1汉化方法（1）</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215512900.htm" title="[隆重介绍]Gemini:.NET project issue tracking..."><img src="/Files/dot.gif" border=0 />[隆重介绍]Gemini:.NET&nbsp;pro</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215453561.htm" title="MAGICIAN IS CASTOR （Castor JDO，Castor XML，魔术）"><img src="/Files/dot.gif" border=0 />MAGICIAN&nbsp;IS&nbsp;CASTOR&nbsp;（Cast</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215504498.htm" title="IBM Java Jvm GC实现内幕（2）"><img src="/Files/dot.gif" border=0 />IBM&nbsp;Java&nbsp;Jvm&nbsp;GC实现内幕（</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215509905.htm" title="配置JBoss 4 JDBC连接JDBC"><img src="/Files/dot.gif" border=0 />配置JBoss&nbsp;4&nbsp;JDBC连接JDBC</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/057211144689526.htm" title="IIS+TomCat，请收入精华，这是我的亲身经历！精华区的另外一篇和原版TomCat IIS HowTo有出入！"><img src="/Files/dot.gif" border=0 />IIS+TomCat，请收入精华，这</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215450213.htm" title="关于unsaved-value"><img src="/Files/dot.gif" border=0 />关于unsaved-value</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215450138.htm" title="JBuilder 4 Enterprise 开发CORBA/WEB应用实例"><img src="/Files/dot.gif" border=0 />JBuilder&nbsp;4&nbsp;Enterprise&nbsp;开发</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215509122.htm" title="AOP分离权限关注 - 补遗"><img src="/Files/dot.gif" border=0 />AOP分离权限关注&nbsp;-&nbsp;补遗</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215456404.htm" title="网友与我关于一些GUI编程问题的对话实录"><img src="/Files/dot.gif" border=0 />网友与我关于一些GUI编程问</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/057211132939007.htm" title="限制访问页面"><img src="/Files/dot.gif" border=0 />限制访问页面</a><br /><a class="listB" href="http://www.host01.com/article/website/00080006/0542014485061037.htm" title="JavaScript 实例--在表单中设置和检查Cookies"><img src="/Files/dot.gif" border=0 />JavaScript&nbsp;实例--在表单中</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215504914.htm" title="WebWork中实现IoC(4)"><img src="/Files/dot.gif" border=0 />WebWork中实现IoC(4)</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215510232.htm" title="Java Developer"s Journal 2003 Readers" Choice Awards提名（6）（2）"><img src="/Files/dot.gif" border=0 />Java&nbsp;Developer&quot;s&nbsp;Journal&nbsp;</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040007/20060805215441432.htm" title="菜鸟初学Java的备忘录（五）"><img src="/Files/dot.gif" border=0 />菜鸟初学Java的备忘录（五）</a><br /><a class="listB" href="http://www.host01.com/article/website/00080006/0542014492227012.htm" title="VBScript 函数集"><img src="/Files/dot.gif" border=0 />VBScript&nbsp;函数集</a><br /></div></div></div><div id="divhtml"><div id="htmlnav"> [<a href="/article/index.html">分类导航</a>] <a  class="Tops" href="http://www.host01.com/index.htm"><font color=red>首页</font></a>&gt;&gt;<a  class="Tops" href="http://www.host01.com/article/jsp/index.htm" >JSP技术</a>&gt;&gt;<a  class="Tops" href="http://www.host01.com/article/jsp/00040007/index.htm" >应用/其它</a>&gt;&gt;内容</div><div class="top"><div id="htmltop"><img src="/TempletsImages/line1.gif" width="539" height="13" /></div><div id="htmldetail"><div id="arttitle"><h4>定制自己的xDoclet标签</h4></div><div id="artdate"><img src="/TempletsImages/hnol_net/chang3.gif" width="580" height="1" /><br />&nbsp;<FONT color=#808080>日期：2006-8-5 19:37:00</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Host01.Com]&nbsp;&nbsp; 访问：<FONT color=#c0c0c0><script src=http://www.host01.com/Click.asp?NewsID=068521550037251></script></FONT> 　　　　[<a href="/Print.Html?72578" target=_blank><b>全屏查看全文</b></a>]</div><div id="artcontent"><div id="googlead"></div><P style="FONT-WEIGHT: bolder; COLOR: #525252" align=center>定制自己的xDoclet标签</P><P><FONT size=2>xDoclet是一种通过读取JAVA源文件中的特定标签，然后生成指定文件的工具。xDoclet标签本身已经提供了一些常用的标签，例如@ejb，@hibernate，@web等等，但是仍然不能满足我们的需求。 </FONT></P><P><FONT size=2>例如我们最新的项目中引用了一个Javascript验证框架，通过配置特定的xml配置文件，即可完成客户端表单验证，但是不想开发人员再去学习一套框架，于是想让开发人员在源代码中写@javascript这样的标签，然后生成其配置文件。 </FONT></P><P><FONT size=2>Javascript客户端验证一直是web开发中一个比较头疼的问题，经常是每一个页面中充斥着许多类似甚至相同的验证代码，如何统一有效的管理这些代码，以及如何做到代码页面的分离一直没有太好的解决方法。 运用这个验证框架那么客户端开发就变成了配置validation-config.xml这个文件如此轻松了，本文并不打算详细讲述如何使用JSValidation框架，有兴趣的朋友可以去</FONT><A href="http://www.cosoft.org.cn/projects/jsvalidation"><FONT size=2>http://www.cosoft.org.cn/projects/jsvalidation</FONT></A><FONT size=2> JSValidation的官方网站自己去学习。 </FONT></P><P><FONT size=2>虽然运用这框架已经可以很好的完成客户端验证代码的编写，并且提供了dtd文件进行xml文件的，但是手动编写xml文件还是很容易出错，效率比较低，而且新的开发人员还要掌握一个全新的框架，不宜于开发人员入门。 </FONT></P><P><FONT size=2>像Struts或JSF这样的框架大都需要为表单写一个类似FormBean的东西，以JSF为例，假如表单内有一文本框，那么对应的Page类或叫FormBean类就应有如下代码：</FONT></P><P><SPAN lang=EN-US><FONT face=黑体 size=2>private HtmlInputText txtUsername = new HtmlInputText();</FONT></SPAN></P><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>/**</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>* @return 用户名</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>*/</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>public HtmlInputText getTxtUsername ()</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>{</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>return txtUsername;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>}</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>/**</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * @param text</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> */</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>public void setTxtTeaName(HtmlInputText text)</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>{</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>txtTeaName = text;</FONT></FONT></SPAN></PRE><P><FONT size=2>如果可以利用xDoclet，那么，就可以自动生成JSValidation的配置文件了，而且还利于培训新的开发人员，再加入ant task还可以形成每日构建。想象的代码应该是下面这个样子：</FONT></P><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>/**</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * @javascript.field</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * name="frmZBAddGlobalPage:txtTeaName"</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * display-name="用户名"</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * </FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>* @javascript.depend</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * name="required"</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> *</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * @return用户名</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> */</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> public HtmlInputText getTxtUsername()</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> {</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>return txtUsername;</FONT></FONT></SPAN></PRE><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"><FONT size=2>}</FONT></SPAN></P><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"></SPAN><FONT size=2>通过分析xDoclet自带的一些标签包，发现只需要提供三个文件即可实现自定义xDoclet标签：一个继承于XmlSubTask的类，一个继承于DocletTask的类（用于ant），一个xdt的模板语言文件即可。 </FONT></P><P><FONT size=2>在XmlSubTask类中，首先，定义模板文件名：</FONT></P><P><FONT size=2>private static String DEFAULT_TEMPLATE_FILE ="resources/validation-config.xdt"; </FONT></P><P><FONT size=2>定义dtd文件名：</FONT></P><P><FONT size=2>private final static String DTD_FILE_NAME_20 ="resources/validation-config.dtd"; </FONT></P><P><FONT size=2>定义要生成的配置文件名：</FONT></P><P><FONT size=2>private static String GENERATED_FILE_NAME = "validation-config.xml"; </FONT></P><P><FONT size=2>然后只需将三个文件组合起来既可，详细代码如下： </FONT></P><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>public JavascriptSubTask()</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>setTemplateURL(getClass().getResource(DEFAULT_TEMPLATE_FILE));</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>setDestinationFile(GENERATED_FILE_NAME);</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;</SPAN>public void execute() throws XDocletException</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>setDtdURL(getClass().getResource(DTD_FILE_NAME_20));</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>startProcess();</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2>&nbsp;<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>protected void engineStarted() throws XDocletException</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>System.out.println(</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>Translator.getString(</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;</SPAN>XDocletMessages.class,</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>XDocletMessages.GENERATING_SOMETHING,</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>new String[] { getDestinationFile()}));</FONT></FONT></SPAN></PRE><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</FONT></SPAN></P><P><FONT size=2>要想ant可以使用，只需要以下简单的代码：</FONT></P><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>/*</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * 创建日期 2004-4-26</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> */</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>package paradise.xdoclet.modules.javascript;</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2><o:p></o:p></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>import xdoclet.DocletTask;</FONT></SPAN></PRE><PRE><FONT size=2><SPAN lang=EN-US><FONT face=黑体>&nbsp;</FONT></SPAN><SPAN lang=EN-US><FONT face=黑体>/**</FONT></SPAN></FONT></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> * @author 清风</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2> */</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>public class JavascriptDocletTask extends DocletTask</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>{</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>public JavascriptDocletTask()</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>{</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>addSubTask(new JavascriptSubTask());</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>}</FONT></FONT></SPAN></PRE><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"><FONT size=2>}</FONT></SPAN></P><P><FONT size=2>在ant中按如下方式定义：</FONT></P><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"><FONT size=2>&lt;target name="javascript" depends="jxdoc_init" </FONT></SPAN></P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>description="Generate javascript validation-config"&gt;</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;javascriptdoclet destdir="${jsp}/javascript"&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;fileset dir="${src}"&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>&lt;include name="**/zaibian/*.java"/&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;/fileset&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;/javascriptdoclet&gt;</FONT></FONT></SPAN></PRE><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"><FONT size=2>&lt;/target&gt;</FONT></SPAN></SPAN></P><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"></SPAN><FONT size=2>接下来，也是最核心的部分，就是有关xdt模板语言，xdt文件可以说是自定义xDoclet标签的最重要的文件之一，以JavaScriptxDoclet为例，简单介绍一下xdt模板语言： </FONT></P><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>&lt;XDtClass:forAllClasses&gt;<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>遍历所有含有标签的类（在ant中指定）</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>&lt;XDtMethod:forAllMethods&gt;<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>遍历当前类的所有方法</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>&lt;XDtMethod:ifHasMethodTag tagName="javascript.form"&gt;<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>如果遍历到的方法中含有指定的标签</FONT></SPAN></PRE><P><FONT size=2><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA">&lt;XDtMethod:forAllMethodTags tagName="javascript.depend"&gt;<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN></SPAN><SPAN style="FONT-SIZE: 10.5pt; FONT-FAMILY: 宋体; mso-ascii-font-family: "Times New Roman"; mso-hansi-font-family: "Times New Roman"; mso-font-kerning: 1.0pt; mso-bidi-font-family: "Times New Roman"; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA">遍历当前方法的所有标签</SPAN></FONT></P><P><SPAN style="FONT-SIZE: 10.5pt; FONT-FAMILY: 宋体; mso-ascii-font-family: "Times New Roman"; mso-hansi-font-family: "Times New Roman"; mso-font-kerning: 1.0pt; mso-bidi-font-family: "Times New Roman"; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"></SPAN><FONT size=2>更多的模板语言，参考xDoclet的.XDT文档，都是很好理解的模板语言。 接下来，开始自定义自己的标签，新建一个xtags.xml文件，加上开头 </FONT></P><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2><o:p></o:p></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>&lt;!DOCTYPE xdoclet PUBLIC "-//XDoclet Team//DTD XDoclet Tags 1.1//EN" </FONT></SPAN></PRE><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"><FONT size=2>"http://xdoclet.sourceforge.net/dtds/xtags_1_1.dtd"&gt;</FONT></SPAN></P><P><SPAN lang=EN-US style="FONT-SIZE: 10.5pt; FONT-FAMILY: "Times New Roman"; mso-font-kerning: 1.0pt; mso-fareast-font-family: 宋体; mso-fareast-language: ZH-CN; mso-bidi-font-size: 12.0pt; mso-ansi-language: EN-US; mso-bidi-language: AR-SA"></SPAN><FONT size=2>然后写下所有自定义的标签，例如：</FONT></P><P><SPAN lang=EN-US><FONT face=黑体 size=2>&lt;xdoclet&gt;</FONT></SPAN></P><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>&lt;namespace&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;name&gt;javascript&lt;/name&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;</SPAN>&lt;tags&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><PRE><SPAN lang=EN-US><FONT face=黑体 size=2>&lt;tag&gt;</FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;level&gt;method&lt;/level&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;name&gt;javascript.form&lt;/name&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;usage-description&gt;Form&lt;/usage-description&gt;</FONT></FONT></SPAN></PRE><PRE><SPAN lang=EN-US><FONT face=黑体><FONT size=2><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><div align="right">本文章共<font color=red>2</font>页,当前在第<font color=red>1</font>页&nbsp;&nbsp;<font color="red">1</font>&nbsp;&nbsp;<a href="/article/jsp/00040007/20060805215500915_2.htm">2</a>&nbsp;&nbsp;</div></p></div><div id="nextprev"><span style="display:none" id=lastshow><script type="text/javascript" src="/js/host01_300X300.js"></script></span><script>document.getElementById("googlead").innerHTML=document.getElementById("lastshow").innerHTML;</script>上一篇：<a href="http://www.host01.com/article/jsp/00040007/20060805215500748.htm"><u>TIJ3, tons of toys (2)</u></a>　　下一篇：<a href="http://www.host01.com/article/jsp/00040007/20060805215500561.htm"><u>Myeclipse3.8 is not absolutely support eclipse3.0MX</u></a></div><div id="usercomm"><script src=http://www.host01.com/ReviewContent.asp?NewsID=068521550037251></script></div><div id="userreview"><script src="/js/newsjs/commjs.asp?NewsID=068521550037251"></script></div></div></div></div></div><script type="text/javascript" src="/js/newsjs/footer.js"></script><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">_uacct = "UA-746700-5";urchinTracker();</script><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">_uacct = "UA-746700-5";urchinTracker();</script></body></html>                                                                                                                                                                                                                                                                                                                                                                                                                                                              