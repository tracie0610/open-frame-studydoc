<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn"><head><meta content="编程开发,Java" name="keywords" /><meta content="Webwork对checkbox复选框Action的处理." name="description" /><meta http-equiv="Content-Type" content="text/html; charset=gb2312" /><meta http-equiv="Content-Language" content="zh-cn" /><title>Webwork对checkbox复选框Action的处理 - Java</title><meta name="author" content="Host01.com | 教程网" /><link rel="stylesheet" href="/css/news.css" type="text/css" /></head><body><div id="showflash"><script src=/js/newsjs/66.js></script></div><div id="divheader"><div id="divlogo"><img height="60" src="/TempletsImages/hnol_net/hui.gif" width="117" /></div><div id="topad"><script type="text/javascript" src="/JS/AdsJS/1.js"></script></div></div><div id="toplogin"><div id="userlogin"><script type="text/javascript" src="/JS/newsjs/userlogin.js"></script></div><div id="baidusearch"><!-- SiteSearch Google --><table><form method=get action="http://www.google.com/search"><tr><td><a href="http://www.google.com/"><img src="http://www.google.com/logos/Logo_40wht.gif" border="0" alt="Google" width="60" height="30"></a></td><td><input type=text name=q size=12 maxlength=255 value=""><input type=hidden name=ie value=GB2312><input type=hidden name=oe value=GB2312><input type=hidden name=hl value=zh-CN><input type=submit name=btnG value="Google"><font size=-1><input type=hidden name=domains value="host01.com"><input type=hidden name=sitesearch value="host01.com"></font></td></tr></form></table><!-- SiteSearch Google --></div></div><center><SCRIPT type="text/javascript" src="/JS/FreeJs/Index_Top_JS.js"></SCRIPT></center><div id="divnav"><div id="navmenu"><div><script type="text/javascript" src="/JS/newsjs/topmenu.js"></script></div></div><div id="navstat"><div class="stat1"><script type="text/javascript" src="/JS/newsjs/date.js"></script></div><div class="stat2">栏目：206 | 文章：99945 | 会员：3714 | 总阅：5191473 | 新加：6864</div><div class="stat3"><script type="text/javascript" src="/JS/newsjs/smalltitle.js"></script></div></div></div><div id="divbody"><div id="divleft"><div id="leftsearch"><script type="text/javascript" src="/JS/newsjs/search.js"></script></div><div id="leftclass">&nbsp;编程开发相关</div><div id="leftlist"><script type="text/javascript" src="/getAllClass.Asp?ClassID=0683015143165986"></script></div><div id="leftclass">&nbsp;相关文章</div><div id="leftlist"><div class="listpane2"><a class="listB" href="http://www.host01.com/article/software/java/20060919085419161.htm" title="EJB3.0开发指南:消息驱动Bean"><img src="/Files/dot.gif" border=0 />EJB3.0开发指南:消息驱动Be</a><br /><a class="listB" href="http://www.host01.com/article/software/java/200609190854194.htm" title="EJB3.0开发指南:依赖注入"><img src="/Files/dot.gif" border=0 />EJB3.0开发指南:依赖注入</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040003/0542422194734912.htm" title="JSP由浅入深(5)―― Scriptlets和HTML的混合"><img src="/Files/dot.gif" border=0 />JSP由浅入深(5)――&nbsp;Script</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060918193737758.htm" title="利用Eclipse开发Hibernate应用程序"><img src="/Files/dot.gif" border=0 />利用Eclipse开发Hibernate应</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085553706.htm" title="keystore和证书签名的管理工具"><img src="/Files/dot.gif" border=0 />keystore和证书签名的管理工</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085727259.htm" title="慢慢地告别“无聊的编程”"><img src="/Files/dot.gif" border=0 />慢慢地告别“无聊的编程”</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085641932.htm" title="好困惑：Eclipse下安装Tomcat插件问题多多"><img src="/Files/dot.gif" border=0 />好困惑：Eclipse下安装Tomc</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085429665.htm" title="在Weblogic上配置Hibernate为JNDI (转)"><img src="/Files/dot.gif" border=0 />在Weblogic上配置Hibernate</a><br /><a class="listB" href="http://www.host01.com/article/website/00080004/2006091220335098.htm" title="javascript gb2312转utf-8"><img src="/Files/dot.gif" border=0 />javascript&nbsp;gb2312转utf-8</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085417368.htm" title="如何成为一名JAVA初级程序员"><img src="/Files/dot.gif" border=0 />如何成为一名JAVA初级程序员</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085256675.htm" title="初探关键字volatile"><img src="/Files/dot.gif" border=0 />初探关键字volatile</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085422703.htm" title="实战JBOSSDD教你写第一个EJB---1"><img src="/Files/dot.gif" border=0 />实战JBOSSDD教你写第一个</a><br /><a class="listB" href="http://www.host01.com/article/jsp/00040003/0542422194744216.htm" title="JSP迅速入门"><img src="/Files/dot.gif" border=0 />JSP迅速入门</a><br /><a class="listB" href="http://www.host01.com/article/software/java/2006091819374226.htm" title="深入Struts 1.1"><img src="/Files/dot.gif" border=0 />深入Struts&nbsp;1.1</a><br /><a class="listB" href="http://www.host01.com/article/exam/01300008/0542111362394714.htm" title="Java语言的12大特色介绍"><img src="/Files/dot.gif" border=0 />Java语言的12大特色介绍</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060919085434502.htm" title="kodojdo指南(前两章)"><img src="/Files/dot.gif" border=0 />kodojdo指南(前两章)</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060918193739386.htm" title="一个ＤＩＶ样式测试用例"><img src="/Files/dot.gif" border=0 />一个ＤＩＶ样式测试用例</a><br /><a class="listB" href="http://www.host01.com/article/website/00080004/0542014505489439.htm" title="VBScript 运算符"><img src="/Files/dot.gif" border=0 />VBScript&nbsp;运算符</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060918193750261.htm" title="Java Thread Programming 1.1 - Introduction to Threads"><img src="/Files/dot.gif" border=0 />Java&nbsp;Thread&nbsp;Programming&nbsp;1</a><br /><a class="listB" href="http://www.host01.com/article/software/java/20060918193805199.htm" title="Struts vs webwork 比较"><img src="/Files/dot.gif" border=0 />Struts&nbsp;vs&nbsp;webwork&nbsp;比较</a><br /></div></div></div><div id="divhtml"><div id="htmlnav"> [<a href="/article/index.html">分类导航</a>] <a  class="Tops" href="http://www.host01.com/index.htm"><font color=red>首页</font></a>&gt;&gt;<a  class="Tops" href="http://www.host01.com/article/software/index.htm" >编程开发</a>&gt;&gt;<a  class="Tops" href="http://www.host01.com/article/software/java/index.htm" >Java</a>&gt;&gt;内容</div><div class="top"><div id="htmltop"><img src="/TempletsImages/line1.gif" width="539" height="13" /></div><div id="htmldetail"><div id="arttitle"><h4>Webwork对checkbox复选框Action的处理</h4></div><div id="artdate"><img src="/TempletsImages/hnol_net/chang3.gif" width="580" height="1" /><br />&nbsp;<FONT color=#808080>日期：2006-9-18 21:57:00</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Host01.Com]&nbsp;&nbsp; 访问：<FONT color=#c0c0c0><script src=http://www.host01.com/Click.asp?NewsID=0691908542247703></script></FONT> 　　　　[<a href="/Print.Html?97528" target=_blank><b>全屏查看全文</b></a>]</div><div id="artcontent" class="7615"><div id="googlead" class="7615"></div><P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webwork对页面诸如像checkbox这种表单元素的处理，我们如果只是简单的用来设置字段的布尔值，就像下面的处理方式，如：<BR>&lt;input type="checkbox" name="user.lockedOut" value="true"/&gt;如果用户选中这复选框，浏览器在查询串中将会送出"user.lockedOut=true"，此时OGNL执行了action.getUser().setLockedOut(true)。如果用户不选中复选框，浏览器将不会送出查询串，因此，在开始，应确保已经初始化lockedOut 为false：<BR>private boolean m_lockedOut = false;<BR>public void setLockedOut(boolean lockedOut) { m_lockedOut = lockedOut; }</P><P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 但更多情况下，我们是把它当做复选（多项选择）来用，这有两种情况用checkbox来设置集合：<BR><STRONG>一.checkbox name相同</STRONG><BR>在一个String 类型的Set 集合里面存放许多权限，用checkbox的HTML如下：<BR>&lt;input type="checkbox" name="user.priv" value="boss"/&gt;<BR>&lt;input type="checkbox" name="user.priv" value="admin"/&gt;<BR>&lt;input type="checkbox" name="user.priv" value="manager"/&gt;<BR>比方说，一个用户选中前面的两项，浏览器将会送出这查询串： user.priv=boss&amp;user.priv=admin。<BR>OGNL将会处理查询串：action.getUser().setPriv(String[] {"boss", "admin"})。<BR>Action里面的方法将会是这样：<BR>Set m_privileges = new HashSet();</P><P>&nbsp;&nbsp;&nbsp; public void setPriv(String[] privs) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; privs.length; i++) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m_privileges.add(privs[i]);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR><STRONG>二.checkbox name不同<BR></STRONG>有三种处理方式：<BR><STRONG>I.</STRONG><BR>&nbsp;&lt;input type="checkbox" name="xlist[0].id" value="444"&gt;<BR>&nbsp;&lt;input type="checkbox" name="xlist[1].id" value="443"&gt;<BR>&nbsp;&lt;input type="checkbox" name="xlist[2].id" value="442"&gt;<BR>&nbsp;* Action中用List集合来处理：private List xlist = new XWorkList(User.class)<BR>&nbsp;&nbsp;&nbsp; public List getXlist(){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return xlist;<BR>&nbsp;&nbsp;&nbsp; }<BR><STRONG>II.</STRONG>&nbsp;<BR>&nbsp;&lt;input type="checkbox" name="xmap[''''0''''].id" value="444"&gt;<BR>&nbsp;&lt;input type="checkbox" name="xmap[''''1''''].id" value="443"&gt;<BR>&nbsp;&lt;input type="checkbox" name="xmap[''''2''''].id" value="442"&gt;<BR>&nbsp; * Action中用Map集合来处理：private Map xmap = new XWorkMap(User.class)<BR>&nbsp;&nbsp;&nbsp; public List getXmap(){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return xmap;<BR>&nbsp;&nbsp;&nbsp; }<BR><STRONG>&nbsp;III.</STRONG><BR>&nbsp;&lt;input type="checkbox" name="xarray[0]." value="444"&gt;<BR>&nbsp;&lt;input type="checkbox" name="xarray[1]" value="443"&gt;<BR>&nbsp;&lt;input type="checkbox" name="xarray[2]" value="442"&gt;<BR>&nbsp; *Action中用Object[]数组来处理（注意数组的长度必须事先确定，不可以动态改动数组的大小）：<BR>&nbsp;&nbsp;&nbsp;&nbsp; private Object[] xarray = new Object[3]<BR>&nbsp;&nbsp;&nbsp;&nbsp; public Object[] getXarray(){ <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return xarray; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </P><P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下面用一个稍为复杂一点的例子来加深对List集合处理方式的理解，其它处理方式都是异曲同工。<BR><FONT color=#ff0000>multiSelect.jsp文件</FONT><BR>&lt;<A href="mailto:%@page">%@page</A> pageEncoding="gb2312" contentType="text/html;charset=gb2312"%&gt;<BR>&lt;<A href="mailto:%@taglib">%@taglib</A> prefix="ww" uri="webwork" %&gt;<BR>&lt;html&gt;<BR>&nbsp;&nbsp; &lt;body&gt;<BR>&nbsp;&nbsp; &lt;form name="multi" method="post" action="multiSelect.action"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;%int i = 0; %&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ww:iterator value="ulist"&gt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;% <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String cName = "xlist["+i+"].id";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; %&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" name="&lt;%=cName%&gt;" value="&lt;ww:property value="id"/&gt;"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ww:property value="username"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ww:iterator&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="hidden" name="actionEvent" value="viewSelect"&gt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="submit" value="选择"&gt; <BR>&nbsp;&nbsp; &lt;/form&gt;<BR>&nbsp;&nbsp; &lt;/body&gt;<BR>&lt;/html&gt;</P><P><FONT color=#ff0000>multiSelect_result.jsp</FONT>文件<BR>&lt;<A href="mailto:%@page">%@page</A> pageEncoding="gb2312" contentType="text/html;charset=gb2312"%&gt;<BR>&lt;<A href="mailto:%@taglib">%@taglib</A> prefix="ww" uri="webwork" %&gt;<BR>&lt;html&gt;<BR>&nbsp;&nbsp; &lt;body&gt;你的选择是：&lt;br&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ww:iterator value="xlist"&gt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ww:property value="id"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ww:iterator&gt;<BR>&nbsp;&nbsp; &lt;/body&gt;<BR>&lt;/html&gt;</P><P><FONT color=#ff0000>MultiSelectAction.java</FONT>文件</P><P>package com.wzj.rbac.webwork.action;<BR>import java.util.List;<BR>import com.opensymphony.xwork.Action;<BR>import com.opensymphony.xwork.util.XWorkList;<BR>import com.wzj.framework.spring.resource.BeanLocator;<BR>import com.wzj.rbac.ServiceFacade.UserService;<BR>import com.wzj.rbac.domain.object.User;<BR>/**<BR>&nbsp;* @desc 复选框 选择提交Action类<BR>&nbsp;* @author chikai&lt;br&gt;<BR>&nbsp;* @link &lt;a href="<A href=''''mailto:wzj616@etang.com">chikai</a''''>mailto:wzj616@etang.com"&gt;chikai&lt;/a</A>&gt;<BR>&nbsp;* @version $ MultiSelectAction.java&nbsp; 2004-12-5 19:11:54 $ <BR>&nbsp;* @version $ Project xwork<BR>&nbsp;*/<BR>public class MultiSelectAction implements Action {</P><P>&nbsp;&nbsp;&nbsp; private final static String PRE_SUCCESS = "pre_success";<BR>&nbsp;&nbsp;&nbsp; //用户列表<BR>&nbsp;&nbsp;&nbsp; private List ulist;<BR>&nbsp;&nbsp;&nbsp; //选择的用户<BR>&nbsp;&nbsp;&nbsp; private List xlist = new XWorkList(User.class);<BR>&nbsp;&nbsp;&nbsp; private UserService uService;<BR>&nbsp;&nbsp;&nbsp; //页面执行动作判断<BR>&nbsp;&nbsp;&nbsp; private String actionEvent;<BR>&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp; public String execute() throws Exception {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(actionEvent!=null&amp;&amp;actionEvent.equals("viewSelect"))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int s=0;s&lt;xlist.size();s++){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(((User)xlist.get(s)).getId()==null){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xlist.remove(s);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return SUCCESS;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //获取用户业务服务<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uService = BeanLocator.getGlobalServiceLocator().getUserService();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ulist = uService.getAllUser();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return PRE_SUCCESS;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public List getUlist(){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ulist;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public List getXlist(){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return xlist;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public void setActionEvent(String ae){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; actionEvent = ae;<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P><P><BR><FONT color=#ff0000>xwork.xml</FONT>文件：</P><P>&lt;!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.0//EN" "<A href="http://www.opensymphony.com/xwork/xwork-1.0.dtd">http://www.opensymphony.com/xwork/xwork-1.0.dtd<p><div align="right">本文章共<font color=red>2</font>页,当前在第<font color=red>1</font>页&nbsp;&nbsp;<a href="/article/software/java/20060919085422774.htm">[1]</a>&nbsp;&nbsp;<a href="/article/software/java/20060919085422774_2.htm">[2]</a>&nbsp;&nbsp;</div></p></div><div id="nextprev"><span style="display:none" id=lastshow><script type="text/javascript" src="/js/host01_300X300.js"></script></span><script>document.getElementById("googlead").innerHTML=document.getElementById("lastshow").innerHTML;</script>上一篇：<a href="http://www.host01.com/article/software/java/20060919085422759.htm"><u>用Java编写通过代理访问的应用程序</u></a>　　下一篇：<a href="http://www.host01.com/article/software/java/20060919085422259.htm"><u>Eclipse简介和插件开发</u></a></div><div id="usercomm"><script src=http://www.host01.com/ReviewContent.asp?NewsID=0691908542247703></script></div><div id="userreview"><script src="/js/newsjs/commjs.asp?NewsID=0691908542247703"></script></div></div></div></div></div><script type="text/javascript" src="/js/newsjs/footer.js"></script><script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">_uacct = "UA-746700-5";urchinTracker();</script></body></html>