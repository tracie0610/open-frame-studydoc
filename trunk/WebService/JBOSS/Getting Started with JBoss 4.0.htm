
<!-- saved from url=(0233)http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ -->
<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META name="CreationDate" content="D:20060719112617+08&#39;00&#39;"><META name="Creator" content="Acrobat PDFMaker 7.0 for Word"><META name="Producer" content="Acrobat Distiller 7.0.5 (Windows)"><META name="ModDate" content="D:20060719112815+08&#39;00&#39;"><META name="Company" content="http://www.open-v.com"><META name="SourceModified" content="D:20060719032454"><TITLE>Getting Started with JBoss 4.0 </TITLE></HEAD><BODY bgcolor="#ffffff" vlink="blue" link="blue"><DIV style="margin:-1px -1px 0;padding:0;border:1px solid #999;background:#fff"><DIV style="margin:12px;padding:8px;border:1px solid #999;background:#ddd;font:13px arial,sans-serif;color:#000;font-weight:normal;text-align:left">这是 <A href="http://www.open-v.com/pdf/jbossgs4x.pdf" style="text-decoration:underline;color:#00c">http://www.open-v.com/pdf/jbossgs4x.pdf</A> 的 HTML 档。<BR> <B><FONT color="#0039b6">G</FONT> <FONT color="#c41200">o</FONT> <FONT color="#f3c518">o</FONT> <FONT color="#0039b6">g</FONT> <FONT color="#30a72f">l</FONT> <FONT color="#c41200">e</FONT></B> 在网路漫游时会自动将档案转换成 HTML 网页来储存。</DIV></DIV><DIV style="position:relative">











<TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="1"><B>Page 1</B></A></FONT></TD></TR></TBODY></TABLE><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:286;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="5" face="Times"><SPAN style="font-size:36px;font-family:Times">
<DIV style="position:absolute;top:549;left:209"><NOBR>Getting Started with JBoss 4.0 </NOBR></DIV>
</SPAN></FONT>
<FONT size="5" face="Times"><SPAN style="font-size:31px;font-family:Times">
<DIV style="position:absolute;top:644;left:383"><NOBR>Release 5 </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:18px;font-family:Times">
<DIV style="position:absolute;top:742;left:345"><NOBR>&copy;2004-2006 JBoss, Inc. </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:778;left:311"><NOBR>[罗时飞，于 2006 年 07 月 19 日修改稿] </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:18px;font-family:Times">
<DIV style="position:absolute;top:808;left:177"><NOBR>翻译说明： </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:846;left:243"><NOBR>全文由罗时飞翻译完成。无论在企业中，还是在开发者社群中，还是在 Open </NOBR></DIV>
<DIV style="position:absolute;top:872;left:243"><NOBR>Source 社群中，JBoss 应用服务器在国内外的使用已经很广泛。其中，JBoss</NOBR></DIV>
<DIV style="position:absolute;top:895;left:243"><NOBR>3.2.x 系列已经大量部署在国内外现实场景中。JBoss 4.0.x 已经通过 J2EE 1.4</NOBR></DIV>
<DIV style="position:absolute;top:916;left:243"><NOBR>认证，而且其基代码也是来自于 JBoss 3.2.x，这些都使得 JBoss 应用服务器</NOBR></DIV>
<DIV style="position:absolute;top:939;left:243"><NOBR>更具企业强度。JBoss 5.x 即将推出，这是 JBoss 3.x 之后架构变化最大的服</NOBR></DIV>
<DIV style="position:absolute;top:963;left:243"><NOBR>务器版本（基于 POJO 微内核，兼容于 Java EE 5）。</NOBR></DIV>
<DIV style="position:absolute;top:1012;left:230"><NOBR>[罗时飞，独立Java  EE顾问，《JBoss  Administration  and  Development》(Third</NOBR></DIV>
<DIV style="position:absolute;top:1036;left:230"><NOBR>Edition, 3.2.x Series)中文版（《JBoss管理与开发核心技术（第三版）》）译者，</NOBR></DIV>
<DIV style="position:absolute;top:1056;left:230"><NOBR>该书已经由电子工业出版社 2004 年 11 月出版发行。注意，开发者可以通过如</NOBR></DIV>
<DIV style="position:absolute;top:1080;left:229"><NOBR>下网站联系到他：<FONT color="#0000ff" face="Times"><A href="http://www.open-v.com/">http://www.open-v.com </A></FONT>] </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:18px;font-family:Times">
<DIV style="position:absolute;top:1112;left:177"><NOBR>版权声明： </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:1150;left:230"><NOBR>本翻译文档的版权属于 RedHat JBoss, Inc. 所有。本人仅保留中文署名权，其</NOBR></DIV>
<DIV style="position:absolute;top:1173;left:230"><NOBR>他一切权力罗时飞同意放弃。</NOBR></DIV>
<DIV style="position:absolute;top:1220;left:230"><NOBR>您可以自由链接、下载、传播此文档，或者放置在您的网站上。但前提是，必</NOBR></DIV>
<DIV style="position:absolute;top:1244;left:230"><NOBR>须保证完整转载全文，包括完整的版权信息、作译者声明。</NOBR></DIV>
<DIV style="position:absolute;top:1290;left:230"><NOBR>如果翻译中存在不妥或错误之处，希望来信告知！</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:1319;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:1317;left:576"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:1335;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:1317;left:754"><NOBR>i</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:1438;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="2"><B>Page 2</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:1549;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:2582;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:2580;left:576"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:2598;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:2580;left:750"><NOBR>ii</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:18px;font-family:Times">
<DIV style="position:absolute;top:1580;left:177"><NOBR>修改日志： </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:1620;left:261"><NOBR>2004.10.5，提交翻译稿。</NOBR></DIV>
<DIV style="position:absolute;top:1644;left:261"><NOBR>2004.11.5，针对社区反馈意见，添加了书签，以便于阅读。</NOBR></DIV>
<DIV style="position:absolute;top:1667;left:261"><NOBR>2004.12.1，因英文版的更新（Release 2）而更新中文版。比如，内置了 JSTL、</NOBR></DIV>
<DIV style="position:absolute;top:1688;left:261"><NOBR>新增 Hibernate 一章、修改 MySQL 4.1.17/Oracle 10g JDBC <B style="color:black;background-color:#a0ffff">配置</B>等内容。</NOBR></DIV>
<DIV style="position:absolute;top:1714;left:261"><NOBR>2005.1.21，修正几个小错误。</NOBR></DIV>
<DIV style="position:absolute;top:1737;left:261"><NOBR>2005.3.5，同步英文版的更新（Release 3）。如果存在错误，一切以英文版</NOBR></DIV>
<DIV style="position:absolute;top:1758;left:261"><NOBR>为准。</NOBR></DIV>
<DIV style="position:absolute;top:1784;left:261"><NOBR>2005.6.2，同步英文版的更新（Release 4）。如果存在错误，一切以英文版</NOBR></DIV>
<DIV style="position:absolute;top:1805;left:261"><NOBR>为准。</NOBR></DIV>
<DIV style="position:absolute;top:1831;left:261"><NOBR>2006.7.19，同步英文版的更新（Release 5）。如果存在错误，一切以英文</NOBR></DIV>
<DIV style="position:absolute;top:1851;left:261"><NOBR>版为准</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:2701;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="3"><B>Page 3</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:2812;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:3845;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:3843;left:576"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:3861;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:3843;left:753"><NOBR>I</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:20px;font-family:Times">
<DIV style="position:absolute;top:2842;left:413"><NOBR>目　录</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:2895;left:151"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">序</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">..........................................................................................................................................................1</A></I></NOBR></DIV>
<DIV style="position:absolute;top:2933;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">目标读者</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">......................................................................................................................................1</A></NOBR></DIV>
<DIV style="position:absolute;top:2968;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">本书内容</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#7">......................................................................................................................................1</A></NOBR></DIV>
<DIV style="position:absolute;top:3009;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">1 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">章　入门</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">........................................................................................................................................2</A></I></NOBR></DIV>
<DIV style="position:absolute;top:3048;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">1.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">下载和安装</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">JBoss .....................................................................................................................2</A></NOBR></DIV>
<DIV style="position:absolute;top:3083;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">1.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">启动服务器</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#8">...............................................................................................................................2</A></NOBR></DIV>
<DIV style="position:absolute;top:3118;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#9">1.3 JMX</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#9">控制台</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#9">................................................................................................................................3</A></NOBR></DIV>
<DIV style="position:absolute;top:3153;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">1.4  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">停止服务器</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">...............................................................................................................................4</A></NOBR></DIV>
<DIV style="position:absolute;top:3188;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">1.5  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">运行为</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">Windows</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">服务</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">................................................................................................................4</A></NOBR></DIV>
<DIV style="position:absolute;top:3229;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">2 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">章 </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">JBoss</A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">服务器</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">--</A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">快速上手</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">........................................................................................................5</A></I></NOBR></DIV>
<DIV style="position:absolute;top:3267;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">2.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">服务器结构</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">...............................................................................................................................5</A></NOBR></DIV>
<DIV style="position:absolute;top:3302;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">2.1.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">主目录 </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#11">...............................................................................................................................5</A></NOBR></DIV>
<DIV style="position:absolute;top:3337;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#12">2.1.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#12">服务器<B style="color:black;background-color:#a0ffff">配置</B></A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#12">........................................................................................................................6</A></NOBR></DIV>
<DIV style="position:absolute;top:3373;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">2.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">基本安装问题</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">...........................................................................................................................8</A></NOBR></DIV>
<DIV style="position:absolute;top:3408;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">2.2.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">核心服务</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">............................................................................................................................8</A></NOBR></DIV>
<DIV style="position:absolute;top:3443;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">2.2.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">日志服务</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#14">............................................................................................................................8</A></NOBR></DIV>
<DIV style="position:absolute;top:3478;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#15">2.2.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#15">安全性服务</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#15">........................................................................................................................9</A></NOBR></DIV>
<DIV style="position:absolute;top:3513;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#17">2.2.4  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#17">其他服务</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#17">..........................................................................................................................11</A></NOBR></DIV>
<DIV style="position:absolute;top:3548;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#19">2.3 Web</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#19">容器</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#19">&mdash;Tomcat...................................................................................................................13</A></NOBR></DIV>
<DIV style="position:absolute;top:3589;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">3 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">章　关于实例应用</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">......................................................................................................................14</A></I></NOBR></DIV>
<DIV style="position:absolute;top:3627;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">3.1 J2EE Tutorial............................................................................................................................14</A></NOBR></DIV>
<DIV style="position:absolute;top:3662;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">3.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">区别</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">.........................................................................................................................................14</A></NOBR></DIV>
<DIV style="position:absolute;top:3697;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">3.2.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">容器相关部署描述符</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">......................................................................................................14</A></NOBR></DIV>
<DIV style="position:absolute;top:3733;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">3.2.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">数据库变更</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#20">......................................................................................................................14</A></NOBR></DIV>
<DIV style="position:absolute;top:3768;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#21">3.2.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#21">安全性<B style="color:black;background-color:#a0ffff">配置</B></A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#21">......................................................................................................................15</A></NOBR></DIV>
<DIV style="position:absolute;top:3803;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#21">3.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#21">企业应用中的</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#21">J2EE ................................................................................................................15</A></NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:3964;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="4"><B>Page 4</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:4075;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:5108;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:5106;left:576"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:5124;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:5106;left:749"><NOBR>II</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:4102;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">4 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">章 </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">Duke</A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">银行应用 </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">.....................................................................................................................16</A></I></NOBR></DIV>
<DIV style="position:absolute;top:4141;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">4.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">构建应用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">.................................................................................................................................16</A></NOBR></DIV>
<DIV style="position:absolute;top:4176;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">4.1.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">准备<B style="color:black;background-color:#ff66ff">文件</B></A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">..........................................................................................................................16</A></NOBR></DIV>
<DIV style="position:absolute;top:4211;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">4.1.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">编译</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">Java</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">源<B style="color:black;background-color:#ff66ff">文件</B></A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#22">...............................................................................................................16</A></NOBR></DIV>
<DIV style="position:absolute;top:4246;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">4.1.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">打包</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">EJB...........................................................................................................................17</A></NOBR></DIV>
<DIV style="position:absolute;top:4281;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">4.1.4  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">打包</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">WAR</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23"><B style="color:black;background-color:#ff66ff">文件</B></A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">.................................................................................................................17</A></NOBR></DIV>
<DIV style="position:absolute;top:4316;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">4.1.5  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">打包</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">Java</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">客户 </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">..................................................................................................................17</A></NOBR></DIV>
<DIV style="position:absolute;top:4351;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">4.1.6  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">集成</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#23">EAR..........................................................................................................................17</A></NOBR></DIV>
<DIV style="position:absolute;top:4386;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">4.1.7  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">数据库 </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">.............................................................................................................................18</A></NOBR></DIV>
<DIV style="position:absolute;top:4421;left:198"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">4.1.7.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">启用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">HSQL MBean</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">和</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">TCP/IP</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">连接</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#24">............................................................................18</A></NOBR></DIV>
<DIV style="position:absolute;top:4456;left:198"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#25">4.1.7.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#25">创建数据库模式 </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#25">......................................................................................................19</A></NOBR></DIV>
<DIV style="position:absolute;top:4492;left:198"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#25">4.1.7.3 HSQL</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#25">数据库管理工具</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#25">.............................................................................................19</A></NOBR></DIV>
<DIV style="position:absolute;top:4527;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#26">4.1.8  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#26">部署应用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#26">..........................................................................................................................20</A></NOBR></DIV>
<DIV style="position:absolute;top:4562;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">4.2 JNDI</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">和</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">Java</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">客户</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">......................................................................................................................22</A></NOBR></DIV>
<DIV style="position:absolute;top:4597;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">4.2.1 jndi.properties</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28"><B style="color:black;background-color:#ff66ff">文件</B> </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">...........................................................................................................22</A></NOBR></DIV>
<DIV style="position:absolute;top:4632;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">4.2.2 JMX</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">控制台中的应用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">JNDI</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">信息</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#28">......................................................................................22</A></NOBR></DIV>
<DIV style="position:absolute;top:4667;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#30">4.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#30">安全性</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#30">.....................................................................................................................................24</A></NOBR></DIV>
<DIV style="position:absolute;top:4702;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#31">4.3.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#31"><B style="color:black;background-color:#a0ffff">配置</B>安全性域</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#31">..................................................................................................................25</A></NOBR></DIV>
<DIV style="position:absolute;top:4737;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#32">4.3.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#32">使用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#32">RDBMS</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#32">实现安全性</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#32">................................................................................................26</A></NOBR></DIV>
<DIV style="position:absolute;top:4772;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#34">4.3.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#34">使用密码散列</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#34">..................................................................................................................27</A></NOBR></DIV>
<DIV style="position:absolute;top:4813;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">5 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">章 </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">J2EE</A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">之</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">Web</A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">服务</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">...................................................................................................................29</A></I></NOBR></DIV>
<DIV style="position:absolute;top:4852;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">5.1 JBoss</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">中的</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">Web</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">服务</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">.................................................................................................................29</A></NOBR></DIV>
<DIV style="position:absolute;top:4887;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">5.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">将</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">Duke</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">银行运行为</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">Web</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">服务</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#35">.................................................................................................29</A></NOBR></DIV>
<DIV style="position:absolute;top:4922;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#37">5.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#37">运行</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#37">Web</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#37">服务客户</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#37">..................................................................................................................31</A></NOBR></DIV>
<DIV style="position:absolute;top:4957;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#38">5.4  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#38">监控</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#38">Web</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#38">服务请求</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#38">..................................................................................................................32</A></NOBR></DIV>
<DIV style="position:absolute;top:4998;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">6 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">章 </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">JMS</A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">和消息驱动</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">Bean...........................................................................................................34</A></I></NOBR></DIV>
<DIV style="position:absolute;top:5036;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">6.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">构建实例</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">.................................................................................................................................34</A></NOBR></DIV>
<DIV style="position:absolute;top:5071;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">6.1.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">编译并打包</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">MDB</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">和客户</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">.................................................................................................34</A></NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:5227;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="5"><B>Page 5</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:5338;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:6371;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:6369;left:576"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:6387;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:6369;left:744"><NOBR>III</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:5368;left:198"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">6.1.1.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">指定</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">MDB</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">监听的</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#40">Queue...........................................................................................34</A></NOBR></DIV>
<DIV style="position:absolute;top:5404;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#41">6.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#41">部署和运行实例</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#41">.....................................................................................................................35</A></NOBR></DIV>
<DIV style="position:absolute;top:5439;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#41">6.2.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#41">运行客户应用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#41">..................................................................................................................35</A></NOBR></DIV>
<DIV style="position:absolute;top:5474;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">6.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">管理</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">JMS</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">目的地 </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">.....................................................................................................................36</A></NOBR></DIV>
<DIV style="position:absolute;top:5509;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">6.3.1 jbossmq-destinations-service.xml</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42"><B style="color:black;background-color:#ff66ff">文件</B> </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">.............................................................................36</A></NOBR></DIV>
<DIV style="position:absolute;top:5544;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">6.3.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">从</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">JMX</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">控制台使用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">DestinationManager .........................................................................36</A></NOBR></DIV>
<DIV style="position:absolute;top:5579;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">6.3.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">管理目的地</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#42">......................................................................................................................36</A></NOBR></DIV>
<DIV style="position:absolute;top:5620;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#44"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#44">7 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#44">章　容器管理持久化</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#44">..................................................................................................................38</A></I></NOBR></DIV>
<DIV style="position:absolute;top:5658;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#44">7.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#44">构建实例</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#44">.................................................................................................................................38</A></NOBR></DIV>
<DIV style="position:absolute;top:5693;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#45">7.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#45">部署和运行实例</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#45">.....................................................................................................................39</A></NOBR></DIV>
<DIV style="position:absolute;top:5728;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#45">7.2.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#45">运行客户应用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#45">..................................................................................................................39</A></NOBR></DIV>
<DIV style="position:absolute;top:5764;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#46">7.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#46">自定义</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#46">CMP ............................................................................................................................40</A></NOBR></DIV>
<DIV style="position:absolute;top:5799;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#47">7.3.1 XDoclet.............................................................................................................................41</A></NOBR></DIV>
<DIV style="position:absolute;top:5839;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">8 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">章　使用其他数据库</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">..................................................................................................................43</A></I></NOBR></DIV>
<DIV style="position:absolute;top:5878;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">8.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49"><B style="color:black;background-color:#a0ffff">配置</B>数据源</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">.............................................................................................................................43</A></NOBR></DIV>
<DIV style="position:absolute;top:5913;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">8.1.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">包裹</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">JDBC</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">的资源适配器</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">................................................................................................43</A></NOBR></DIV>
<DIV style="position:absolute;top:5948;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">8.1.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">数据源<B style="color:black;background-color:#a0ffff">配置</B><B style="color:black;background-color:#ff66ff">文件</B></A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">..............................................................................................................43</A></NOBR></DIV>
<DIV style="position:absolute;top:5983;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">8.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">将</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">MySQL</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">作为默认数据源</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#49">....................................................................................................43</A></NOBR></DIV>
<DIV style="position:absolute;top:6018;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#50">8.2.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#50">创建数据库和用户</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#50">..........................................................................................................44</A></NOBR></DIV>
<DIV style="position:absolute;top:6053;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">8.2.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">安装</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">JDBC</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">驱动和部署数据源</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">........................................................................................45</A></NOBR></DIV>
<DIV style="position:absolute;top:6088;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">8.2.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">测试</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">MySQL</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">数据源</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#51">.........................................................................................................45</A></NOBR></DIV>
<DIV style="position:absolute;top:6124;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">8.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">设置</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">Oracle9i</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">的</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">XADataSource...............................................................................................46</A></NOBR></DIV>
<DIV style="position:absolute;top:6159;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">8.3.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">出于</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">Oracle</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">兼容性而设置</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">Pad</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">值</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#52">.....................................................................................46</A></NOBR></DIV>
<DIV style="position:absolute;top:6194;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#53">8.3.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#53">安装</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#53">JDBC</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#53">驱动和部署数据源</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#53">........................................................................................47</A></NOBR></DIV>
<DIV style="position:absolute;top:6229;left:182"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#54">8.3.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#54">测试</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#54">Oracle</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#54">数据源</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#54">...........................................................................................................48</A></NOBR></DIV>
<DIV style="position:absolute;top:6270;left:151"><NOBR>第<A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56"> </A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">9 </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">章　使用</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">Hibernate......................................................................................................................50</A></I></NOBR></DIV>
<DIV style="position:absolute;top:6308;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">9.1  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">创建</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">Hibernate</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">存档</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#56">.................................................................................................................50</A></NOBR></DIV>
<DIV style="position:absolute;top:6343;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#57">9.2  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#57">使用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#57">Hibernate</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#57">对象</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#57">.................................................................................................................51</A></NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:6490;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="6"><B>Page 6</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:6601;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:7634;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:7632;left:576"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:7650;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:7632;left:744"><NOBR>IV</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:6631;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#58">9.3  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#58">打包完整的应用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#58">.....................................................................................................................52</A></NOBR></DIV>
<DIV style="position:absolute;top:6667;left:167"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#59">9.4  </A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#59">部署、运行应用</A><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#59">.....................................................................................................................53</A></NOBR></DIV>
<DIV style="position:absolute;top:6707;left:151"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#60">附录</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#60">A  </A></I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#60">其他信息资料</A><I><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#60">........................................................................................................................54</A></I></NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:7753;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="7"><B>Page 7</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:7864;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:8897;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:8895;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:8913;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:8895;left:751"><NOBR>1</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:7913;left:147"><NOBR>序</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:7973;left:135"><NOBR>1  目标读者</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:8014;left:166"><NOBR>本书的目标就是，尽快使得用户能够将J2EE 1.4 应用部署并运行在JBoss 4.0.x上。在本</NOBR></DIV>
<DIV style="position:absolute;top:8038;left:135"><NOBR>书写作时，JBoss最新发布版为 4.0.4。因此，用户至少应该使用该版本，或者其后续版本。</NOBR></DIV>
<DIV style="position:absolute;top:8061;left:135"><NOBR>同时，本书使用了Sun提供的J2EE 1.4 Tutorial中（第 7 次更新）的实例（其具体网址位于，</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:13px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:8087;left:135"><NOBR><A href="http://java.sun.com/j2ee/1.4/docs/tutorial/doc">http://java.sun.com/j2ee/1.4/docs/tutorial/doc</A><FONT color="#000000" face="Times"><A href="http://java.sun.com/j2ee/1.4/docs/tutorial/doc"></A>），以阐述</FONT><FONT color="#000000" face="Times">JBoss</FONT><FONT color="#000000" face="Times">中</FONT><FONT color="#000000" face="Times">J2EE</FONT><FONT color="#000000" face="Times">应用的部署和配置。当然，</FONT></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:8108;left:135"><NOBR>本书并不是J2EE教程，但还是从最基本的层面介绍了J2EE中的各种主题，因此如果用户刚</NOBR></DIV>
<DIV style="position:absolute;top:8131;left:135"><NOBR>接触J2EE，则本书还是很有参考价值的。如果用户打算使用JBoss运行上述J2EE Tutorial，则</NOBR></DIV>
<DIV style="position:absolute;top:8155;left:135"><NOBR>恭喜您，本书就是为您准备的。用户最好能够同时阅读这两份教程。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:8200;left:135"><NOBR>2  本书内容</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:8241;left:166"><NOBR>第 1 章，将涉及 JBoss  4.0.x 应用服务器的下载、安装以及运行。然后，第 2 章大体上</NOBR></DIV>
<DIV style="position:absolute;top:8264;left:135"><NOBR>给出 JBoss 应用服务器的目录结构、主要配置文件以及服务。最后，第 3 章介绍了本书待使</NOBR></DIV>
<DIV style="position:absolute;top:8287;left:135"><NOBR>用的、J2EE Tutorial 中的代码。</NOBR></DIV>
<DIV style="position:absolute;top:8311;left:166"><NOBR>接下来，第 4 章将研究，Sun  J2EE  Tutorial 中 Duke 银行应用如何在 JBoss 上部署。这</NOBR></DIV>
<DIV style="position:absolute;top:8334;left:135"><NOBR>将能够使开发者很快进入角色，即熟悉 JBoss 中的简单配置和部署操作。第 5 章，研究 Web</NOBR></DIV>
<DIV style="position:absolute;top:8358;left:135"><NOBR>服务。本书将分两个步骤讨论。其一，如何将 Duke 银行应用中的 EJB 方法暴露为 Web 服</NOBR></DIV>
<DIV style="position:absolute;top:8381;left:135"><NOBR>务；其二，如何通过 Java 客户应用访问该 Web 服务。</NOBR></DIV>
<DIV style="position:absolute;top:8404;left:166"><NOBR>再然后，第 6、7 章分别给出了 JMS 和消息驱动 Bean、容器管理持久化的介绍。</NOBR></DIV>
<DIV style="position:absolute;top:8428;left:166"><NOBR>第 8 章，探讨数据库的配置。我们将一步一步教会开发者，如何配置、使用 MySQL 和</NOBR></DIV>
<DIV style="position:absolute;top:8454;left:135"><NOBR>Oracle 数据库。作为全书的结束，第 9 章将研究 Hibernate，即如何在 JBoss 中使用它。注意，</NOBR></DIV>
<DIV style="position:absolute;top:8475;left:135"><NOBR>在 Hibernate 实例中也使用了 J2EE Tutorial 中的代码。</NOBR></DIV>
<DIV style="position:absolute;top:8498;left:166"><NOBR>当然，本书只是对 JBoss 作了初步介绍，可谓是 JBoss 的冰山一角。一旦用户熟悉本书</NOBR></DIV>
<DIV style="position:absolute;top:8521;left:135"><NOBR>的内容后，您可以参阅《The JBoss 4 Application Server Guide》一书。它将带您深入掌握 JBoss</NOBR></DIV>
<DIV style="position:absolute;top:8545;left:135"><NOBR>应用服务器。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:9016;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="8"><B>Page 8</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:9127;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:10160;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:10158;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:10176;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:10158;left:751"><NOBR>2</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:9176;left:135"><NOBR>第 1 章　入门</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:9236;left:135"><NOBR>1.1  下载和安装 JBoss </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:9277;left:166"><NOBR>在下载和安装 JBoss 之前，请开发者确认一下自己的机器是否安装了最新版的 JVM。</NOBR></DIV>
<DIV style="position:absolute;top:9301;left:135"><NOBR>为运行 JBoss 4.0，开发者必须提供 Java 1.4 或 Java 5 虚拟机。原则上，我们推荐使用 Java 5</NOBR></DIV>
<DIV style="position:absolute;top:9324;left:135"><NOBR>虚拟机，因为它的运行性能非常卓越，而且能够同 EJB 3、Java EE 5 技术协同工作。单凭 JRE</NOBR></DIV>
<DIV style="position:absolute;top:9347;left:135"><NOBR>就可以将 JBoss 运行起来，但是如果需要编译、运行 J2EE  Tutorial 实例，则需要 JDK 的支</NOBR></DIV>
<DIV style="position:absolute;top:9371;left:135"><NOBR>持。在我们动身之前，请再次检查一下您是否安装了合适的 JDK，而且 JAVA_HOME 环境</NOBR></DIV>
<DIV style="position:absolute;top:9394;left:135"><NOBR>变量是否已经设置好。</NOBR></DIV>
<DIV style="position:absolute;top:9418;left:166"><NOBR>用户可以从JBoss网站（<A href="http://www.jboss.org/downloads/index"></A><FONT color="#0000ff" face="Times"><A href="http://www.jboss.org/downloads/index">http://www.jboss.org/downloads/index</A></FONT>）免费下载到JBoss应用服</NOBR></DIV>
<DIV style="position:absolute;top:9441;left:135"><NOBR>务器。我们同时提供了二进制发布版、源代码发布版以及Java Web Start发布版。如果您刚接</NOBR></DIV>
<DIV style="position:absolute;top:9464;left:135"><NOBR>触JBoss，则建议使用Java Web Start发布版，因为这将提升您的体验。</NOBR></DIV>
<DIV style="position:absolute;top:9488;left:166"><NOBR>其中，可用的二进制版本格式分别有.zip、.tar.gz 以及.bz2。JBoss 二进制发布版的具体</NOBR></DIV>
<DIV style="position:absolute;top:9511;left:135"><NOBR>内容与版本格式无关，用户需要根据各自的平台选择相应的二进制版本。在您下载完成 JBoss</NOBR></DIV>
<DIV style="position:absolute;top:9535;left:135"><NOBR>后，将它解压到合适的机器位置上。请务必将所有的内容解压到命名为 jboss-4.0.4 的单一目</NOBR></DIV>
<DIV style="position:absolute;top:9558;left:135"><NOBR>录中。但如果用户使用了 JBoss  4.0.4 后续版本，则版本号会有所不同。有一点请注意，包</NOBR></DIV>
<DIV style="position:absolute;top:9581;left:135"><NOBR>含解压目录的完整路径（比如，Windows 操作系统中的 Program Files 目录）上不能够含有</NOBR></DIV>
<DIV style="position:absolute;top:9605;left:135"><NOBR>空格，因为这将导致错误的出现。</NOBR></DIV>
<DIV style="position:absolute;top:9628;left:166"><NOBR>另外，我们还提供了可执行的.jar 版本。开发者从 JBoss  AS 下载页面能够浏览到 Web</NOBR></DIV>
<DIV style="position:absolute;top:9654;left:135"><NOBR>Installer 链接，通过它能够启动 Java Web Start 进程。随后，在安装过程中，开发者可以依据</NOBR></DIV>
<DIV style="position:absolute;top:9675;left:135"><NOBR>安装提示完成 JBoss 的安装。默认时，开发者应该会使用 default 配置集合。最后，请为 JMX</NOBR></DIV>
<DIV style="position:absolute;top:9698;left:135"><NOBR>安全性页面的 admin 账号设置一个密码。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:9743;left:135"><NOBR>1.2  启动服务器</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:9784;left:166"><NOBR>首先，来看看如何运行 JBoss 服务器。用户可以在 JBoss 主安装目录的 bin 目录中找到</NOBR></DIV>
<DIV style="position:absolute;top:9808;left:135"><NOBR>若干个脚本文件。请执行 run 脚本（对于 Windows，则运行 run.bat；对于 Linux、OS X、UNIX</NOBR></DIV>
<DIV style="position:absolute;top:9831;left:135"><NOBR>系统，则运行 run.sh）。其中，部署和启动 JBoss 组件的具体日志信息能够在运行 JBoss 的控</NOBR></DIV>
<DIV style="position:absolute;top:9855;left:135"><NOBR>制台浏览到。如下消息表明，JBoss 服务器成功运行（很明显，由于启动 JBoss 的时间和目</NOBR></DIV>
<DIV style="position:absolute;top:9878;left:135"><NOBR>标机器的配置不同，其给出的取值会不同）：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:9934;left:135"><NOBR>13:52:00,183 INFO  [Server] JBoss (MX MicroKernel) </NOBR></DIV>
<DIV style="position:absolute;top:9957;left:135"><NOBR>[4.0.4.GA (build: CVSTag=JBoss_4_0_4_GA date=200605111311)] Started in 31s:941ms </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:10006;left:166"><NOBR>用户可以通过Web浏览器验证JBoss应用服务器是否在运行，其HTTP监听端口为 8080</NOBR></DIV>
<DIV style="position:absolute;top:10029;left:135"><NOBR>（其中，必须保证在启动JBoss时，8080 端口并没有被其他应用或服务占用）。通过Web浏览</NOBR></DIV>
<DIV style="position:absolute;top:10053;left:135"><NOBR>器能够找到相关有用的JBoss资源（译者注：<A href="http://localhost:8080/"></A><FONT color="#0000ff" face="Times"><A href="http://localhost:8080/">http://localhost:8080</A></FONT><A href="http://localhost:8080/"></A>）。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:10279;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="9"><B>Page 9</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:10390;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:10414;left:135"><NOBR>1.3 JMX 控制台</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:10454;left:166"><NOBR>通过<FONT color="#0000ff" face="Times"><A href="http://localhost:8080/jmx-console">http://localhost:8080/jmx-console</A></FONT></NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:8px;font-family:Times">
<DIV style="position:absolute;top:10453;left:411"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#9">1</A></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:10454;left:417"><NOBR>，即JMX控制台应用，用户能够浏览到服务器活动</NOBR></DIV>
<DIV style="position:absolute;top:10478;left:135"><NOBR>视图。图 1.1 给出了示例界面。</NOBR></DIV>
<DIV style="position:absolute;top:10501;left:166"><NOBR>上述界面给出了 JBoss 管理控制台，它提供了构成 JBoss 服务器的 JMX  MBean 原始视</NOBR></DIV>
<DIV style="position:absolute;top:10525;left:135"><NOBR>图。我们暂时可以不用理会控制台的任何内容，但是需要知道控制台能够提供运行中的 JBoss</NOBR></DIV>
<DIV style="position:absolute;top:10548;left:135"><NOBR>应用服务器的大量信息。另外，通过它，用户能够修改、启动、停止 JBoss 组件。</NOBR></DIV>
<DIV style="position:absolute;top:10571;left:166"><NOBR>比如，请找到 service=JNDIView 链接，然后单击。该特定 MBean 提供了如下服务内容，</NOBR></DIV>
<DIV style="position:absolute;top:10595;left:135"><NOBR>即能够浏览服务器中 JNDI 命名空间的结构信息。接下来，请在该 MBean 显示页面底端找</NOBR></DIV>
<DIV style="position:absolute;top:10618;left:135"><NOBR>到 list 操作，然后单击 invoke 按钮。invoke 操作将返回绑定到 JNDI 树中的当前名字列表，</NOBR></DIV>
<DIV style="position:absolute;top:10642;left:135"><NOBR>这对于获得 EJB 名字很有帮助，比如当 EJB 应用客户端不能够解析 EJB 名字时。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:11345;left:336"><NOBR>图 1-1 JMX 管理控制台 Web 应用视图</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:11423;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:11421;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:11439;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:11421;left:751"><NOBR>3</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:7px;font-family:Times">
<DIV style="position:absolute;top:11402;left:135"><NOBR>1</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:11403;left:146"><NOBR>请注意，某些机器不能够正确解析localhost名。如果碰到这种情况，则应该使用本地回环地址，即 127.0.0.1。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:11542;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="10"><B>Page 10</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:11653;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:12686;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:12684;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:12702;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:12684;left:751"><NOBR>4</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:11675;left:166"><NOBR>类似地，用户也可以看看其他的 MBean 及其列举出的操作，然后试着修改一些配置属</NOBR></DIV>
<DIV style="position:absolute;top:11698;left:135"><NOBR>性，看看会发生什么事情。有一点请注意，即如果服务器一旦重启，从控制台所作的修改都</NOBR></DIV>
<DIV style="position:absolute;top:11721;left:135"><NOBR>将丢弃掉。因为重启 JBoss 时，系统将重新装载原始配置，因此用户可以大胆地尝试一切操</NOBR></DIV>
<DIV style="position:absolute;top:11745;left:135"><NOBR>作。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:11790;left:135"><NOBR>1.4  停止服务器</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:11831;left:166"><NOBR>为了能够停止 JBoss 服务器，用户可以敲入 Ctrl-C，或者从 bin 目录运行 shutdown 脚本。</NOBR></DIV>
<DIV style="position:absolute;top:11854;left:135"><NOBR>甚至，用户还可以使用管理控制台（请在 jboss.system 部分找到 type=Server，然后调用</NOBR></DIV>
<DIV style="position:absolute;top:11880;left:135"><NOBR>shutdown 操作。）。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:11922;left:135"><NOBR>1.5  运行为 Windows 服务</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:11963;left:166"><NOBR>在实际部署场景，用户一般都不希望通过手工启动和停止 JBoss 应用服务器。因此，当</NOBR></DIV>
<DIV style="position:absolute;top:11987;left:135"><NOBR>目标机器启动时，用户都希望将它作为服务，或者后台应用运行。当然，具体配置细节取决</NOBR></DIV>
<DIV style="position:absolute;top:12010;left:135"><NOBR>于各个目标 OS 平台，并且都要求用户具有一些系统管理知识和 root 权限。</NOBR></DIV>
<DIV style="position:absolute;top:12033;left:166"><NOBR>对于Linux或UNIX操作系统而言，用户需要安装启动脚本（或者通知系统管理员来完成</NOBR></DIV>
<DIV style="position:absolute;top:12057;left:135"><NOBR>此项任务）。其中，JBoss的bin目录中存在jboss_init_redhat.sh和jboss_init_suse.sh，这样两个</NOBR></DIV>
<DIV style="position:absolute;top:12080;left:135"><NOBR>脚本实例，用户也可以修改它们，以满足各自的具体需求。对于Windows操作系统而言，用</NOBR></DIV>
<DIV style="position:absolute;top:12104;left:135"><NOBR>户可以借助于实用工具，比如JavaService</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:8px;font-family:Times">
<DIV style="position:absolute;top:12102;left:416"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#10">2</A></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:12104;left:422"><NOBR>，从而将JBoss安装成系统服务。</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:7px;font-family:Times">
<DIV style="position:absolute;top:12665;left:135"><NOBR>2</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:12666;left:146"><NOBR>通过如下网址能够免费下载到JavaService：<FONT color="#0000ff" face="Times"><A href="http://javaservice.objectweb.org/">http://javaservice.objectweb.org/</A></FONT></NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:12805;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="11"><B>Page 11</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:12916;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:13949;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:13947;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:13965;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:13947;left:751"><NOBR>5</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:12965;left:135"><NOBR>第 2 章 JBoss 服务器--快速上手</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:13025;left:135"><NOBR>2.1  服务器结构</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:13066;left:166"><NOBR>至此，用户应该已完成了 JBoss 应用服务器的下载和首次运行。接下来，用户需要了解</NOBR></DIV>
<DIV style="position:absolute;top:13090;left:135"><NOBR>安装后的 JBoss 目录结构及其相应的内容。粗略看后，用户会发现其存在很多目录，因此很</NOBR></DIV>
<DIV style="position:absolute;top:13113;left:135"><NOBR>明显，用户可能会无从下手，并且不知道应该忽略哪些内容，从而不影响用户对 JBoss 应用</NOBR></DIV>
<DIV style="position:absolute;top:13136;left:135"><NOBR>服务器的体验。为解决这个问题，本章将深入服务器目录结构、主要配置文件的位置信息、</NOBR></DIV>
<DIV style="position:absolute;top:13160;left:135"><NOBR>日志文件、部署问题，等等。对于用户而言，本章的内容很有意义，因为这将帮助用户理解</NOBR></DIV>
<DIV style="position:absolute;top:13186;left:135"><NOBR>JBoss 服务架构。在阅读完本章内容后，用户将能够完成 J2EE 应用的部署。</NOBR></DIV>
<DIV style="position:absolute;top:13230;left:135"><NOBR><B>2.1.1  </B>主目录</NOBR></DIV>
<DIV style="position:absolute;top:13273;left:166"><NOBR>将二进制发布版解压到 jboss-4.0.4 目录。该目录包含如下 5 个子目录：</NOBR></DIV>
<DIV style="position:absolute;top:13299;left:198"><NOBR><B>bin</B>：含有启动、停止以及其他系统相关脚本。在前面，本书已经讨论过启动 JBoss</NOBR></DIV>
<DIV style="position:absolute;top:13320;left:198"><NOBR>应用服务器的 run 脚本。</NOBR></DIV>
<DIV style="position:absolute;top:13346;left:198"><NOBR><B>client</B>：存储供 Java 客户应用或者外部 Web 容器使用的配置文件和 JAR 文件。用</NOBR></DIV>
<DIV style="position:absolute;top:13366;left:198"><NOBR>户可以使用所需要的具体存档，或者仅仅使用 jbossall-client.jar。</NOBR></DIV>
<DIV style="position:absolute;top:13393;left:198"><NOBR><B>docs</B>：含有 JBoss 引用的 XML DTD 文件（当然，还包括 JBoss 具体配置文件）。同</NOBR></DIV>
<DIV style="position:absolute;top:13413;left:198"><NOBR>时，还存在 JCA（Java Connetor Architecture，Java 连接器架构）实例配置文件，供</NOBR></DIV>
<DIV style="position:absolute;top:13437;left:198"><NOBR>设置不同数据库的数据源使用（比如 MySQL、Oracle、Postgres）。</NOBR></DIV>
<DIV style="position:absolute;top:13463;left:198"><NOBR><B>lib</B>：包含运行 JBoss 微内核所需的 JAR 文件。请注意，不要往该目录添加用户自</NOBR></DIV>
<DIV style="position:absolute;top:13483;left:198"><NOBR>身的任何 JAR 文件。</NOBR></DIV>
<DIV style="position:absolute;top:13510;left:198"><NOBR><B>server</B>：包含的各个子目录都是不同的服务器配置。通过往 run 脚本后添加-c &lt;config </NOBR></DIV>
<DIV style="position:absolute;top:13533;left:198"><NOBR>name&gt;参数便能够指定不同的配置。接下来，来看看 default 服务器配置。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:14068;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="12"><B>Page 12</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:14179;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
<DIV style="position:absolute;top:14717;left:383"><NOBR>图 2-1 JBoss 目录结构</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:14762;left:135"><NOBR><B>2.1.2  </B>服务器配置</NOBR></DIV>
<DIV style="position:absolute;top:14805;left:166"><NOBR>从根本上考虑，JBoss 架构是由 JMX  MBean 服务器、微内核、一套可插入式组件服务</NOBR></DIV>
<DIV style="position:absolute;top:14828;left:135"><NOBR>以及 MBean 构成的。这种架构使得，集成不同的配置变得更加简单，并且能够很灵活地满</NOBR></DIV>
<DIV style="position:absolute;top:14852;left:135"><NOBR>足用户的各自需求。用户不再需要一次性运行重量级的应用服务器。同时，用户可以删除不</NOBR></DIV>
<DIV style="position:absolute;top:14875;left:135"><NOBR>再需要使用的组件（这将从很大程度上减少服务器的启动时间），并且通过开发自己的MBean</NOBR></DIV>
<DIV style="position:absolute;top:14899;left:135"><NOBR>还能够集成其他服务到 JBoss 中。当然，如果是运行标准 J2EE 应用，则不用理会这些自定</NOBR></DIV>
<DIV style="position:absolute;top:14922;left:135"><NOBR>义工作。用户所需要的一切服务，JBoss 发布版都包括了。另外，为使用 JBoss，用户也不</NOBR></DIV>
<DIV style="position:absolute;top:14945;left:135"><NOBR>用掌握 JMX 的更详细技术细节，但是如果用户知道 JBoss 是将这种基于 JMX 的架构作为其</NOBR></DIV>
<DIV style="position:absolute;top:14969;left:135"><NOBR>核心的，则对于开发基于 JBoss 的 J2EE 而言，更有帮助。</NOBR></DIV>
<DIV style="position:absolute;top:14992;left:166"><NOBR>开发者在 server 目录下能够找到若干服务器配置实例。如果 JBos 是通过安装界面完成</NOBR></DIV>
<DIV style="position:absolute;top:15015;left:135"><NOBR>安装的，则仅仅能看到 default 配置。在安装过程中，EJB3、EJB 3 群集、完全 J2EE 1.4 等</NOBR></DIV>
<DIV style="position:absolute;top:15039;left:135"><NOBR>特性可供安装者选择，最终这些特性都将配置在 default 中。如果开发者下载了二进制或源</NOBR></DIV>
<DIV style="position:absolute;top:15062;left:135"><NOBR>代码（构建）版本，则 server 目录下存在 3 个服务器实例配置：all、default 以及 minimal，</NOBR></DIV>
<DIV style="position:absolute;top:15086;left:135"><NOBR>它们各自提供了不同的服务集合。很显然，如果启动 JBoss 服务器时没有指定其他配置，则</NOBR></DIV>
<DIV style="position:absolute;top:15109;left:135"><NOBR>将使用 <B>default </B>配置，这也是本书在第 1 章使用的服务器配置。各个配置的具体内容如下：</NOBR></DIV>
<DIV style="position:absolute;top:15135;left:198"><NOBR><B>minimal</B>：这是启动 JBoss 服务器所要求的最低配置。minimal 配置将启动日志服务、</NOBR></DIV>
<DIV style="position:absolute;top:15159;left:198"><NOBR>JNDI 服务器以及 URL 部署扫描器，以找到待部署的（新）应用。对于那些不需要</NOBR></DIV>
<DIV style="position:absolute;top:15179;left:198"><NOBR>使用任何其他 J2EE 技术，而只是使用自定义服务的场合而言，则这种 JMX/JBoss</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:15212;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:15210;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:15228;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:15210;left:751"><NOBR>6</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:15331;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="13"><B>Page 13</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:15442;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:16475;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:16473;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:16491;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:16473;left:751"><NOBR>7</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:15464;left:198"><NOBR>配置最适合。它仅仅是服务器，而不包含 Web 容器、不提供 EJB 和 JMS 支持。</NOBR></DIV>
<DIV style="position:absolute;top:15490;left:198"><NOBR><B>default</B>：默认配置，它含有大部分 J2EE 应用所需的标准服务。但是，它不含有 JAXR</NOBR></DIV>
<DIV style="position:absolute;top:15510;left:198"><NOBR>服务、IIOP 服务、或者其他任何群集服务。</NOBR></DIV>
<DIV style="position:absolute;top:15537;left:198"><NOBR><B>all</B>：提供了所有可用的服务。它包含 RMI/IIOP 和群集服务，default 配置中没有提</NOBR></DIV>
<DIV style="position:absolute;top:15557;left:198"><NOBR>供群集服务。</NOBR></DIV>
<DIV style="position:absolute;top:15581;left:166"><NOBR>用户也可以添加自身的服务器配置。最佳做法是，拷贝最接近用户需求的现有配置，然</NOBR></DIV>
<DIV style="position:absolute;top:15604;left:135"><NOBR>后修改其具体内容。比如，如果用户不需要使用消息服务，则只需要拷贝 default 目录，并</NOBR></DIV>
<DIV style="position:absolute;top:15627;left:135"><NOBR>重新命名为 myconfig，然后删除 jms 子目录。最后，启动 myconfig 配置。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:15683;left:135"><NOBR>run -c <B>myconfig</B></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:15732;left:166"><NOBR>包含运行 JBoss 的服务器配置是服务器根路径。它含有特定配置中所有的代码和配置信</NOBR></DIV>
<DIV style="position:absolute;top:15756;left:135"><NOBR>息。比如，日志输出将存储在那儿，应用也将部署在那儿。接下来，本章来看看 default 服</NOBR></DIV>
<DIV style="position:absolute;top:15779;left:135"><NOBR>务器配置目录的具体内容。如果用户还没有运行 JBoss 服务器，而请运行一下吧，因为初次</NOBR></DIV>
<DIV style="position:absolute;top:15802;left:135"><NOBR>运行后，JBoss 将创建若干个子目录。</NOBR></DIV>
<DIV style="position:absolute;top:15829;left:198"><NOBR><B>conf</B>：含有指定 JBoss 核心服务的 jboss-service.xml 文件。同时，还包括核心服务</NOBR></DIV>
<DIV style="position:absolute;top:15849;left:198"><NOBR>的其他配置文件。</NOBR></DIV>
<DIV style="position:absolute;top:15875;left:198"><NOBR><B>data</B>：这一目录存储持久化数据，即使服务器发生重启其中的数据也不会丢失。许</NOBR></DIV>
<DIV style="position:absolute;top:15896;left:198"><NOBR>多 JBoss 服务将数据存储在这里，比如 Hypersonic 数据库实例。</NOBR></DIV>
<DIV style="position:absolute;top:15922;left:198"><NOBR><B>deploy</B>：用户将应用代码（JAR\WAR\EAR 文件）部署在此处。同时，deploy 目录</NOBR></DIV>
<DIV style="position:absolute;top:15943;left:198"><NOBR>也用于热部署服务（即，那些能够从运行服务器动态添加或删除的服务）和部署</NOBR></DIV>
<DIV style="position:absolute;top:15969;left:198"><NOBR>JCA 资源适配器。因此，用户能够在 deploy 目录看到大量的配置文件。尤其是，</NOBR></DIV>
<DIV style="position:absolute;top:15990;left:198"><NOBR>用户能够看到 JMX 控制台应用（未打包的 WAR 文件），本书前面讨论过。JBoss</NOBR></DIV>
<DIV style="position:absolute;top:16013;left:198"><NOBR>服务器将定期扫描该目录，从而查找是否有组件更新或修改，从而自动完成组件的</NOBR></DIV>
<DIV style="position:absolute;top:16036;left:198"><NOBR>重新部署。本书后续章节将详细阐述部署细节。</NOBR></DIV>
<DIV style="position:absolute;top:16063;left:198"><NOBR><B>lib</B>：服务器配置所需的 JAR 文件。用户可以添加自身的库文件，比如 JDBC 驱动，</NOBR></DIV>
<DIV style="position:absolute;top:16083;left:198"><NOBR>等等。</NOBR></DIV>
<DIV style="position:absolute;top:16109;left:198"><NOBR><B>log</B>：日志信息将存储到该目录。JBoss 使用 Jakarta Log4j 包作为其日志功能。同时，</NOBR></DIV>
<DIV style="position:absolute;top:16130;left:198"><NOBR>用户可以在应用中直接使用 Log4j 日志记录功能。</NOBR></DIV>
<DIV style="position:absolute;top:16156;left:198"><NOBR><B>tmp</B>：供部署器临时存储未打包应用使用，也可以作为其他用途。</NOBR></DIV>
<DIV style="position:absolute;top:16180;left:198"><NOBR><B>work</B>：供 Tomcat 编译 JSP 使用。</NOBR></DIV>
<DIV style="position:absolute;top:16200;left:166"><NOBR>其中，data、log、tmp、work 目录是 JBoss 创建的。如果用户没有启动过 JBoss 服务器，</NOBR></DIV>
<DIV style="position:absolute;top:16224;left:135"><NOBR>则这些目录不会被创建。</NOBR></DIV>
<DIV style="position:absolute;top:16247;left:166"><NOBR>本书既然提到了 JBoss 中的热部署服务主题，接下来在探讨服务器配置问题前先来看看</NOBR></DIV>
<DIV style="position:absolute;top:16270;left:135"><NOBR>实际例子。如果还没有启动 JBoss，则请运行它。然后，请再次查看 deploy 目录（用户必须</NOBR></DIV>
<DIV style="position:absolute;top:16294;left:135"><NOBR>保证运行了 default 配置），然后删除 mail-service.xml 文件。通过运行 JBoss 服务器的控制台</NOBR></DIV>
<DIV style="position:absolute;top:16317;left:135"><NOBR>能够浏览到如下信息：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:16373;left:135"><NOBR>13:10:05,235 INFO  [MailService] Mail service &#39;java:/Mail&#39; removed from JNDI </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:16422;left:166"><NOBR>然后，再次将 mail-service.xml 文件放回原处，用户将通过控制台再次发现 JBoss 重新</NOBR></DIV>
<DIV style="position:absolute;top:16445;left:135"><NOBR>部署了该服务。所以，这就是 JBoss 的热部署。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:16594;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="14"><B>Page 14</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:16705;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:17738;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:17736;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:17754;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:17736;left:751"><NOBR>8</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:16729;left:135"><NOBR>2.2  基本安装问题</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:16769;left:166"><NOBR>至此，本书已经阐述了 JBoss 服务器的结构。接下来，带领用户看看其中的主要配置文</NOBR></DIV>
<DIV style="position:absolute;top:16793;left:135"><NOBR>件，并看看它们各自的用途。请注意，这里的目录路径都是基于 default 目录给出的。</NOBR></DIV>
<DIV style="position:absolute;top:16840;left:135"><NOBR><B>2.2.1  </B>核心服务</NOBR></DIV>
<DIV style="position:absolute;top:16882;left:166"><NOBR>当 JBoss 服务器启动时，首先会启动 conf/jboss-service.xml 文件指定的核心服务。如果</NOBR></DIV>
<DIV style="position:absolute;top:16906;left:135"><NOBR>用户通过编辑器打开它，将会看到其包括了各种服务，其中包括日志、安全性、JNDI（还</NOBR></DIV>
<DIV style="position:absolute;top:16929;left:135"><NOBR>有本书前面讨论过的 JNDIView 服务）。将如下 JNDIView 服务入口注释掉：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:16985;left:135"><NOBR>&lt;!-- Section 1 commented out </NOBR></DIV>
<DIV style="position:absolute;top:17008;left:135"><NOBR>&lt;mbean code=&quot;org.jboss.naming.JNDIView&quot; </NOBR></DIV>
<DIV style="position:absolute;top:17032;left:162"><NOBR>name=&quot;jboss:service=JNDIView&quot; </NOBR></DIV>
<DIV style="position:absolute;top:17055;left:162"><NOBR>xmbean-dd=&quot;resource:xmdesc/JNDIView-xmbean.xml&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:17079;left:135"><NOBR>--&gt; </NOBR></DIV>
<DIV style="position:absolute;top:17102;left:162"><NOBR>&lt;!-- The HANamingService service name --&gt; </NOBR></DIV>
<DIV style="position:absolute;top:17125;left:135"><NOBR>&lt;!-- Section two commented out </NOBR></DIV>
<DIV style="position:absolute;top:17149;left:162"><NOBR>&lt;attribute name=&quot;HANamingService&quot;&gt;jboss:service=HAJNDI&lt;/attribute&gt; </NOBR></DIV>
<DIV style="position:absolute;top:17172;left:135"><NOBR>&lt;/mbean&gt; </NOBR></DIV>
<DIV style="position:absolute;top:17196;left:135"><NOBR>--&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:17245;left:166"><NOBR>如果重启 JBoss，则 JNDIView 服务将不再出现在管理控制的列表中。实际场合中，用</NOBR></DIV>
<DIV style="position:absolute;top:17268;left:135"><NOBR>户很少会修改该文件。虽然通过 conf/jboss-service.xml 文件能够添加其他 MBean 服务，但是</NOBR></DIV>
<DIV style="position:absolute;top:17291;left:135"><NOBR>更好的办法是，将单独的配置文件放置在 deploy 目录中，因为这将使得用户的服务具有热</NOBR></DIV>
<DIV style="position:absolute;top:17315;left:135"><NOBR>部署能力。</NOBR></DIV>
<DIV style="position:absolute;top:17362;left:135"><NOBR><B>2.2.2  </B>日志服务</NOBR></DIV>
<DIV style="position:absolute;top:17404;left:166"><NOBR>本书提到，Log4j是JBoss使用的日志功能包。如果用户还不熟悉Log4j包，并且希望在</NOBR></DIV>
<DIV style="position:absolute;top:17428;left:135"><NOBR>应用中使用它，则请到Jakarta网站，<A href="http://jakarta.apache.org/log4j/"></A><FONT color="#0000ff" face="Times"><A href="http://jakarta.apache.org/log4j/">http://jakarta.apache.org/log4j/</A></FONT>。通过conf/log4j.xml文件能</NOBR></DIV>
<DIV style="position:absolute;top:17451;left:135"><NOBR>够控制JBoss的日志功能。该文件定义了一套Appender、指定了日志文件、具体消息Category</NOBR></DIV>
<DIV style="position:absolute;top:17475;left:135"><NOBR>类型的存储、消息格式以及消息的过滤级别。默认时，JBoss会同时在控制台和日志文件（位</NOBR></DIV>
<DIV style="position:absolute;top:17498;left:135"><NOBR>于log/server.log文件中）中生成输出信息。</NOBR></DIV>
<DIV style="position:absolute;top:17521;left:166"><NOBR>一共存在 5 个基本的日志级别：DEBUG、INFO、WARN、ERROR 以及 FATAL。其中，</NOBR></DIV>
<DIV style="position:absolute;top:17545;left:135"><NOBR>控制台的日志入口（threshold）为 INFO，即用户通过控制台能够浏览到提示信息、警告信</NOBR></DIV>
<DIV style="position:absolute;top:17568;left:135"><NOBR>息、错误信息，但是调试信息查看不到。相比之下，JBoss 并没有为 server.log 文件设置任何</NOBR></DIV>
<DIV style="position:absolute;top:17592;left:135"><NOBR>入口，因此所有生成的消息将记录到 server.log 文件中。如果 JBoss 运行过程中出现了错误，</NOBR></DIV>
<DIV style="position:absolute;top:17615;left:135"><NOBR>则通过控制台可能找不到用户有用的信息，因此建议通过 server.log 文件查看是否有调试信</NOBR></DIV>
<DIV style="position:absolute;top:17638;left:135"><NOBR>息可供解决问题所用。然而，请注意，通过调整日志入口能够在控制台查看到调试信息，但</NOBR></DIV>
<DIV style="position:absolute;top:17662;left:135"><NOBR>是这并没有保证所有的 JBoss 消息都将记录到 server.log 文件中。因此，用户还需要为单个</NOBR></DIV>
<DIV style="position:absolute;top:17685;left:135"><NOBR>的 Category 设置不同的日志级别。比如，log4j.xml 给出了如下 Category。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:17857;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="15"><B>Page 15</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:17968;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:19001;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:18999;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:19017;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:18999;left:751"><NOBR>9</NOBR></DIV>
<DIV style="position:absolute;top:17999;left:135"><NOBR>&lt;!-- Limit JBoss categories to INFO --&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18022;left:135"><NOBR>&lt;category name=&quot;org.jboss&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18046;left:162"><NOBR>&lt;priority value=&quot;<B>INFO</B>&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18069;left:135"><NOBR>&lt;/category&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:18118;left:166"><NOBR>它将所有的 JBoss 相关类的日志级别限制到 INFO，即同那些含有具体日志级别的</NOBR></DIV>
<DIV style="position:absolute;top:18144;left:135"><NOBR>Category 隔离开。如果将 INFO 更换为 DEBUG，则将生成更详细的日志输出。</NOBR></DIV>
<DIV style="position:absolute;top:18165;left:166"><NOBR>本书将再介绍另外一个实例：将 CMP 引擎的日志输出级别设置为 DEBUG，并将其定</NOBR></DIV>
<DIV style="position:absolute;top:18188;left:135"><NOBR>位到 cmp.log 文件中，从而可供用户分析生成的 SQL 命令。因此，需要添加如下代码到</NOBR></DIV>
<DIV style="position:absolute;top:18214;left:135"><NOBR>log4j.xml 文件中。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:18267;left:135"><NOBR>&lt;appender name=&quot;CMP&quot; class=&quot;org.jboss.logging.appender.RollingFileAppender&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18291;left:162"><NOBR>&lt;errorHandler class=&quot;org.jboss.logging.util.OnlyOnceErrorHandler&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18314;left:162"><NOBR>&lt;param name=&quot;File&quot; value=&quot;${jboss.server.home.dir}/log/cmp.log&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18337;left:162"><NOBR>&lt;param name=&quot;Append&quot; value=&quot;false&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18361;left:162"><NOBR>&lt;param name=&quot;MaxFileSize&quot; value=&quot;500KB&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18384;left:162"><NOBR>&lt;param name=&quot;MaxBackupIndex&quot; value=&quot;1&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18431;left:162"><NOBR>&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18454;left:189"><NOBR>&lt;param name=&quot;ConversionPattern&quot; value=&quot;&percnt;d &percnt;-5p [&percnt;c] &percnt;m&percnt;n&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18478;left:162"><NOBR>&lt;/layout&gt;</NOBR></DIV>
<DIV style="position:absolute;top:18501;left:135"><NOBR>&lt;/appender&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18548;left:135"><NOBR>&lt;category name=&quot;org.jboss.ejb.plugins.cmp&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18571;left:162"><NOBR>&lt;priority value=&quot;DEBUG&quot; /&gt;</NOBR></DIV>
<DIV style="position:absolute;top:18595;left:162"><NOBR>&lt;appender-ref ref=&quot;CMP&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:18618;left:135"><NOBR>&lt;/category&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:18667;left:166"><NOBR>这将创建新的文件 Appender，并指定将它用于 org.jboss.ejb.plugins.cmp 包的 Logger（或</NOBR></DIV>
<DIV style="position:absolute;top:18693;left:135"><NOBR>Category）。第 7 章讨论 CMP 时，如果使用该实例将大有益处。</NOBR></DIV>
<DIV style="position:absolute;top:18714;left:166"><NOBR>由于文件 Appender 设置为每日创建新的日志文件，因此 JBoss 不会每次启动服务器时</NOBR></DIV>
<DIV style="position:absolute;top:18737;left:135"><NOBR>创建新的日志文件，而且也不会总是将日志信息记录到单个文件中。当前的日志文件为</NOBR></DIV>
<DIV style="position:absolute;top:18764;left:135"><NOBR>cmp.log，更早的日志文件名是通过将具体日期添加到 server 而生成的。用户应该还注意到，</NOBR></DIV>
<DIV style="position:absolute;top:18787;left:135"><NOBR>log 目录包含了 Web 容器生成的 HTTP 请求日志。</NOBR></DIV>
<DIV style="position:absolute;top:18831;left:135"><NOBR><B>2.2.3  </B>安全性服务</NOBR></DIV>
<DIV style="position:absolute;top:18874;left:166"><NOBR>安全性域信息存储在login-config.xml文件中，其包含了许多安全性域定义。各个安全性</NOBR></DIV>
<DIV style="position:absolute;top:18897;left:135"><NOBR>域指定了许多JAAS</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:8px;font-family:Times">
<DIV style="position:absolute;top:18896;left:268"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#15">3</A></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:18897;left:274"><NOBR>登陆模块，供安全性域认证使用。当用户需要在应用中使用安全性时，</NOBR></DIV>
<DIV style="position:absolute;top:18921;left:135"><NOBR>需要在JBoss特定部署描述符jboss.xml或jboss-web.xml中指定待使用的安全性域名。本节将快</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:7px;font-family:Times">
<DIV style="position:absolute;top:18962;left:135"><NOBR>3</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:18965;left:143"><NOBR>Java认证和授权服务。JBoss使用JAAS提供插入式认证模块。用户可以使用现有的认证模块，或者可以开</NOBR></DIV>
<DIV style="position:absolute;top:18981;left:135"><NOBR>发更适合自身需求的认证模块。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:19120;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="16"><B>Page 16</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:19231;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:20264;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:20262;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:20280;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:20262;left:745"><NOBR>10</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:19253;left:135"><NOBR>速地带领用户分析如何保护随JBoss发布的JMX控制台和Web控制台应用。</NOBR></DIV>
<DIV style="position:absolute;top:19276;left:166"><NOBR>本书在 1.3 节讨论过 JMX 控制台。通过 JMX 控制台基本上能够控制 JBoss 服务器的各</NOBR></DIV>
<DIV style="position:absolute;top:19299;left:135"><NOBR>个方面，因此保护该控制台很重要，至少需要通过密码来保护它。否则，任何远程用户将能</NOBR></DIV>
<DIV style="position:absolute;top:19323;left:135"><NOBR>够完全控制用户的 JBoss 服务器。为实现此目的，本文将安全性域添加给 JMX 控制台应用。</NOBR></DIV>
<DIV style="position:absolute;top:19346;left:135"><NOBR>通过 server/default/deploy/jmx-console.war/WEB-INF/目录能够找到待修改的 JMX 控制台文</NOBR></DIV>
<DIV style="position:absolute;top:19370;left:135"><NOBR>件，即 jboss-web.xml。将 jboss-web.xml 中 security-domain 的注释去掉，具体如下。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:19425;left:135"><NOBR>&lt;jboss-web&gt; </NOBR></DIV>
<DIV style="position:absolute;top:19449;left:162"><NOBR>&lt;security-domain&gt;java:/jaas/jmx-console&lt;/security-domain&gt;</NOBR></DIV>
<DIV style="position:absolute;top:19472;left:135"><NOBR>&lt;/jboss-web&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:19521;left:166"><NOBR>这将设置 Web 应用待使用的安全性域，但还未确定 Web 应用应该使用的安全性策略。</NOBR></DIV>
<DIV style="position:absolute;top:19545;left:135"><NOBR>待保护的 URL 是什么，相应的访问角色又是哪些？为配置这些内容，用户需要在同一目录</NOBR></DIV>
<DIV style="position:absolute;top:19568;left:135"><NOBR>中找到 web.xml 文件，然后将 security-constraint 的注释去掉。其中，该安全性约束要求登陆</NOBR></DIV>
<DIV style="position:absolute;top:19591;left:135"><NOBR>用户必须具有 JBossAdmin 角色。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:19647;left:135"><NOBR>&lt;!-- </NOBR></DIV>
<DIV style="position:absolute;top:19671;left:155"><NOBR>A security constraint that restricts access to the HTML JMX console </NOBR></DIV>
<DIV style="position:absolute;top:19694;left:155"><NOBR>to users with the role JBossAdmin. Edit the roles to what you want and </NOBR></DIV>
<DIV style="position:absolute;top:19717;left:155"><NOBR>uncomment the WEB-INF/jboss-web.xml/security-domain element to enable</NOBR></DIV>
<DIV style="position:absolute;top:19741;left:155"><NOBR>secured access to the HTML JMX console. </NOBR></DIV>
<DIV style="position:absolute;top:19764;left:135"><NOBR>--&gt; </NOBR></DIV>
<DIV style="position:absolute;top:19788;left:135"><NOBR>&lt;security-constraint&gt; </NOBR></DIV>
<DIV style="position:absolute;top:19811;left:162"><NOBR>&lt;web-resource-collection&gt;</NOBR></DIV>
<DIV style="position:absolute;top:19834;left:189"><NOBR>&lt;web-resource-name&gt;HtmlAdaptor&lt;/web-resource-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:19858;left:189"><NOBR>&lt;description&gt;</NOBR></DIV>
<DIV style="position:absolute;top:19881;left:216"><NOBR>An example security config that only allows users with the </NOBR></DIV>
<DIV style="position:absolute;top:19905;left:216"><NOBR>role JBossAdmin to access the HTML JMX console web application </NOBR></DIV>
<DIV style="position:absolute;top:19928;left:189"><NOBR>&lt;/description&gt;</NOBR></DIV>
<DIV style="position:absolute;top:19951;left:189"><NOBR>&lt;url-pattern&gt;/*&lt;/url-pattern&gt; </NOBR></DIV>
<DIV style="position:absolute;top:19975;left:189"><NOBR>&lt;http-method&gt;GET&lt;/http-method&gt; </NOBR></DIV>
<DIV style="position:absolute;top:19998;left:189"><NOBR>&lt;http-method&gt;POST&lt;/http-method&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20022;left:162"><NOBR>&lt;/web-resource-collection&gt;</NOBR></DIV>
<DIV style="position:absolute;top:20045;left:162"><NOBR>&lt;auth-constraint&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20068;left:189"><NOBR>&lt;role-name&gt;JBossAdmin&lt;/role-name&gt;</NOBR></DIV>
<DIV style="position:absolute;top:20092;left:162"><NOBR>&lt;/auth-constraint&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20115;left:135"><NOBR>&lt;/security-constraint&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:20164;left:166"><NOBR>太好了，但是用户名和密码来自哪里呢？不错，它们来自 jmx-console 安全性域。通过</NOBR></DIV>
<DIV style="position:absolute;top:20190;left:135"><NOBR>conf/login-config.xml 文件能够看到。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:20383;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="17"><B>Page 17</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:20494;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:21527;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:21525;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:21543;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:21525;left:745"><NOBR>11</NOBR></DIV>
<DIV style="position:absolute;top:20525;left:135"><NOBR>&lt;application-policy name=&quot;jmx-console&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20554;left:162"><NOBR>&lt;authentication&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20577;left:189"><NOBR>&lt;login-module code=&quot;org.jboss.security.auth.spi.UsersRolesLoginModule&quot; </NOBR></DIV>
<DIV style="position:absolute;top:20600;left:277"><NOBR>flag=&quot;required&quot;&gt;</NOBR></DIV>
<DIV style="position:absolute;top:20624;left:216"><NOBR>&lt;module-option name=&quot;usersProperties&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20647;left:243"><NOBR>jmx-console-users.properties</NOBR></DIV>
<DIV style="position:absolute;top:20671;left:216"><NOBR>&lt;/module-option&gt;</NOBR></DIV>
<DIV style="position:absolute;top:20694;left:216"><NOBR>&lt;module-option name=&quot;rolesProperties&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20717;left:243"><NOBR>jmx-console-roles.properties</NOBR></DIV>
<DIV style="position:absolute;top:20741;left:216"><NOBR>&lt;/module-option&gt;</NOBR></DIV>
<DIV style="position:absolute;top:20764;left:189"><NOBR>&lt;/login-module&gt; </NOBR></DIV>
<DIV style="position:absolute;top:20788;left:162"><NOBR>&lt;/authentication&gt;</NOBR></DIV>
<DIV style="position:absolute;top:20811;left:135"><NOBR>&lt;/application-policy&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:20860;left:166"><NOBR>上述配置使用了基于简单文件的安全性策略。其中，登陆 JMX 控制台应用的用户名和</NOBR></DIV>
<DIV style="position:absolute;top:20883;left:135"><NOBR>密码存储在 jmx-console-users.properties 中，并且以&ldquo;username=password&rdquo;形式给出。为了</NOBR></DIV>
<DIV style="position:absolute;top:20907;left:135"><NOBR>将用户添加到 JBossAdmin 角色中，需要将&ldquo;username=rolename&rdquo;形式给出的用户和角色映</NOBR></DIV>
<DIV style="position:absolute;top:20930;left:135"><NOBR>射关系给出在 jmx-console-roles.properties 文件中。现存的文件创建了 admin 用户，其密码为</NOBR></DIV>
<DIV style="position:absolute;top:20956;left:135"><NOBR>admin。用户可能删除该用户，或者更改其密码，使得 JMX 控制台应用更安全。</NOBR></DIV>
<DIV style="position:absolute;top:20977;left:166"><NOBR>当更新了 web.xml 时，JBoss 会重新部署 JMX 控制台应用。用户可以通过服务器控制台</NOBR></DIV>
<DIV style="position:absolute;top:21000;left:135"><NOBR>检查 JBoss 保存了对 web.xml 所作的修改。如果用户正确地配置了上述各个任务，并且重新</NOBR></DIV>
<DIV style="position:absolute;top:21024;left:135"><NOBR>部署了 JMX 控制台应用，则下次访问它时，JBoss 会要求用户提供用户名和密码。</NOBR></DIV>
<DIV style="position:absolute;top:21050;left:166"><NOBR>JMX 控制台应用不是 JBoss 唯一提供的、基于 Web 的管理界面。JBoss 还提供了另一管</NOBR></DIV>
<DIV style="position:absolute;top:21071;left:135"><NOBR>理应用，即 Web 控制台（参考附录 A）。尽管 Web 控制台是基于 Java  Applet 形式给出的，</NOBR></DIV>
<DIV style="position:absolute;top:21094;left:135"><NOBR>但是对应的 Web 应用还是可以类似于 JMX 控制台的方式来保护它。其中，Web 控制台应用</NOBR></DIV>
<DIV style="position:absolute;top:21117;left:135"><NOBR>位于 default/deploy/management/web-console.war。注意，这同 JMX 控制器应用有所区别，因</NOBR></DIV>
<DIV style="position:absolute;top:21141;left:135"><NOBR>为 JMX 控制器应用是以目录形式展开的。因此，编辑 web-console.war WAR 存档更费力些。</NOBR></DIV>
<DIV style="position:absolute;top:21188;left:135"><NOBR><B>2.2.4  </B>其他服务</NOBR></DIV>
<DIV style="position:absolute;top:21233;left:166"><NOBR>deploy 目录放置的服务不是核心服务，但具有热部署能力。用户可以通过 XML 描述符</NOBR></DIV>
<DIV style="position:absolute;top:21254;left:135"><NOBR>文件（*-service.xml）或 JBoss 服务存档（SAR）文件给出服务。SAR 同时含有 XML 描述</NOBR></DIV>
<DIV style="position:absolute;top:21277;left:135"><NOBR>符和服务所要求的其他资源（比如，类、JAR 库文件以及其他存档），而且 SAR 是以单个存</NOBR></DIV>
<DIV style="position:absolute;top:21301;left:135"><NOBR>档文件给出的。</NOBR></DIV>
<DIV style="position:absolute;top:21324;left:166"><NOBR>本节内容将研究 default 配置中的 deploy 目录，并给出相应的解释。当然，这里给出的</NOBR></DIV>
<DIV style="position:absolute;top:21347;left:135"><NOBR>内容使得用户能够从整体上把握 JBoss 应用服务器，因此如果用户希望了解有关现有 MBean</NOBR></DIV>
<DIV style="position:absolute;top:21371;left:135"><NOBR>组件的更多内容，则不要错过本节内容。通过 default/deploy 目录，用户能够发现下列文件</NOBR></DIV>
<DIV style="position:absolute;top:21394;left:135"><NOBR>和子目录。</NOBR></DIV>
<DIV style="position:absolute;top:21420;left:198"><NOBR><B>bsh-deployer</B>：将 BeanShell 脚本部署成 JBoss 服务。</NOBR></DIV>
<DIV style="position:absolute;top:21444;left:198"><NOBR><B>cache-invalidation-service.xml</B>：允许借助于 JMS，而实现对 EJB 缓存的控制。</NOBR></DIV>
<DIV style="position:absolute;top:21467;left:198"><NOBR><B>client-deployer-service.xml</B>：部署 J2EE 应用客户。</NOBR></DIV>
<DIV style="position:absolute;top:21491;left:198"><NOBR><B>ear-deployer.xml</B>：部署 J2EE EAR 应用。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:21646;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="18"><B>Page 18</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:21757;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:22790;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:22788;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:22806;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:22788;left:745"><NOBR>12</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:21781;left:198"><NOBR><B>ejb-deployer.xml</B>：部署 J2EE EJB 应用。</NOBR></DIV>
<DIV style="position:absolute;top:21805;left:198"><NOBR><B>hsqldb-ds.xml</B>：设置嵌入式 Hypersonic 数据库服务，并将其作为默认数据源。</NOBR></DIV>
<DIV style="position:absolute;top:21828;left:198"><NOBR><B>http-invoker.sar</B>：通过 RMI/HTTP 方式访问到 MBean 和 EJB。</NOBR></DIV>
<DIV style="position:absolute;top:21852;left:198"><NOBR><B>jboss-aop.deployer</B>：提供 AspectManagerService，并部署 JBoss AOP 应用。</NOBR></DIV>
<DIV style="position:absolute;top:21875;left:198"><NOBR><B>jboss-</B>hibernate.deployer：部署 Hibernate 存档（HAR 文件）。</NOBR></DIV>
<DIV style="position:absolute;top:21898;left:198"><NOBR><B>jboss-local-jdbc.rar </B>和 <B>jboss-xa-jdbc.rar</B>：集成 JDBC 驱动的 JCA 资源适配器，它</NOBR></DIV>
<DIV style="position:absolute;top:21919;left:198"><NOBR>们分别支持 DataSource 和 XADataSource。但是，这并没有提供专有 JCA 实现。</NOBR></DIV>
<DIV style="position:absolute;top:21945;left:198"><NOBR><B>jboss-ws4ee.sar</B>：提供 J2EE Web 服务支持。</NOBR></DIV>
<DIV style="position:absolute;top:21969;left:198"><NOBR><B>jbossjca-service.xml</B>：JBoss  JCA 实现，使得在 JBoss 中部署 JCA 资源适配器成为</NOBR></DIV>
<DIV style="position:absolute;top:21989;left:198"><NOBR>可能。</NOBR></DIV>
<DIV style="position:absolute;top:22015;left:198"><NOBR><B>jbossweb-tomcat50-sar</B>：含有嵌入式 Tomcat 服务的展开 SAR 文件。它为 JBoss 提</NOBR></DIV>
<DIV style="position:absolute;top:22036;left:198"><NOBR>供了标准的 Web 容器。</NOBR></DIV>
<DIV style="position:absolute;top:22062;left:198"><NOBR><B>jms</B>：将 JMS 相关的服务聚集在一起，并放置在 jms 目录中。</NOBR></DIV>
<DIV style="position:absolute;top:22086;left:198"><NOBR><B>hsqldb-jdbc-state-service.xml</B>：使用 HSQLDB 管理状态。</NOBR></DIV>
<DIV style="position:absolute;top:22109;left:198"><NOBR><B>hsqldb-jdbc2-service.xml</B>：使用嵌入式 HSQL 数据库实现缓存和持久化。它还包含</NOBR></DIV>
<DIV style="position:absolute;top:22130;left:198"><NOBR>了 JMS 实现的核心服务，即 DestinationManager MBean。</NOBR></DIV>
<DIV style="position:absolute;top:22156;left:198"><NOBR><B>jbossmq-destinations-service.xml</B>：供 JBoss 测试套件使用的 JMS Topic 和 Queue。</NOBR></DIV>
<DIV style="position:absolute;top:22179;left:198"><NOBR><B>jbossmq-service.xml</B>：JMS 其他服务，包括拦截器配置。</NOBR></DIV>
<DIV style="position:absolute;top:22203;left:198"><NOBR><B>jms-ds.xml</B>：将 JBoss 消息实现作为默认 JMS 提供商。并且，它还提供 JCA 配置</NOBR></DIV>
<DIV style="position:absolute;top:22223;left:198"><NOBR>信息，以供集成 JBoss JCA 和 JMS 资源适配器使用。</NOBR></DIV>
<DIV style="position:absolute;top:22249;left:198"><NOBR><B>jms-ra.rar</B>：资源适配器，供 JCA 处理 JMS 连接工厂使用。</NOBR></DIV>
<DIV style="position:absolute;top:22273;left:198"><NOBR><B>jbossmq-httpil.sar</B>：提供 JMS 调用层，从而实现 HTTP 方式使用 JMS。</NOBR></DIV>
<DIV style="position:absolute;top:22296;left:198"><NOBR>jvm-il-service.xml：配置本地 JMS 传输调用层，供本地 JVM 使用 JMS。</NOBR></DIV>
<DIV style="position:absolute;top:22320;left:198"><NOBR>uil2-service.xml：配置 JMS 版本 2 统一调用层。这是一种可靠的、自定义的、基于</NOBR></DIV>
<DIV style="position:absolute;top:22343;left:198"><NOBR>Socket 的传输方式。推荐在不同 JVM 间使用它。</NOBR></DIV>
<DIV style="position:absolute;top:22366;left:198"><NOBR><B>jmx-console.war</B>：JMX 控制台应用。前面讨论过。</NOBR></DIV>
<DIV style="position:absolute;top:22390;left:198"><NOBR><B>jmx-invoker-server.xml</B>：为远程访问 JMX MBean 服务器提供支持。</NOBR></DIV>
<DIV style="position:absolute;top:22413;left:198"><NOBR>mail-ra.rar：为 JavaMail 提供资源适配器。</NOBR></DIV>
<DIV style="position:absolute;top:22437;left:198"><NOBR><B>mail-service.xml</B>：允许应用和服务在 JBoss 中使用 JavaMail。请注意，邮件服务器</NOBR></DIV>
<DIV style="position:absolute;top:22457;left:198"><NOBR>相关信息必须由用户提供。</NOBR></DIV>
<DIV style="position:absolute;top:22483;left:198"><NOBR><B>management</B>：含有可更换管理服务的子目录。其中，包含有改进的 Web 控制台。</NOBR></DIV>
<DIV style="position:absolute;top:22507;left:198"><NOBR><B>monitoring-service.xml</B>：配置警告监听器，比如控制台监听器、E_mail 监听器，等</NOBR></DIV>
<DIV style="position:absolute;top:22527;left:198"><NOBR>等。</NOBR></DIV>
<DIV style="position:absolute;top:22554;left:198"><NOBR><B>properties-service.xml</B>：设置 JVM 的全局系统属性（由 System.getProperties 返回）。</NOBR></DIV>
<DIV style="position:absolute;top:22577;left:198"><NOBR><B>schedule-manager-service.xml </B>和 <B>scheduler-service.xml</B>：定时任务服务。</NOBR></DIV>
<DIV style="position:absolute;top:22600;left:198"><NOBR><B>sqlexception-service.xml</B>：为 JDBC 驱动提供标识一般性 SQL 异常。</NOBR></DIV>
<DIV style="position:absolute;top:22624;left:198"><NOBR><B>uuid-key-generator.sar</B>：生成唯一的、基于 UUID 的键。</NOBR></DIV>
<DIV style="position:absolute;top:22647;left:166"><NOBR>all 配置提供了其他配置没有提供的其他服务，用户可以将这些服务集成到各自的服务</NOBR></DIV>
<DIV style="position:absolute;top:22668;left:135"><NOBR>器配置中。具体如下：</NOBR></DIV>
<DIV style="position:absolute;top:22694;left:198"><NOBR><B>cluster-service.xml</B>：群集服务，包括 JGroups 集成服务、HA-JNDI、有状态会话</NOBR></DIV>
<DIV style="position:absolute;top:22717;left:198"><NOBR>Bean 复制、CMP2 缓存有效性服务。</NOBR></DIV>
<DIV style="position:absolute;top:22741;left:198"><NOBR><B>deploy-hasingleton-service.xml</B>：HASingletonDeployer MBean。用于确保群集中只</NOBR></DIV>
<DIV style="position:absolute;top:22761;left:198"><NOBR>有单个节点在 deploy-hasingleton 目录部署了服务。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:22909;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="19"><B>Page 19</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:23020;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:24053;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:24051;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:24069;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:24051;left:745"><NOBR>13</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:23044;left:198"><NOBR><B>deploy.last/farm-service.xml</B>：farm 群集部署服务。用于确保它在所有其他服务部</NOBR></DIV>
<DIV style="position:absolute;top:23065;left:198"><NOBR>署之后才部署其本身。</NOBR></DIV>
<DIV style="position:absolute;top:23091;left:198"><NOBR><B>ebxmlrr-service.xml</B>：JAXR 注册服务实现。</NOBR></DIV>
<DIV style="position:absolute;top:23115;left:198"><NOBR><B>iiop-service.xml</B>：实现对 CORBA、IIOP 的支持。</NOBR></DIV>
<DIV style="position:absolute;top:23138;left:198"><NOBR><B>jbossha-httpsession.sar</B>：遗留的 HTTP 会话复制服务。</NOBR></DIV>
<DIV style="position:absolute;top:23161;left:198"><NOBR><B>remoting-service.xml</B>：还处于试验中的下一代分离式 Invoker 框架。</NOBR></DIV>
<DIV style="position:absolute;top:23185;left:198"><NOBR><B>snmp-adaptor.sar</B>：将 JMX 通知转换成 SNMP 陷阱。</NOBR></DIV>
<DIV style="position:absolute;top:23208;left:198"><NOBR><B>tc5-cluster-service.xml</B>：用于新的 HTTP 复制服务的 TressCache 配置。</NOBR></DIV>
<DIV style="position:absolute;top:23229;left:166"><NOBR>有关上述各种服务更深入、全面的介绍，请用户参考《The JBoss 4  Application  Server </NOBR></DIV>
<DIV style="position:absolute;top:23255;left:135"><NOBR>Guide》。该书还提供了服务器内核的完整信息以及服务实现（比如，JTA 和 J2EE 连接器架</NOBR></DIV>
<DIV style="position:absolute;top:23276;left:135"><NOBR>构）。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:23321;left:135"><NOBR>2.3 Web 容器&mdash;Tomcat </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:23364;left:166"><NOBR>JBoss 4.0.0 将 Tomcat 5.5 作为其默认 Web 容器。嵌入的 Tomcat 服务是通过展开的 SAR，</NOBR></DIV>
<DIV style="position:absolute;top:23385;left:135"><NOBR>即 deploy/jbossweb-tomat55.sar，给出的。Tomcat 所需要的所有 JAR 文件都能在这里找到，</NOBR></DIV>
<DIV style="position:absolute;top:23408;left:135"><NOBR>其中还包括为 Web 应用提供默认配置集合的 web.xml 文件。如果用户熟悉 Tomcat 的配置，</NOBR></DIV>
<DIV style="position:absolute;top:23432;left:135"><NOBR>则可以查看 server.xml，其含有标准 Tomcat 格式化配置信息。它包含如下内容：设置 HTTP</NOBR></DIV>
<DIV style="position:absolute;top:23455;left:135"><NOBR>连接器，并将 8080 端口作为默认监听端口；设置 AJP 连接器，并使用 8009 端口（比如，</NOBR></DIV>
<DIV style="position:absolute;top:23478;left:135"><NOBR>将 Apache 作为 Web 服务器）；给出了如何配置 SSL 连接器的实例（默认时，并没有启用）。</NOBR></DIV>
<DIV style="position:absolute;top:23502;left:166"><NOBR>除非是高级用户，否则不要修改任何内容。如果用户以前使用过单独的 Tomcat 服务器，</NOBR></DIV>
<DIV style="position:absolute;top:23525;left:135"><NOBR>则应该注意到，它同这里的嵌入式服务还是存在差别的。JBoss 掌管了 Tomcat，因此用户根</NOBR></DIV>
<DIV style="position:absolute;top:23549;left:135"><NOBR>本不用去访问 Tomcat 目录。通过将 Web 应用放置在 JBoss deploy 目录中，便实现了它们的</NOBR></DIV>
<DIV style="position:absolute;top:23572;left:135"><NOBR>部署。同时，来自 Tomcat 的输出日志（包括内部访问和访问日志）被保存在 JBoss log 目录</NOBR></DIV>
<DIV style="position:absolute;top:23595;left:135"><NOBR>中。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:24172;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="20"><B>Page 20</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:24283;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:25316;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:25314;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:25332;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:25314;left:745"><NOBR>14</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:24332;left:135"><NOBR>第 3 章　关于实例应用</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:24392;left:135"><NOBR>3.1 J2EE Tutorial </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:24433;left:166"><NOBR>本书将使用Sun J2EE Tutorial中的应用实例，即Duke银行应用。通过如下网站能够找到</NOBR></DIV>
<DIV style="position:absolute;top:24459;left:135"><NOBR>J2EE Tutorial：<FONT color="#0000ff" face="Times"><A href="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/">http://java.sun.com/j2ee/1.4/docs/tutorial/doc/</A></FONT><A href="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/"></A>。用户通过J2EE Tutorial能够获得</NOBR></DIV>
<DIV style="position:absolute;top:24480;left:135"><NOBR>一些入门资料。<A href="http://java.sun.com/j2ee/1.4/download.html/#tutorial"></A><FONT color="#0000ff" face="Times"><A href="http://java.sun.com/j2ee/1.4/download.html/#tutorial">http://java.sun.com/j2ee/1.4/download.html/#tutorial</A></FONT><A href="http://java.sun.com/j2ee/1.4/download.html/#tutorial"></A>提供了实例代码的下载。</NOBR></DIV>
<DIV style="position:absolute;top:24503;left:166"><NOBR>本章将研究在JBoss中如何运行Duke应用。并且在扩充Duke应用的同时，还需要提供</NOBR></DIV>
<DIV style="position:absolute;top:24530;left:135"><NOBR>JBoss特定的配置信息和部署描述符。用户还需要下载本书附带的那些代码。如果还没有下</NOBR></DIV>
<DIV style="position:absolute;top:24550;left:135"><NOBR>载，则赶紧去JBoss文档页面下载，<A href="http://www.jboss.org/docs/index"></A><FONT color="#0000ff" face="Times"><A href="http://www.jboss.org/docs/index">http://www.jboss.org/docs/index</A></FONT><A href="http://www.jboss.org/docs/index"></A>。</NOBR></DIV>
<DIV style="position:absolute;top:24574;left:166"><NOBR>该教程使用了Apache Ant（<FONT color="#0000ff" face="Times"><A href="http://ant.apache.org/">http://ant.apache.org</A></FONT>）构建工具，用户应该下载并安装它。我</NOBR></DIV>
<DIV style="position:absolute;top:24597;left:135"><NOBR>们建议使用Ant  1.6.2 及后续版本。如今，Ant广泛应用于Java项目中。因此，如果用户还不</NOBR></DIV>
<DIV style="position:absolute;top:24620;left:135"><NOBR>熟悉它，则赶紧补上这一课。其中，Ant使用的默认构建文件名是build.xml，它含有供项目</NOBR></DIV>
<DIV style="position:absolute;top:24644;left:135"><NOBR>使用的一套目标（target），以自动完成构建任务。一般情况下，用户只需要在含有build.xml</NOBR></DIV>
<DIV style="position:absolute;top:24667;left:135"><NOBR>文件的目录中执行ant命令，这将使得默认目标会完成所需工作。</NOBR></DIV>
<DIV style="position:absolute;top:24693;left:166"><NOBR>J2EE Tutorial 将解释如何在 J2EE SDK RI 服务器中运行 Duke 银行应用。请记住，本书</NOBR></DIV>
<DIV style="position:absolute;top:24714;left:135"><NOBR>的目标是能够在 JBoss 中运行它。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:24759;left:135"><NOBR>3.2  区别</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:24803;left:166"><NOBR>J2EE 技术的设计初衷是，应用代码独立于所部署并运行的应用服务器。其中，用于 EJB</NOBR></DIV>
<DIV style="position:absolute;top:24823;left:135"><NOBR>和Web应用的ejb-jar.xml和web.xml部署描述符是J2EE规定的标准描述符，因此在不同J2EE</NOBR></DIV>
<DIV style="position:absolute;top:24847;left:135"><NOBR>容器之间不用更换它们。然而，为了将应用移植到 JBoss，用户还是需要注意一些事情的。</NOBR></DIV>
<DIV style="position:absolute;top:24870;left:135"><NOBR>尤其是，用户需要提供 JBoss 特定描述符，并且确保数据库脚本能够正常工作。</NOBR></DIV>
<DIV style="position:absolute;top:24917;left:135"><NOBR><B>3.2.1  </B>容器相关部署描述符</NOBR></DIV>
<DIV style="position:absolute;top:24960;left:166"><NOBR>容器相关信息通常是放置在外部 XML 描述符中，这些描述符将应用使用的逻辑信息（比</NOBR></DIV>
<DIV style="position:absolute;top:24983;left:135"><NOBR>如，JNDI 名字和安全性角色名）映射到服务器使用的实际值。JBoss 为应用的 EJB 和 Web</NOBR></DIV>
<DIV style="position:absolute;top:25006;left:135"><NOBR>模块分别使用了 jboss.xml 和 jboss-web.xml 描述符。同时，考虑到 Java 客户应用，JBoss 还</NOBR></DIV>
<DIV style="position:absolute;top:25030;left:135"><NOBR>提供了它们的客户版本，以同 J2EE application-client.xml 描述符一块使用。如果实体 Bean</NOBR></DIV>
<DIV style="position:absolute;top:25053;left:135"><NOBR>还使用了 CMP，则通过 jbosscmp-jdbc.xml 文件还能够配置 JBoss 持久化引擎。</NOBR></DIV>
<DIV style="position:absolute;top:25100;left:135"><NOBR><B>3.2.2  </B>数据库变更</NOBR></DIV>
<DIV style="position:absolute;top:25145;left:166"><NOBR>J2EE SDK 自带了 Cloudscape 数据库，这也是 J2EE Tutorial 使用的数据库。本书将使用</NOBR></DIV>
<DIV style="position:absolute;top:25169;left:135"><NOBR>JBoss 自带的嵌入式数据库，Hypersonic。</NOBR></DIV>
<DIV style="position:absolute;top:25190;left:166"><NOBR>实际情况下，将应用直接移植到不同的数据库并不是简单过程，尤其是应用使用了数据</NOBR></DIV>
<DIV style="position:absolute;top:25213;left:135"><NOBR>库的特定功能，比如序列号（Sequence）、存储过程、非标准 SQL。对于简单应用，移植工</NOBR></DIV>
<DIV style="position:absolute;top:25236;left:135"><NOBR>作相对简单。第 4 章内容在讨论 Duke 银行应用时，用户能够看到只需要对数据库脚本做少</NOBR></DIV>
<DIV style="position:absolute;top:25260;left:135"><NOBR>许的语法修改就能够满足要求。</NOBR></DIV>
<DIV style="position:absolute;top:25283;left:166"><NOBR>第 8 章内容，将讨论如何配置 JBoss，以使用不同的数据库。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:25435;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="21"><B>Page 21</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:25546;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:26579;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:26577;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:26595;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:26577;left:745"><NOBR>15</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:25570;left:135"><NOBR><B>3.2.3  </B>安全性配置</NOBR></DIV>
<DIV style="position:absolute;top:25615;left:166"><NOBR>J2EE 定义了应用中指定安全性约束的机制，但并没有给出具体服务器是如何实现和配</NOBR></DIV>
<DIV style="position:absolute;top:25636;left:135"><NOBR>置认证和访问控制机制（译者注：授权）的。因此，正如本书前面讨论的一样，JBoss 使用</NOBR></DIV>
<DIV style="position:absolute;top:25660;left:135"><NOBR>了 JAAS 以提供集成不同认证技术的可插入方式，供应用的认证和授权使用。同时，JBoss</NOBR></DIV>
<DIV style="position:absolute;top:25683;left:135"><NOBR>还提供了一套标准模块，即基于文件、数据库、LDAP 的安全性机制。其中，基于文件的方</NOBR></DIV>
<DIV style="position:absolute;top:25706;left:135"><NOBR>式最为简单，这也是本书使用的方式。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:25751;left:135"><NOBR>3.3  企业应用中的 J2EE </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:25792;left:166"><NOBR>本书给出的实例仅仅为用户提供熟悉和运行 JBoss 使用。因此，这里的应用绝对不是指</NOBR></DIV>
<DIV style="position:absolute;top:25815;left:135"><NOBR>导用户如何开发 J2EE 应用而言的，更何况这个主题在业界也没有统一的定论。比如，很多</NOBR></DIV>
<DIV style="position:absolute;top:25839;left:135"><NOBR>开发者反对使用 EJB，尤其是实体 Bean；再比如，BMP 的使用也是如此。当然，不同的</NOBR></DIV>
<DIV style="position:absolute;top:25865;left:135"><NOBR>Web 技术（可以认为，并不是每个人都喜欢 JSP）的使用也是一个争执不休的主题，并且存</NOBR></DIV>
<DIV style="position:absolute;top:25886;left:135"><NOBR>在大量的 Model-2 框架。Struts 应用较早，而且知名度最高，但是还有很有多批评的论调。</NOBR></DIV>
<DIV style="position:absolute;top:25909;left:166"><NOBR>如果用户刚启动某项目，则最好能够先评估一下现有的 Open Source 项目，然后看看它</NOBR></DIV>
<DIV style="position:absolute;top:25932;left:135"><NOBR>们各自的结构，最终选择适合于项目需求的框架。</NOBR></DIV>
<DIV style="position:absolute;top:25956;left:166"><NOBR>最后，我们也希望用户能够意识到 JBoss 的博大精深，本书给出的仅仅是冰山一角。JBoss</NOBR></DIV>
<DIV style="position:absolute;top:25979;left:135"><NOBR>还是一个持续发展的项目，对于未来，我们有很多宏伟的目标和计划。因此，请关注 JBoss</NOBR></DIV>
<DIV style="position:absolute;top:26003;left:135"><NOBR>的最新动向，哪怕是用户已经打算将所有的产品运行于稳定的 JBoss 4.0.x 之上。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:26698;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="22"><B>Page 22</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:26809;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:27842;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:27840;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:27858;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:27840;left:745"><NOBR>16</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:26858;left:135"><NOBR>第 4 章 Duke 银行应用</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:26916;left:166"><NOBR>至此，用户已经运行了 JBoss。本书将使用 J2EE  Tutorial 中的 Duke 银行应用，使得它</NOBR></DIV>
<DIV style="position:absolute;top:26940;left:135"><NOBR>能够运行在 JBoss 中。Duke 银行应用演示了如何使用若干 J2EE 技术，以实现简单的、在线</NOBR></DIV>
<DIV style="position:absolute;top:26963;left:135"><NOBR>银行应用。它使用 EJB 和 Web 组件（JSP 和 Servlet），并且将数据库作为持久源。其中，通</NOBR></DIV>
<DIV style="position:absolute;top:26987;left:135"><NOBR>过 BMP 管理持久化，这些 BMP 中含有 SQL 语句，从而能够操纵 DB。</NOBR></DIV>
<DIV style="position:absolute;top:27010;left:166"><NOBR>本书不会把重点放在 Duke 银行应用的功能，或者其实现上。而只是关注如何通过一步</NOBR></DIV>
<DIV style="position:absolute;top:27033;left:135"><NOBR>一步的指导，使得我们能够构建和运行基于 JBoss 的 Duke 银行应用。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:27078;left:135"><NOBR>4.1  构建应用</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:27119;left:166"><NOBR>用户应该准备好 J2EE 1.4 Tutorial，因为它含有 Duke 银行应用。首先，来看看构建和部</NOBR></DIV>
<DIV style="position:absolute;top:27143;left:135"><NOBR>署 Duke 银行应用。然后，再来仔细分析 JBoss 相关技术细节。</NOBR></DIV>
<DIV style="position:absolute;top:27190;left:135"><NOBR><B>4.1.1  </B>准备文件</NOBR></DIV>
<DIV style="position:absolute;top:27232;left:166"><NOBR>本文档发布的.zip 文件中包括了 jbossj2ee-src.zip。下载后，将其解压到 j2eetutorial14 目</NOBR></DIV>
<DIV style="position:absolute;top:27256;left:135"><NOBR>录，即添加到现有的 J2EE  Tutorial 文件中。所有的 Duke 银行应用代码位于 examples/bank</NOBR></DIV>
<DIV style="position:absolute;top:27279;left:135"><NOBR>子目录中。如果正常解压 jbossj2ee-src.zip，用户将看到 jboss-build.xml 文件。这是本书用于</NOBR></DIV>
<DIV style="position:absolute;top:27305;left:135"><NOBR>JBoss 版的 Duke 银行应用的 Ant 构建脚本。jbossj2ee-src.zip 并没有覆盖现有的 build.xml 文</NOBR></DIV>
<DIV style="position:absolute;top:27326;left:135"><NOBR>件，而是创建了 jboss-build.xml 文件。因此，需要使用 ant &ndash;f jboss-build.xml 执行 Ant 命令。</NOBR></DIV>
<DIV style="position:absolute;top:27349;left:166"><NOBR>在构建 Duke 银行应用之前，用户需要设置如下信息。即，编辑 j2eetutorial14 目录中的</NOBR></DIV>
<DIV style="position:absolute;top:27375;left:135"><NOBR>jboss-build.properties 文件，以定位 JBoss 4.0.4 的安装目录。其中，需要将 jboss.home 属性定</NOBR></DIV>
<DIV style="position:absolute;top:27396;left:135"><NOBR>位到 JBoss 4.0.4 安装的完整路径。如果将 JBoss 4.0.4 解压到 Windows 中的 C:/，则用户需要</NOBR></DIV>
<DIV style="position:absolute;top:27419;left:135"><NOBR>设置如下信息。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:27475;left:135"><NOBR># Set the path to the JBoss directory containing the JBoss application server </NOBR></DIV>
<DIV style="position:absolute;top:27499;left:135"><NOBR># (This is the one containing directories like &quot;bin&quot;, &quot;client&quot; etc.) </NOBR></DIV>
<DIV style="position:absolute;top:27522;left:135"><NOBR>jboss.home=C:/jboss-4.0.4 </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:27595;left:135"><NOBR><B>4.1.2  </B>编译 <B>Java </B>源文件</NOBR></DIV>
<DIV style="position:absolute;top:27637;left:166"><NOBR>打开命令行，然后转到 bank 目录。所有的 Ant 构建命令都是在此执行的。编译工作非</NOBR></DIV>
<DIV style="position:absolute;top:27661;left:135"><NOBR>常直观，即敲入如下命令，以调用 compile 目标。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:27716;left:135"><NOBR>ant -f jboss-build.xml compile</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:27765;left:166"><NOBR>如果没有出现错误，则用户将发现新创建的 build 目录，其中包含了.class 文件。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:27961;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="23"><B>Page 23</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:28072;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:29105;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:29103;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:29121;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:29103;left:745"><NOBR>17</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:28096;left:135"><NOBR><B>4.1.3  </B>打包 <B>EJB</B></NOBR></DIV>
<DIV style="position:absolute;top:28139;left:166"><NOBR>该应用含有一 EJB  jar，即 bank-ejb.jar。bank-ejb.jar 含有代码和描述符（ejb-jar.xml 和</NOBR></DIV>
<DIV style="position:absolute;top:28165;left:135"><NOBR>jboss.xml），以用于实体 Bean 和与客户交互的控制会话 Bean。Ant 目标 package-ejb 将会把</NOBR></DIV>
<DIV style="position:absolute;top:28186;left:135"><NOBR>创建的 bank-ejb.jar 存放到 jar 目录。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:28241;left:135"><NOBR>ant -f jboss-build.xml package-ejb </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:28314;left:135"><NOBR><B>4.1.4  </B>打包 <B>WAR </B>文件</NOBR></DIV>
<DIV style="position:absolute;top:28357;left:166"><NOBR>下个 Ant 目标是提供前端支持的 Web 应用，从而实现用户与业务组件（EJB）的交互。</NOBR></DIV>
<DIV style="position:absolute;top:28380;left:135"><NOBR>其中，src/web 目录含有的 Web 资源（JSP、图片、等等）原封不动地添加到存档中。Ant war</NOBR></DIV>
<DIV style="position:absolute;top:28403;left:135"><NOBR>任务也能够添加 WEB-INF 目录，Web 浏览器并不能直接与该目录中的内容进行交互，但是</NOBR></DIV>
<DIV style="position:absolute;top:28427;left:135"><NOBR>其内容是 Web 应用的组成部分。Web 应用具体包含的内容有部署描述符（web.xml 和</NOBR></DIV>
<DIV style="position:absolute;top:28453;left:135"><NOBR>jboss-web.xml）、类文件（比如，Servlet 和 EJB 接口）、其他 WAR 要求的库和 JSP 标签库描</NOBR></DIV>
<DIV style="position:absolute;top:28474;left:135"><NOBR>述符。Ant 目标 package-web 能够构建 Web 客户，即 WAR 文件。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:28529;left:135"><NOBR>ant -f jboss-build.xml package-web </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:28602;left:135"><NOBR><B>4.1.5  </B>打包 <B>Java </B>客户</NOBR></DIV>
<DIV style="position:absolute;top:28645;left:166"><NOBR>除了 Web 界面外，还存在单独运行的 Java 客户应用，用于管理顾客和账号。使用 Ant</NOBR></DIV>
<DIV style="position:absolute;top:28668;left:135"><NOBR>目标 package-client 如下：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:28724;left:135"><NOBR>ant -f jboss-build.xml package-client </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:28773;left:166"><NOBR>其生成的 app-client.jar 文件含有 application-client.xml 和 jboss-client.xml 描述符。另外，</NOBR></DIV>
<DIV style="position:absolute;top:28796;left:135"><NOBR>还包括 jndi.properties 文件。同时，客户 JAR 文件也将包含在 EAR 文件中，以作为附加的</NOBR></DIV>
<DIV style="position:absolute;top:28820;left:135"><NOBR>模块。</NOBR></DIV>
<DIV style="position:absolute;top:28867;left:135"><NOBR><B>4.1.6  </B>集成 <B>EAR </B></NOBR></DIV>
<DIV style="position:absolute;top:28912;left:166"><NOBR>EAR 文件是完整的应用，即含有 3 个 EJB 模块和 1 个 Web 模块。而且，它还必须包含</NOBR></DIV>
<DIV style="position:absolute;top:28935;left:135"><NOBR>application.xml 描述符。当然，可以单独部署 EJB 和 Web 应用模块，但是 EAR 提供了单一</NOBR></DIV>
<DIV style="position:absolute;top:28956;left:135"><NOBR>的、便于操作的部署单元。Ant 目标 assemble-app 将创建 JBossDukesBank.ear。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:29012;left:135"><NOBR>ant -f jboss-build.xml assemble-app </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:29224;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="24"><B>Page 24</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:29335;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:30368;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:30366;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:30384;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:30366;left:745"><NOBR>18</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:29359;left:135"><NOBR><B>4.1.7  </B>数据库</NOBR></DIV>
<DIV style="position:absolute;top:29402;left:166"><NOBR>在部署应用之前，用户需要完成其数据库配置。如果应用中使用了 CMP，则可以通过</NOBR></DIV>
<DIV style="position:absolute;top:29425;left:135"><NOBR>配置 CMP 引擎，使得在部署时自动创建表。否则，用户需要创建 SQL 脚本。对于存在初始</NOBR></DIV>
<DIV style="position:absolute;top:29449;left:135"><NOBR>化数据的 DB 而言，手工创建表也是较好的办法。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:29496;left:135"><NOBR><B>4.1.7.1  </B>启用 <B>HSQL MBean </B>和 <B>TCP/IP </B>连接</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:29541;left:166"><NOBR>HSQL 数据库能够以如下两种方式运行：进程内或客户-服务器（HSQL 文档称之为，服</NOBR></DIV>
<DIV style="position:absolute;top:29561;left:135"><NOBR>务器模式）。由于用户需要使用能够连接到 DB 的工具，以运行 SQL 脚本，因此必须保证数</NOBR></DIV>
<DIV style="position:absolute;top:29585;left:135"><NOBR>据库以客户-服务器模式运行，并能接受 TCP/IP 连接请求。默认时，最新的 JBoss 发布版将</NOBR></DIV>
<DIV style="position:absolute;top:29608;left:135"><NOBR>客户-服务器模式禁用了，这主要考虑到安全性要素，因为如果默认登陆账号没有修改将导</NOBR></DIV>
<DIV style="position:absolute;top:29632;left:135"><NOBR>致安全性问题。因此，用户需要打开设置了默认数据源的 deploy/hsqldb-ds.xml 文件。在文</NOBR></DIV>
<DIV style="position:absolute;top:29655;left:135"><NOBR>件的开始部分，能够看到 connection-url 元素。其取值必须是 jdbc:hsqldb:hsql://localhost:1701，</NOBR></DIV>
<DIV style="position:absolute;top:29678;left:135"><NOBR>而且其他 connection-url 元素值必须注释掉。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:29734;left:135"><NOBR>&lt;!-- The jndi name of the DataSource, it is prefixed with java:/ --&gt; </NOBR></DIV>
<DIV style="position:absolute;top:29758;left:135"><NOBR>&lt;!-- Datasources are not available outside the virtual machine --&gt; </NOBR></DIV>
<DIV style="position:absolute;top:29781;left:135"><NOBR>&lt;jndi-name&gt;DefaultDS&lt;/jndi-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:29828;left:135"><NOBR>&lt;!-- for tcp connection, allowing other processes to use the hsqldb</NOBR></DIV>
<DIV style="position:absolute;top:29851;left:135"><NOBR>database. This requires the org.jboss.jdbc.HypersonicDatabase mbean. --&gt; </NOBR></DIV>
<DIV style="position:absolute;top:29875;left:135"><NOBR><B>&lt;connection-url&gt;jdbc:hsqldb:hsql://localhost:1701&lt;/connection-url&gt; </B></NOBR></DIV>
<DIV style="position:absolute;top:29921;left:135"><NOBR>&lt;!-- for totally in-memory db, not saved when jboss stops. </NOBR></DIV>
<DIV style="position:absolute;top:29945;left:135"><NOBR>The org.jboss.jdbc.HypersonicDatabase mbean is unnecessary</NOBR></DIV>
<DIV style="position:absolute;top:29968;left:135"><NOBR>&lt;connection-url&gt;jdbc:hsqldb:.&lt;/connection-url&gt; </NOBR></DIV>
<DIV style="position:absolute;top:29992;left:135"><NOBR>--&gt; </NOBR></DIV>
<DIV style="position:absolute;top:30015;left:135"><NOBR>&lt;!-- for in-process db with file store, saved when jboss stops. The </NOBR></DIV>
<DIV style="position:absolute;top:30038;left:135"><NOBR>org.jboss.jdbc.HypersonicDatabase is unnecessary</NOBR></DIV>
<DIV style="position:absolute;top:30085;left:135"><NOBR>&lt;connection-url&gt;jdbc:hsqldb:${jboss.server.data.dir}/hypersonic/localDB </NOBR></DIV>
<DIV style="position:absolute;top:30109;left:135"><NOBR>&lt;/connection-url&gt; </NOBR></DIV>
<DIV style="position:absolute;top:30132;left:135"><NOBR>--&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:30181;left:166"><NOBR>然后，定位到文件的底端部分，用户应该可以找到 Hypersonic 服务的 MBean 声明。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:30237;left:135"><NOBR>&lt;mbean code=&quot;org.jboss.jdbc.HypersonicDatabase&quot; name=&quot;jboss:service=Hypersonic&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:30260;left:162"><NOBR>&lt;attribute name=&quot;Port&quot;&gt;1701&lt;/attribute&gt; </NOBR></DIV>
<DIV style="position:absolute;top:30284;left:162"><NOBR>&lt;attribute name=&quot;Silent&quot;&gt;true&lt;/attribute&gt;</NOBR></DIV>
<DIV style="position:absolute;top:30307;left:162"><NOBR>&lt;attribute name=&quot;Database&quot;&gt;default&lt;/attribute&gt; </NOBR></DIV>
<DIV style="position:absolute;top:30331;left:162"><NOBR>&lt;attribute name=&quot;Trace&quot;&gt;false&lt;/attribute&gt;</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:30487;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="25"><B>Page 25</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:30598;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:31631;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:31629;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:31647;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:31629;left:745"><NOBR>19</NOBR></DIV>
<DIV style="position:absolute;top:30629;left:162"><NOBR>&lt;attribute name=&quot;No_system_exit&quot;&gt;true&lt;/attribute&gt; </NOBR></DIV>
<DIV style="position:absolute;top:30652;left:135"><NOBR>&lt;/mbean&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:30701;left:166"><NOBR>用户必须确保，这部分内容没有被注释掉，因此 JBoss 才能够正确地启动 DB。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:30749;left:135"><NOBR><B>4.1.7.2  </B>创建数据库模式</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:30791;left:166"><NOBR>用户通过 sql 目录能够找到适合 HSQL 的 SQL 脚本。其中，jboss-build.xml 中的数据库</NOBR></DIV>
<DIV style="position:absolute;top:30814;left:135"><NOBR>任务能够同 HSQL 数据库进行交互。如果还未运行 JBoss，则请立即启动它吧，这样才能使</NOBR></DIV>
<DIV style="position:absolute;top:30837;left:135"><NOBR>用数据库。</NOBR></DIV>
<DIV style="position:absolute;top:30861;left:166"><NOBR>首先，可以使用 Ant 目标 db-create-table 创建所需的表。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:30917;left:135"><NOBR>ant -f jboss-build.xml db-create-table </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:30966;left:166"><NOBR>然后，运行 db-insert 目标，以初始化所需的数据。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:31021;left:135"><NOBR>ant -f jboss-build.xml db-insert </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:31070;left:166"><NOBR>最后，如果上述过程很顺利，则使用 Ant 目标 db-list 能够浏览到部分数据。其中，db-list</NOBR></DIV>
<DIV style="position:absolute;top:31094;left:135"><NOBR>目标列举出了某特定账号的交易信息。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:31150;left:135"><NOBR>ant -f jboss-build.xml db-list </NOBR></DIV>
<DIV style="position:absolute;top:31223;left:135"><NOBR><B>4.1.7.3 HSQL </B>数据库管理工具</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:31265;left:166"><NOBR>另外，如果用户启动 JMX 控制台 Web 应用，能够在域名 jboss 下看到 service=Hypersonic</NOBR></DIV>
<DIV style="position:absolute;top:31288;left:135"><NOBR>链接。如果看不到，则请用户务必确保 4.1.7.1 节中确实生效了 Hypersonic 服务。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:31750;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="26"><B>Page 26</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:31861;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
<DIV style="position:absolute;top:32328;left:368"><NOBR>图 4-1 HSQL 数据库管理器</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:32351;left:166"><NOBR>通过单击上述链接，用户能够使用到 Hypersonic MBean 服务提供的 HSQL 数据库管理</NOBR></DIV>
<DIV style="position:absolute;top:32374;left:135"><NOBR>功能。具体步骤如下：将屏幕滚动到页面底端，然后单击用于 startDatabaseManager()操作的</NOBR></DIV>
<DIV style="position:absolute;top:32400;left:135"><NOBR>invoke 按钮，进而启动了 HSQL 管理器，即用户能够直接操作数据库的、基于图形用户界</NOBR></DIV>
<DIV style="position:absolute;top:32421;left:135"><NOBR>面的 Java 应用。</NOBR></DIV>
<DIV style="position:absolute;top:32468;left:135"><NOBR><B>4.1.8  </B>部署应用</NOBR></DIV>
<DIV style="position:absolute;top:32510;left:166"><NOBR>部署基于 JBoss 的应用很简单，用户只需要将 EAR 文件拷贝到 deploy 目录即可。通过</NOBR></DIV>
<DIV style="position:absolute;top:32536;left:135"><NOBR>Ant 目标 deploy 能够完成应用的部署工作。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:32590;left:135"><NOBR>ant -f jboss-build.xml deploy</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:32639;left:166"><NOBR>如下给出了示例（作了部分裁减，而且同用户所看到的实际输出会有所差别）。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:32694;left:135"><NOBR>18:07:53,923 INFO  [EARDeployer] Init J2EE application: </NOBR></DIV>
<DIV style="position:absolute;top:32718;left:135"><NOBR>file:/private/tmp/jboss-4.0.4/server/default/deploy/JBossDukesBank.ear </NOBR></DIV>
<DIV style="position:absolute;top:32741;left:135"><NOBR>18:07:55,024 INFO  [EjbModule] Deploying CustomerBean </NOBR></DIV>
<DIV style="position:absolute;top:32765;left:135"><NOBR>18:07:55,103 INFO  [EjbModule] Deploying AccountBean </NOBR></DIV>
<DIV style="position:absolute;top:32788;left:135"><NOBR>18:07:55,142 INFO  [EjbModule] Deploying TxBean </NOBR></DIV>
<DIV style="position:absolute;top:32811;left:135"><NOBR>18:07:55,403 INFO  [EjbModule] Deploying NextIdBean </NOBR></DIV>
<DIV style="position:absolute;top:32835;left:135"><NOBR>18:07:55,439 INFO  [EjbModule] Deploying AccountControllerBean </NOBR></DIV>
<DIV style="position:absolute;top:32858;left:135"><NOBR>18:07:55,478 INFO  [EjbModule] Deploying CustomerControllerBean </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:32894;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:32892;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:32910;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:32892;left:745"><NOBR>20</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:33013;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="27"><B>Page 27</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:33124;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
<DIV style="position:absolute;top:33155;left:135"><NOBR>18:07:55,503 INFO  [EjbModule] Deploying TxControllerBean</NOBR></DIV>
<DIV style="position:absolute;top:33178;left:135"><NOBR>18:07:56,950 INFO  [EJBDeployer] Deployed: file:/private/tmp/jboss-4.0.4/server/default/t </NOBR></DIV>
<DIV style="position:absolute;top:33201;left:135"><NOBR>mp/deploy/tmp15097JBossDukesBank.ear-contents/bank-ejb.jar</NOBR></DIV>
<DIV style="position:absolute;top:33225;left:135"><NOBR>18:07:57,267 INFO  [TomcatDeployer] deploy, ctxPath=/bank, warUrl=file:/private/tmp/jboss </NOBR></DIV>
<DIV style="position:absolute;top:33248;left:135"><NOBR>-4.0.4/server/default/tmp/deploy/tmp15097JBossDukesBank.ear-contents/web-client.war/ </NOBR></DIV>
<DIV style="position:absolute;top:33272;left:135"><NOBR>18:08:00,784 INFO  [EARDeployer] Started J2EE application: file:/private/tmp/jboss-4.0.4/ </NOBR></DIV>
<DIV style="position:absolute;top:33295;left:135"><NOBR>server/default/deploy/JBossDukesBank.ear </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:33344;left:166"><NOBR>如果存在错误或异常信息，则请注意错误信息，并确认导致错误的原因（比如，部署某</NOBR></DIV>
<DIV style="position:absolute;top:33367;left:135"><NOBR>特定 EJB 时，或 Web 应用等等）。请检查 EAR、WAR、EJB jar 文件的完整性，比如所有所</NOBR></DIV>
<DIV style="position:absolute;top:33391;left:135"><NOBR>需的组件（类、部署描述符等等）是否都存在。</NOBR></DIV>
<DIV style="position:absolute;top:33414;left:166"><NOBR>如果应用已经部署，则用户可以放心地再次部署它。如果需要卸载应用，则只需要将相</NOBR></DIV>
<DIV style="position:absolute;top:33438;left:135"><NOBR>应的存档从 deploy 目录删除即可。当然，JBoss 服务器始终不需要重启。如果一切都正常，</NOBR></DIV>
<DIV style="position:absolute;top:33461;left:135"><NOBR>并无异常抛出，则通过 Web 浏览器打开如下 URL：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:13px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:33511;left:135"><NOBR><A href="http://localhost:8080/bank/main">http://localhost:8080/bank/main</A></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:33555;left:166"><NOBR>用户将浏览到应用登陆界面。同 J2EE Tutorial 给出的一样，用户通过顾客 ID（200）和</NOBR></DIV>
<DIV style="position:absolute;top:33578;left:135"><NOBR>密码（j2ee）能够登陆进入系统，见图 4-2。如果出现错误，则请检查 4.1.7.1 节设置的数据</NOBR></DIV>
<DIV style="position:absolute;top:33601;left:135"><NOBR>库是否正常工作。尤其是，需要确保 connection-url 没问题。然后，需要确保正确地初始化</NOBR></DIV>
<DIV style="position:absolute;top:33625;left:135"><NOBR>了数据库。</NOBR></DIV>
<DIV style="position:absolute;top:33648;left:166"><NOBR>当然，用户使用 Ant 目标 run-client 还能够启动单独的 Java 客户应用。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:33704;left:135"><NOBR>ant -f jboss-build.xml run-client</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:33753;left:166"><NOBR>这是基于 Swing 的 Java 应用，以实现对顾客和账号的管理。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:34058;left:398"><NOBR>图 4-2 Duke 银行</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:34157;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:34155;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:34173;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:34155;left:745"><NOBR>21</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:34276;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="28"><B>Page 28</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:34387;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:35420;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:35418;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:35436;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:35418;left:745"><NOBR>22</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:34411;left:135"><NOBR>4.2 JNDI 和 Java 客户</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:34451;left:166"><NOBR>另外，花些精力研究单独 Java 客户应用是如何使用 JNDI，还是很值得的。本实例使用</NOBR></DIV>
<DIV style="position:absolute;top:34475;left:135"><NOBR>了 J2EE 应用客户框架，它引入了客户端本地环境命名上下文的概念，即能够解析前缀为</NOBR></DIV>
<DIV style="position:absolute;top:34501;left:135"><NOBR>java:/comp/env 的 JNDI 名字。这同服务器端使用 JNDI 很类似，因此用户能够避免在客户应</NOBR></DIV>
<DIV style="position:absolute;top:34522;left:135"><NOBR>用中硬编码 JNDI 名。用户通过使用专有 jboss-client.xml 部署描述符能够解析标准</NOBR></DIV>
<DIV style="position:absolute;top:34548;left:135"><NOBR>application-client.xml 部署描述符中的 JNDI 引用名。详情请参考，3.2.1 节。</NOBR></DIV>
<DIV style="position:absolute;top:34592;left:135"><NOBR><B>4.2.1 jndi.properties </B>文件</NOBR></DIV>
<DIV style="position:absolute;top:34635;left:166"><NOBR>为查找 JNDI 服务器，用户需要使用标准 Java 属性。具体细节及其工作机制，请用户参</NOBR></DIV>
<DIV style="position:absolute;top:34658;left:135"><NOBR>考 JDK API 文档对 javax.naming.Context 类的解析。Java 属性可以通过两种方式提供。其一，</NOBR></DIV>
<DIV style="position:absolute;top:34681;left:135"><NOBR>硬编码；其二，将 jndi.properties 文件放置在应用类路径中。比如，本实例使用的 jndi.properties</NOBR></DIV>
<DIV style="position:absolute;top:34705;left:135"><NOBR>文件如下：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:34761;left:135"><NOBR>java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory</NOBR></DIV>
<DIV style="position:absolute;top:34784;left:135"><NOBR>java.naming.provider.url=jnp://localhost:1099 </NOBR></DIV>
<DIV style="position:absolute;top:34807;left:135"><NOBR>java.naming.factory.url.pkgs=org.jboss.naming.client </NOBR></DIV>
<DIV style="position:absolute;top:34831;left:135"><NOBR>j2ee.clientName=bank-client </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:34880;left:166"><NOBR>其中，前三个是标准属性，供 JBoss  JNDI 实现使用。通过 j2ee.clientName 属性能够标</NOBR></DIV>
<DIV style="position:absolute;top:34903;left:135"><NOBR>识客户应用部署信息，并告知服务器端。j2ee.clientName 名必须匹配 jboss-client.xml 描述符</NOBR></DIV>
<DIV style="position:absolute;top:34927;left:135"><NOBR>中 jndi-name 指定的名字。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:34983;left:135"><NOBR>&lt;jboss-client&gt; </NOBR></DIV>
<DIV style="position:absolute;top:35006;left:162"><NOBR>&lt;jndi-name&gt;<B>bank-client</B>&lt;/jndi-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:35029;left:162"><NOBR>&lt;ejb-ref&gt;</NOBR></DIV>
<DIV style="position:absolute;top:35053;left:189"><NOBR>&lt;ejb-ref-name&gt;ejb/customerController&lt;/ejb-ref-name&gt;</NOBR></DIV>
<DIV style="position:absolute;top:35076;left:189"><NOBR>&lt;jndi-name&gt;MyCustomerController&lt;/jndi-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:35099;left:162"><NOBR>&lt;/ejb-ref&gt; </NOBR></DIV>
<DIV style="position:absolute;top:35123;left:162"><NOBR>&lt;ejb-ref&gt;</NOBR></DIV>
<DIV style="position:absolute;top:35146;left:189"><NOBR>&lt;ejb-ref-name&gt;ejb/accountController&lt;/ejb-ref-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:35170;left:189"><NOBR>&lt;jndi-name&gt;MyAccountController&lt;/jndi-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:35193;left:162"><NOBR>&lt;/ejb-ref&gt; </NOBR></DIV>
<DIV style="position:absolute;top:35217;left:135"><NOBR>&lt;/jboss-client&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:35266;left:166"><NOBR>当然，如果用户只需要构建简单的 Web 应用，则不需要顾及远程客户的情形。</NOBR></DIV>
<DIV style="position:absolute;top:35313;left:135"><NOBR><B>4.2.2 JMX </B>控制台中的应用 <B>JNDI </B>信息</NOBR></DIV>
<DIV style="position:absolute;top:35355;left:166"><NOBR>既然我们在此阐述 JNDI 主题，则让我们再次回到 JBoss JMX 控制台，来看看通过它能</NOBR></DIV>
<DIV style="position:absolute;top:35378;left:135"><NOBR>够浏览到应用的哪些信息。请单击 service=JNDIView 链接，然后单击 list()操作，即显示服</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:35539;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="29"><B>Page 29</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:35650;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:36683;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:36681;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:36699;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:36681;left:745"><NOBR>23</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:35672;left:135"><NOBR>务器的 JNDI 树。用户应用能够浏览到如下几方面的信息。其一，位于列表顶端，为 Duke</NOBR></DIV>
<DIV style="position:absolute;top:35695;left:135"><NOBR>银行应用提供的 EJB 模块；其二，各个 EJB 的各自私有环境命名上下文；其三，各个 EJB</NOBR></DIV>
<DIV style="position:absolute;top:35718;left:135"><NOBR>连接到 JBoss 服务器的入口名。下面给出了整理过的 JNDI 列表：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:35774;left:135"><NOBR>Ejb Module: bank-ejb.jar </NOBR></DIV>
<DIV style="position:absolute;top:35821;left:135"><NOBR>java:comp namespace of the CustomerBean bean:</NOBR></DIV>
<DIV style="position:absolute;top:35844;left:148"><NOBR>+- env (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:35891;left:135"><NOBR>java:comp namespace of the AccountBean bean:</NOBR></DIV>
<DIV style="position:absolute;top:35915;left:148"><NOBR>+- env (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:35961;left:135"><NOBR>java:comp namespace of the TxBean bean: </NOBR></DIV>
<DIV style="position:absolute;top:35985;left:148"><NOBR>+- env (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36032;left:135"><NOBR>java:comp namespace of the NextIdBean bean: </NOBR></DIV>
<DIV style="position:absolute;top:36055;left:148"><NOBR>+- env (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36102;left:135"><NOBR>java:comp namespace of the AccountControllerBean bean: </NOBR></DIV>
<DIV style="position:absolute;top:36125;left:148"><NOBR>+- env (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36149;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36149;left:171"><NOBR>+- ejb (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36172;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36172;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36172;left:194"><NOBR>+- tx[link -&gt; MyTx] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36195;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36195;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36195;left:194"><NOBR>+- nextId[link -&gt; MyNextId] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36219;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36219;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36219;left:194"><NOBR>+- account[link -&gt; MyAccount] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36242;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36242;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36242;left:194"><NOBR>+- customer[link -&gt; MyCustomer] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36289;left:135"><NOBR>java:comp namespace of the CustomerControllerBean bean: </NOBR></DIV>
<DIV style="position:absolute;top:36312;left:148"><NOBR>+- env (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36336;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36336;left:171"><NOBR>+- ejb (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36359;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36359;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36359;left:194"><NOBR>+- tx[link -&gt; MyTx] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36383;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36383;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36383;left:194"><NOBR>+- nextId[link -&gt; MyNextId] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36406;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36406;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36406;left:194"><NOBR>+- account[link -&gt; MyAccount] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36429;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36429;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36429;left:194"><NOBR>+- customer[link -&gt; MyCustomer] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36476;left:135"><NOBR>java:comp namespace of the TxControllerBean bean: </NOBR></DIV>
<DIV style="position:absolute;top:36500;left:148"><NOBR>+- env (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36523;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36523;left:171"><NOBR>+- ejb (class: org.jnp.interfaces.NamingContext) </NOBR></DIV>
<DIV style="position:absolute;top:36546;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36546;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36546;left:194"><NOBR>+- tx[link -&gt; MyTx] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36570;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36570;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36570;left:194"><NOBR>+- nextId[link -&gt; MyNextId] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36593;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36593;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36593;left:194"><NOBR>+- account[link -&gt; MyAccount] (class: javax.naming.LinkRef) </NOBR></DIV>
<DIV style="position:absolute;top:36617;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36617;left:171"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:36617;left:194"><NOBR>+- customer[link -&gt; MyCustomer] (class: javax.naming.LinkRef) </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:36802;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="30"><B>Page 30</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:36913;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:37946;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:37944;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:37962;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:37944;left:745"><NOBR>24</NOBR></DIV>
<DIV style="position:absolute;top:36944;left:135"><NOBR>java: Namespace</NOBR></DIV>
<DIV style="position:absolute;top:36973;left:148"><NOBR>+- XAConnectionFactory (class: org.jboss.mq.SpyXAConnectionFactory) </NOBR></DIV>
<DIV style="position:absolute;top:36996;left:148"><NOBR>+- DefaultDS (class: org.jboss.resource.adapter.jdbc.WrapperDataSource) </NOBR></DIV>
<DIV style="position:absolute;top:37019;left:148"><NOBR>+- SecurityProxyFactory (class: org.jboss.security.SubjectSecurityProxyFactory) </NOBR></DIV>
<DIV style="position:absolute;top:37043;left:148"><NOBR>+- DefaultJMSProvider (class: org.jboss.jms.jndi.JNDIProviderAdapter) </NOBR></DIV>
<DIV style="position:absolute;top:37066;left:148"><NOBR>+- comp (class: javax.naming.Context) </NOBR></DIV>
<DIV style="position:absolute;top:37090;left:148"><NOBR>+- JmsXA (class: org.jboss.resource.adapter.jms.JmsConnectionFactoryImpl) </NOBR></DIV>
<DIV style="position:absolute;top:37113;left:148"><NOBR>+- ConnectionFactory (class: org.jboss.mq.SpyConnectionFactory) </NOBR></DIV>
<DIV style="position:absolute;top:37136;left:148"><NOBR>+- jaas (class: javax.naming.Context) </NOBR></DIV>
<DIV style="position:absolute;top:37160;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:37160;left:171"><NOBR>+- HsqlDbRealm (class: org.jboss.security.plugins.SecurityDomainContext)</NOBR></DIV>
<DIV style="position:absolute;top:37183;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:37183;left:171"><NOBR>+- jmx-console (class: org.jboss.security.plugins.SecurityDomainContext)</NOBR></DIV>
<DIV style="position:absolute;top:37207;left:148"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:37207;left:171"><NOBR>+- jbossmq (class: org.jboss.security.plugins.SecurityDomainContext)</NOBR></DIV>
<DIV style="position:absolute;top:37230;left:148"><NOBR>| </NOBR></DIV>
<DIV style="position:absolute;top:37230;left:171"><NOBR>+- JmsXARealm (class: org.jboss.security.plugins.SecurityDomainContext) </NOBR></DIV>
<DIV style="position:absolute;top:37253;left:148"><NOBR>+- timedCacheFactory (class: javax.naming.Context) </NOBR></DIV>
<DIV style="position:absolute;top:37277;left:196"><NOBR>Failed to lookup: timedCacheFactory, errmsg=org.jboss.util.TimedCachePolicy</NOBR></DIV>
<DIV style="position:absolute;top:37300;left:148"><NOBR>+- TransactionPropagationContextExporter </NOBR></DIV>
<DIV style="position:absolute;top:37324;left:196"><NOBR>(class: org.jboss.tm.TransactionPropagationContextFactory) </NOBR></DIV>
<DIV style="position:absolute;top:37347;left:148"><NOBR>+- StdJMSPool (class: org.jboss.jms.asf.StdServerSessionPoolFactory) </NOBR></DIV>
<DIV style="position:absolute;top:37370;left:148"><NOBR>+- Mail (class: javax.mail.Session) </NOBR></DIV>
<DIV style="position:absolute;top:37394;left:148"><NOBR>+- TransactionPropagationContextImporter </NOBR></DIV>
<DIV style="position:absolute;top:37417;left:196"><NOBR>(class: org.jboss.tm.TransactionPropagationContextImporter) </NOBR></DIV>
<DIV style="position:absolute;top:37441;left:148"><NOBR>+- TransactionManager (class: org.jboss.tm.TxManager) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:37490;left:166"><NOBR>如果将屏幕滚动到底端，即java:命名空间</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:8px;font-family:Times">
<DIV style="position:absolute;top:37489;left:451"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#30">4</A></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:37490;left:458"><NOBR>之下，用户能够浏览到活动安全性管理器列</NOBR></DIV>
<DIV style="position:absolute;top:37513;left:135"><NOBR>表。如下给出了绑定的安全性域名字。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:37569;left:135"><NOBR>+- jaas (class: javax.naming.Context) </NOBR></DIV>
<DIV style="position:absolute;top:37592;left:135"><NOBR>| +- dukesbank (class: org.jboss.security.plugins.SecurityDomainContext) </NOBR></DIV>
<DIV style="position:absolute;top:37616;left:135"><NOBR>| +- JmsXARealm (class: org.jboss.security.plugins.SecurityDomainContext) </NOBR></DIV>
<DIV style="position:absolute;top:37639;left:135"><NOBR>| +- jbossmq (class: org.jboss.security.plugins.SecurityDomainContext) </NOBR></DIV>
<DIV style="position:absolute;top:37663;left:135"><NOBR>| +- HsqlDbRealm (class: org.jboss.security.plugins.SecurityDomainContext) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:37712;left:166"><NOBR>请注意，只有需要某安全性域时，它才会被创建，因此如果应用使用了 dukesbank 域，</NOBR></DIV>
<DIV style="position:absolute;top:37735;left:135"><NOBR>并试图登陆到系统中，则才能看到 dukesbank 入口。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:37780;left:135"><NOBR>4.3  安全性</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:37821;left:166"><NOBR>初次访问 Duke 银行应用时，用户需要依据应用提供的简单登陆表单给出用户名和密码。</NOBR></DIV>
<DIV style="position:absolute;top:37844;left:135"><NOBR>与此同时，然而为使用 J2EE 安全性，开发者需要在应用服务器中配置相应的信息。J2EE 规</NOBR></DIV>
<DIV style="position:absolute;top:37867;left:135"><NOBR>范本身并不关注认证逻辑的具体行为。实际上，安全性域控制了认证机制。本节将研究 Duke</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:7px;font-family:Times">
<DIV style="position:absolute;top:37907;left:135"><NOBR>4</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:37910;left:143"><NOBR>java:命名空间中的名字仅供运行JBoss的JVM内部使用。远程客户不能够使用它们，除非使用了全局命名</NOBR></DIV>
<DIV style="position:absolute;top:37926;left:135"><NOBR>空间中的JNDI名字。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:38065;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="31"><B>Page 31</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:38176;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:39209;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:39207;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:39225;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:39207;left:745"><NOBR>25</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:38198;left:135"><NOBR>银行应用中安全性域的配置。</NOBR></DIV>
<DIV style="position:absolute;top:38245;left:135"><NOBR><B>4.3.1  </B>配置安全性域</NOBR></DIV>
<DIV style="position:absolute;top:38287;left:166"><NOBR>通常，用于 Web 和 EJB 层的、标准的 J2EE 安全性声明需要借助于 web.xml 和 ejb-jar.xml</NOBR></DIV>
<DIV style="position:absolute;top:38310;left:135"><NOBR>部署描述符指定。然而，为配置使用 JBoss 安全性，开发者还需要提供 JBoss 专有的部署描</NOBR></DIV>
<DIV style="position:absolute;top:38334;left:135"><NOBR>述符。</NOBR></DIV>
<DIV style="position:absolute;top:38357;left:166"><NOBR>通过 JBoss 具体部署描述符能够完成应用的安全性配置。为保护 Web 应用，用户需要</NOBR></DIV>
<DIV style="position:absolute;top:38381;left:135"><NOBR>将 security-domain 元素包含在 jboss-web.xml 中。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:38437;left:135"><NOBR>&lt;jboss-web&gt; </NOBR></DIV>
<DIV style="position:absolute;top:38460;left:162"><NOBR>&lt;security-domain&gt;java:/jaas/dukesbank&lt;/security-domain&gt;</NOBR></DIV>
<DIV style="position:absolute;top:38483;left:162"><NOBR>...</NOBR></DIV>
<DIV style="position:absolute;top:38507;left:135"><NOBR>&lt;/jboss-web&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:38556;left:166"><NOBR>如果需要在 EJB 层实现访问控制，则用户也可以对 jboss.xml 文件添加同样的</NOBR></DIV>
<DIV style="position:absolute;top:38582;left:135"><NOBR>security-domain 元素。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:38635;left:135"><NOBR>&lt;jboss&gt;</NOBR></DIV>
<DIV style="position:absolute;top:38658;left:162"><NOBR>&lt;security-domain&gt;java:/jaas/dukesbank&lt;/security-domain&gt;</NOBR></DIV>
<DIV style="position:absolute;top:38705;left:162"><NOBR>&lt;enterprise-beans&gt; </NOBR></DIV>
<DIV style="position:absolute;top:38729;left:189"><NOBR>...</NOBR></DIV>
<DIV style="position:absolute;top:38752;left:162"><NOBR>&lt;/enterprise-beans&gt; </NOBR></DIV>
<DIV style="position:absolute;top:38776;left:135"><NOBR>&lt;/jboss&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:38824;left:166"><NOBR>这将意味着，JBoss 会在 JNDI 名&ldquo;java:/jaas/dukesbank&rdquo;下为 Duke 银行应用绑定安全</NOBR></DIV>
<DIV style="position:absolute;top:38848;left:135"><NOBR>性管理器实例。所有的安全性域配置在 java:/jaas 上下文，因此 Duke 银行应用实际上使用了</NOBR></DIV>
<DIV style="position:absolute;top:38874;left:135"><NOBR>dukesbank 安全性域。</NOBR></DIV>
<DIV style="position:absolute;top:38895;left:166"><NOBR>用户通过 conf/login-config.xml 文件能够配置它。但是，如果浏览 Duke 银行应用，并不</NOBR></DIV>
<DIV style="position:absolute;top:38918;left:135"><NOBR>能够找到 dukesbank 安全性域。一旦 JBoss 寻找不到相应的安全性域，则它会使用 other 域。</NOBR></DIV>
<DIV style="position:absolute;top:38941;left:135"><NOBR>其中，other 域的具体配置如下。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:38997;left:135"><NOBR>&lt;application-policy name=&quot;other&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:39021;left:162"><NOBR>&lt;authentication&gt; </NOBR></DIV>
<DIV style="position:absolute;top:39044;left:189"><NOBR>&lt;login-module code=&quot;org.jboss.security.auth.spi.UsersRolesLoginModule&quot; </NOBR></DIV>
<DIV style="position:absolute;top:39067;left:304"><NOBR>flag=&quot;required&quot; /&gt;</NOBR></DIV>
<DIV style="position:absolute;top:39091;left:162"><NOBR>&lt;/authentication&gt;</NOBR></DIV>
<DIV style="position:absolute;top:39114;left:135"><NOBR>&lt;/application-policy&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:39163;left:166"><NOBR>此处，登陆模块使用本地属性文件来认证应用。JBoss 借助于两个文件进行认证工作。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:39328;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="32"><B>Page 32</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:39439;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:40472;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:40470;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:40488;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:40470;left:745"><NOBR>26</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:39461;left:135"><NOBR>其一，提供用户名、密码；其二，提供角色。比如，如下是 Duke 银行应用的 users.properties。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:39516;left:135"><NOBR># users.properties file for use with the UsersRolesLoginModule </NOBR></DIV>
<DIV style="position:absolute;top:39540;left:135"><NOBR># Format is: </NOBR></DIV>
<DIV style="position:absolute;top:39563;left:135"><NOBR># </NOBR></DIV>
<DIV style="position:absolute;top:39587;left:135"><NOBR># username=password </NOBR></DIV>
<DIV style="position:absolute;top:39634;left:135"><NOBR>200=j2ee </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:39682;left:166"><NOBR>属性文件的格式非常简单。各行采用 username=password 的形式。因此，上述文件定义</NOBR></DIV>
<DIV style="position:absolute;top:39706;left:135"><NOBR>了 200 用户，其密码为 j2ee。这就是用户访问 Duke 银行应用的帐号。如果用户修改了上述</NOBR></DIV>
<DIV style="position:absolute;top:39729;left:135"><NOBR>密码，则需要重新部署 Web 应用。</NOBR></DIV>
<DIV style="position:absolute;top:39753;left:166"><NOBR>当然，用户名和密码不是驱动 J2EE 应用安全性的唯一因素。部署者需要将用户指定角</NOBR></DIV>
<DIV style="position:absolute;top:39776;left:135"><NOBR>色，因此应用会根据用户的角色信息来决定用户是否有权访问目标资源。只有是 Duke 银行</NOBR></DIV>
<DIV style="position:absolute;top:39799;left:135"><NOBR>应用的客户才有权访问它，即通过 bankCustomer 角色。下面给出了 roles.properties 文件，用</NOBR></DIV>
<DIV style="position:absolute;top:39823;left:135"><NOBR>于指定 200 用户的角色。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:39879;left:135"><NOBR># A roles.properties file for use with the UsersRolesLoginModule </NOBR></DIV>
<DIV style="position:absolute;top:39902;left:135"><NOBR># </NOBR></DIV>
<DIV style="position:absolute;top:39925;left:135"><NOBR># Format is </NOBR></DIV>
<DIV style="position:absolute;top:39949;left:135"><NOBR># </NOBR></DIV>
<DIV style="position:absolute;top:39972;left:135"><NOBR># username=role1,role2,role3 </NOBR></DIV>
<DIV style="position:absolute;top:40019;left:135"><NOBR>200=bankCustomer </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:40068;left:166"><NOBR>为让 Duke 银行应用使用 dukesbank 安全性域，而不是使用服务器提供的默认安全性域，</NOBR></DIV>
<DIV style="position:absolute;top:40091;left:135"><NOBR>开发者还需定义出 dukesbank 安全性域。因此，开发者需要往 conf/login-config.xml 文件中添</NOBR></DIV>
<DIV style="position:absolute;top:40115;left:135"><NOBR>加如下内容：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:40171;left:135"><NOBR>&lt;application-policy name=&quot;dukesbank&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:40194;left:162"><NOBR>&lt;authentication&gt; </NOBR></DIV>
<DIV style="position:absolute;top:40218;left:189"><NOBR>&lt;login-module code=&quot;org.jboss.security.auth.spi.UsersRolesLoginModule&quot; </NOBR></DIV>
<DIV style="position:absolute;top:40241;left:304"><NOBR>flag=&quot;required&quot; /&gt;</NOBR></DIV>
<DIV style="position:absolute;top:40264;left:162"><NOBR>&lt;/authentication&gt;</NOBR></DIV>
<DIV style="position:absolute;top:40288;left:135"><NOBR>&lt;/application-policy&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:40337;left:166"><NOBR>注意，需要重启 JBoss，否则修改后的 login-config.xml 不会生效。</NOBR></DIV>
<DIV style="position:absolute;top:40384;left:135"><NOBR><B>4.3.2  </B>使用 <B>RDBMS </B>实现安全性</NOBR></DIV>
<DIV style="position:absolute;top:40426;left:166"><NOBR>实际应用中，将用户、角色信息存储在数据库中很常见。JBoss 提供了称之为</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:40591;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="33"><B>Page 33</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:40702;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:41735;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:41733;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:41751;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:41733;left:745"><NOBR>27</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:40726;left:135"><NOBR>DatabaseServerLoginModule 的登陆模块，用户只需要做少许的配置即可使用它。用户需要提</NOBR></DIV>
<DIV style="position:absolute;top:40747;left:135"><NOBR>供如下内容：</NOBR></DIV>
<DIV style="position:absolute;top:40770;left:198"><NOBR>获得用户密码的 SQL 查询语句</NOBR></DIV>
<DIV style="position:absolute;top:40794;left:198"><NOBR>获得用户角色的 SQL 查询语句</NOBR></DIV>
<DIV style="position:absolute;top:40817;left:198"><NOBR>待使用数据源的 JNDI 名</NOBR></DIV>
<DIV style="position:absolute;top:40841;left:166"><NOBR>因此，可以使用现有的数据库模式。现假定：使用如下 SQL 语句创建安全性相关的数</NOBR></DIV>
<DIV style="position:absolute;top:40864;left:135"><NOBR>据库表。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:40920;left:135"><NOBR>CREATE TABLE Users(username VARCHAR(64) PRIMARY KEY, passwd VARCHAR(64)) </NOBR></DIV>
<DIV style="position:absolute;top:40943;left:135"><NOBR>CREATE TABLE UserRoles(username VARCHAR(64), userRoles VARCHAR(32)) </NOBR></DIV>
<DIV style="position:absolute;top:40990;left:135"><NOBR>INSERT INTO Users VALUES (&#39;200&#39;,&#39;j2ee&#39;) </NOBR></DIV>
<DIV style="position:absolute;top:41014;left:135"><NOBR>INSERT INTO UserRoles VALUES (&#39;200&#39;,&#39;bankCustomer&#39;) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:41062;left:166"><NOBR>然后，将它们作为 Duke 银行应用的安全性数据库。需要对 login-config.xml 作如下修改：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:41118;left:135"><NOBR>&lt;application-policy name=&quot;dukesbank&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:41142;left:162"><NOBR>&lt;authentication&gt; </NOBR></DIV>
<DIV style="position:absolute;top:41165;left:189"><NOBR>&lt;login-module code=&quot;org.jboss.security.auth.spi.DatabaseServerLoginModule&quot; </NOBR></DIV>
<DIV style="position:absolute;top:41188;left:304"><NOBR>flag=&quot;required&quot;&gt;</NOBR></DIV>
<DIV style="position:absolute;top:41212;left:216"><NOBR>&lt;module-option name=&quot;dsJndiName&quot;&gt;java:/DefaultDS&lt;/module-option&gt; </NOBR></DIV>
<DIV style="position:absolute;top:41235;left:216"><NOBR>&lt;module-option name=&quot;principalsQuery&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:41259;left:243"><NOBR>select passwd from Users where username=?</NOBR></DIV>
<DIV style="position:absolute;top:41282;left:216"><NOBR>&lt;/module-option&gt;</NOBR></DIV>
<DIV style="position:absolute;top:41305;left:216"><NOBR>&lt;module-option name=&quot;rolesQuery&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:41329;left:243"><NOBR>select userRoles,&#39;Roles&#39; from UserRoles where username=?</NOBR></DIV>
<DIV style="position:absolute;top:41352;left:216"><NOBR>&lt;/module-option&gt;</NOBR></DIV>
<DIV style="position:absolute;top:41376;left:189"><NOBR>&lt;/login-module&gt; </NOBR></DIV>
<DIV style="position:absolute;top:41399;left:162"><NOBR>&lt;/authentication&gt;</NOBR></DIV>
<DIV style="position:absolute;top:41423;left:135"><NOBR>&lt;/application-policy&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:41471;left:166"><NOBR>其中，获得密码的SQL语句很好理解。但是，对于获得角色的SQL语句而言，多出了称</NOBR></DIV>
<DIV style="position:absolute;top:41495;left:135"><NOBR>之为&ldquo;Roles&rdquo;的角色组域。用户可以添加自身需要的、处于该角色组中的其他角色。JBoss</NOBR></DIV>
<DIV style="position:absolute;top:41518;left:135"><NOBR>本身要求，其取值是&ldquo;Roles&rdquo;。本实例的数据库中，仅仅存在一套角色，并无角色组信息</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:8px;font-family:Times">
<DIV style="position:absolute;top:41517;left:744"><NOBR><A href="http://203.208.37.104/search?q=cache:B7Z2wYe4zA4J:www.open-v.com/pdf/jbossgs4x.pdf+jboss-4+%E9%85%8D%E7%BD%AE%E5%90%8E%E5%8F%B0%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6&hl=zh-CN&ct=clnk&cd=4&gl=cn&st_usg=ALhdy2-sy1k-kSbCcvDyXgrpl7lchRyHqQ#33">5</A></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:41518;left:750"><NOBR>。</NOBR></DIV>
<DIV style="position:absolute;top:41542;left:166"><NOBR>上述登陆模块中，使用了默认数据源。如果用户在使用 Hypersonic，则可以使用数据库</NOBR></DIV>
<DIV style="position:absolute;top:41565;left:135"><NOBR>管理器工具创建数据库表、添加数据（Duke 银行应用一章曾给出介绍）。</NOBR></DIV>
</SPAN></FONT>
<FONT size="2" face="Times"><SPAN style="font-size:7px;font-family:Times">
<DIV style="position:absolute;top:41679;left:135"><NOBR>5</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:41680;left:146"><NOBR>用户可以使用默认数据库模式，即创建含有PrincipalID和Password的表Principals；含有PrincipalID、Role、</NOBR></DIV>
<DIV style="position:absolute;top:41699;left:135"><NOBR>RoleGroup的表Roles。对于默认模式而言，用户不需要在登陆模块中指定SQL查询语句。其中，RoleGroup</NOBR></DIV>
<DIV style="position:absolute;top:41715;left:135"><NOBR>的取值必须是Roles。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:41854;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="34"><B>Page 34</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:41965;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:42998;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:42996;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:43014;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:42996;left:745"><NOBR>28</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:41989;left:135"><NOBR><B>4.3.3  </B>使用密码散列</NOBR></DIV>
<DIV style="position:absolute;top:42032;left:166"><NOBR>到目前为止，本书使用到的登陆模块都支持密码散列，即不是以明文存储密码，而是存</NOBR></DIV>
<DIV style="position:absolute;top:42055;left:135"><NOBR>储单工密码（比如，使用 MD5）。这同 UNIX 系统中的/etc/passwd 文件类似。因此，用户即</NOBR></DIV>
<DIV style="position:absolute;top:42079;left:135"><NOBR>使浏览到密码，也不能够登陆到系统中。然而，这种方式也有缺点。其一，万一用户忘记密</NOBR></DIV>
<DIV style="position:absolute;top:42102;left:135"><NOBR>码，则不能够恢复。其二，管理工作变得较复杂，因为用户需要计算密码散列，并放置在安</NOBR></DIV>
<DIV style="position:absolute;top:42125;left:135"><NOBR>全性数据库中。当然，这并不妨碍其使用。为生效密码散列，用户需要添加如下模块选项。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:42181;left:135"><NOBR>&lt;module-option name=&quot;hashAlgorithm&quot;&gt;MD5&lt;/module-option&gt; </NOBR></DIV>
<DIV style="position:absolute;top:42205;left:135"><NOBR>&lt;module-option name=&quot;hashEncoding&quot;&gt;base64&lt;/module-option&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:42254;left:166"><NOBR>这表明使用了 MD5 散列、base64 编码，从而将二进制散列值转换为字符串。JBoss 在</NOBR></DIV>
<DIV style="position:absolute;top:42277;left:135"><NOBR>认证用户之前，会使用上述选项计算出密码的散列，因此用户必须确保数据库中存储了正确</NOBR></DIV>
<DIV style="position:absolute;top:42300;left:135"><NOBR>的散列信息。如果用户使用 UNIX 系统，或者在 Windows 上安装了 Cygwin，则可以使用</NOBR></DIV>
<DIV style="position:absolute;top:42327;left:135"><NOBR>openssl 计算散列。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:42380;left:135"><NOBR>$ echo -n &quot;j2ee&quot; | openssl dgst -md5 -binary | openssl base64 </NOBR></DIV>
<DIV style="position:absolute;top:42403;left:135"><NOBR>glcikLhvxq1BwPBZN0EGMQ==</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:42452;left:166"><NOBR>用户应该将&ldquo;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:42456;left:262"><NOBR>glcikLhvxq1BwPBZN0EGMQ==</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:42452;left:446"><NOBR>&rdquo;插入到数据库中，而不是明文，&ldquo;j2ee&rdquo;。或</NOBR></DIV>
<DIV style="position:absolute;top:42475;left:135"><NOBR>者，可以使用 jbosssx.jar 中的 org.jboss.security.Base64Encoder 类。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:42531;left:135"><NOBR>$ java -classpath ./jbosssx.jar org.jboss.security.Base64Encoder j2ee MD5 </NOBR></DIV>
<DIV style="position:absolute;top:42555;left:135"><NOBR>[glcikLhvxq1BwPBZN0EGMQ==]</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:42604;left:166"><NOBR>如果用户只提供单个参数，则上述类只会以 base64 对它进行编码。但如果将加密算法</NOBR></DIV>
<DIV style="position:absolute;top:42627;left:135"><NOBR>名作为第二个参数，则它将计算出第一个参数的散列</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:43117;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="35"><B>Page 35</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:43228;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:44261;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:44259;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:44277;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:44259;left:745"><NOBR>29</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:43277;left:135"><NOBR>第 5 章 J2EE 之 Web 服务</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:43335;left:166"><NOBR>从一开始，Web 服务就承诺：使用平台、语言独立协议（比如，基于 HTTP 的 SOAP）</NOBR></DIV>
<DIV style="position:absolute;top:43359;left:135"><NOBR>传输 XML 数据，以实现应用的真正互操作性。当初，由于存在多个竞争标准和开发者对</NOBR></DIV>
<DIV style="position:absolute;top:43385;left:135"><NOBR>Web 服务的误解使得这种承诺不能够成为现实。现在，Web 服务已经成熟，并且富有标准</NOBR></DIV>
<DIV style="position:absolute;top:43406;left:135"><NOBR>化。J2EE 1.4 规范已经将 Web 服务集成进来了。</NOBR></DIV>
<DIV style="position:absolute;top:43429;left:166"><NOBR>秉承本书的初衷，还是假设用户已经有开发Web服务的一些经验。如果用户还未涉足过，</NOBR></DIV>
<DIV style="position:absolute;top:43452;left:135"><NOBR>本书建议用户补上这一课。JBoss wiki，即<FONT color="#0000ff" face="Times"><A href="http://www.jboss.org/wiki/Wiki.jsp?JBossWS">http://www.jboss.org/wiki/Wiki.jsp?JBossWS</A></FONT><A href="http://www.jboss.org/wiki/Wiki.jsp?JBossWS"></A>，是学</NOBR></DIV>
<DIV style="position:absolute;top:43476;left:135"><NOBR>习Web服务较好的切入点，因为它深入地介绍了开发基于JBoss的Web服务。另外，本书还推</NOBR></DIV>
<DIV style="position:absolute;top:43499;left:135"><NOBR>荐Richard Monson-Haefel的《J2EE Web Services》，一本对J2EE Web服务的更一般性介绍。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:43544;left:135"><NOBR>5.1 JBoss 中的 Web 服务</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:43588;left:166"><NOBR>JBossWS是JBoss 4.0 中用于提供Web服务的JBoss模块，它替换了以前的JBoss.NET包。</NOBR></DIV>
<DIV style="position:absolute;top:43608;left:135"><NOBR>同以前一样，JBossWS还是基于Apache  Axis（<A href="http://ws.apache.org/axis"></A><FONT color="#0000ff" face="Times"><A href="http://ws.apache.org/axis">http://ws.apache.org/axis</A></FONT>）。然而，JBossWS提</NOBR></DIV>
<DIV style="position:absolute;top:43632;left:135"><NOBR>供了J2EE 1.4 Web服务的完整技术栈，其中包括SOAP、SAAJ、JAX-RPC以及JAXR。</NOBR></DIV>
<DIV style="position:absolute;top:43658;left:166"><NOBR>J2EE Web 服务提供了两种 Web 服务端点（endpoint）。如果将 Web 服务作为平台独立的</NOBR></DIV>
<DIV style="position:absolute;top:43679;left:135"><NOBR>调用层看待，则端点就是用户暴露的对象、也是能够调用其提供的操作的对象。自然地，J2EE </NOBR></DIV>
<DIV style="position:absolute;top:43705;left:135"><NOBR>Web 服务支持将 EJB 暴露为 Web 服务，但只有无状态会话 Bean 能够如此。因此，这也说</NOBR></DIV>
<DIV style="position:absolute;top:43725;left:135"><NOBR>明 Web 服务请求也具有无状态的特质。另外，J2EE  Web 服务还提供 JAX-RPC 服务端点</NOBR></DIV>
<DIV style="position:absolute;top:43749;left:135"><NOBR>（JAX-RPC Service Endpoint，JSE），它仅仅是简单 Java 类。本实例只会涉及到 EJB 端点。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:43794;left:135"><NOBR>5.2  将 Duke 银行运行为 Web 服务</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:43835;left:166"><NOBR>本章将继续开发第 4 章的 Duke 银行应用，并创建简单 Web 服务，即查询账号和收支情</NOBR></DIV>
<DIV style="position:absolute;top:43858;left:135"><NOBR>况。会话 Bean，即 AccountController 能够实现账号和收支情况的查询。但是，它是有状态</NOBR></DIV>
<DIV style="position:absolute;top:43881;left:135"><NOBR>的。因此，不能够直接暴露 AccountController。本章将创建新的无状态会话 Bean，即</NOBR></DIV>
<DIV style="position:absolute;top:43908;left:135"><NOBR>TellerBean，一更适合于 Web 服务端点的无状态会话 Bean。</NOBR></DIV>
<DIV style="position:absolute;top:43928;left:166"><NOBR>再进入操作之前，用户必须保证，确实根据第 4 章给出的操作步骤编译并部署了 Duke</NOBR></DIV>
<DIV style="position:absolute;top:43952;left:135"><NOBR>银行应用。同前述一样，将 examples/bank 作为工作目录。在部署 Duke 银行应用时，可能</NOBR></DIV>
<DIV style="position:absolute;top:43975;left:135"><NOBR>已经编译了 TellerBean，但是再次调用 Ant 目标 compile 并无坏处。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:44031;left:135"><NOBR>ant -f jboss-build.xml compile</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:44080;left:166"><NOBR>然后，让我们看看部署描述符。用户已经掌握了如何部署会话 Bean。将会话 Bean 部署</NOBR></DIV>
<DIV style="position:absolute;top:44103;left:135"><NOBR>为 Web 服务很简单，只需要在 ejb-jar.xml 的会话 Bean 定义中添加 service-endpoint 元素。其</NOBR></DIV>
<DIV style="position:absolute;top:44127;left:135"><NOBR>中，service-endpoint 元素指定的类提供了对应于会话 Bean 中方法的接口，而相应的会话 Bean</NOBR></DIV>
<DIV style="position:absolute;top:44150;left:135"><NOBR>暴露为 Web 服务。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:44206;left:135"><NOBR>&lt;session&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44229;left:162"><NOBR>&lt;ejb-name&gt;TellerBean&lt;/ejb-name&gt; </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:44380;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="36"><B>Page 36</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:44491;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:45524;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:45522;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:45540;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:45522;left:745"><NOBR>30</NOBR></DIV>
<DIV style="position:absolute;top:44522;left:162"><NOBR>&lt;service-endpoint&gt;com.jboss.ebank.TellerEndpoint&lt;/service-endpoint&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44545;left:162"><NOBR>&lt;ejb-class&gt;com.jboss.ebank.TellerBean&lt;/ejb-class&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44568;left:162"><NOBR>&lt;session-type&gt;Stateless&lt;/session-type&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44592;left:162"><NOBR>&lt;transaction-type&gt;Container&lt;/transaction-type&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44615;left:162"><NOBR>&lt;ejb-ref&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44639;left:189"><NOBR>&lt;ejb-ref-name&gt;ejb/account&lt;/ejb-ref-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44662;left:189"><NOBR>&lt;ejb-ref-type&gt;Session&lt;/ejb-ref-type&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44685;left:189"><NOBR>&lt;home&gt;com.sun.ebank.ejb.customer.CustomerHome&lt;/home&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44709;left:189"><NOBR>&lt;remote&gt;com.sun.ebank.ejb.customer.Customer&lt;/remote&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44732;left:162"><NOBR>&lt;/ejb-ref&gt; </NOBR></DIV>
<DIV style="position:absolute;top:44756;left:162"><NOBR>&lt;security-identity&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44779;left:189"><NOBR>&lt;run-as&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44802;left:216"><NOBR>&lt;role-name&gt;bankCustomer&lt;/role-name&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44826;left:189"><NOBR>&lt;/run-as&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44849;left:162"><NOBR>&lt;/security-identity&gt;</NOBR></DIV>
<DIV style="position:absolute;top:44873;left:135"><NOBR>&lt;/session&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:44922;left:166"><NOBR>用户可能已经注意到，这里并没有为 TellerBean 声明 Home 或远程接口。如果某会话</NOBR></DIV>
<DIV style="position:absolute;top:44948;left:135"><NOBR>Bean 仅供 Web 服务接口访问，则不需要声明 Home 或远程接口，因此在此省略了它们。其</NOBR></DIV>
<DIV style="position:absolute;top:44968;left:135"><NOBR>中，将 TellerEndpoint 类声明为端点接口。该接口暴露了两个操作，它们均对应于 TellerBean</NOBR></DIV>
<DIV style="position:absolute;top:44992;left:135"><NOBR>中提供的方法。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:45048;left:135"><NOBR>public interface TellerEndpoint </NOBR></DIV>
<DIV style="position:absolute;top:45071;left:162"><NOBR>extends Remote</NOBR></DIV>
<DIV style="position:absolute;top:45094;left:135"><NOBR>{ </NOBR></DIV>
<DIV style="position:absolute;top:45118;left:162"><NOBR>public String[] getAccountsOfCustomer(String customerId)</NOBR></DIV>
<DIV style="position:absolute;top:45141;left:189"><NOBR>throws RemoteException;</NOBR></DIV>
<DIV style="position:absolute;top:45188;left:162"><NOBR>public BigDecimal getAccountBalance(String accountID) </NOBR></DIV>
<DIV style="position:absolute;top:45211;left:189"><NOBR>throws RemoteException;</NOBR></DIV>
<DIV style="position:absolute;top:45235;left:135"><NOBR>} </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:45284;left:166"><NOBR>接下来，需要借助于上述接口，并使用 JBossWS 附带的 wstools 工具生成 Web 服务相</NOBR></DIV>
<DIV style="position:absolute;top:45307;left:135"><NOBR>关部署描述府（WSDL、JAX-RPC 映射文件、webservices 部署描述府），即互操作 Web 服</NOBR></DIV>
<DIV style="position:absolute;top:45331;left:135"><NOBR>务定义。Ant 目标 wstools 操作如下：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:45387;left:135"><NOBR>ant -f jboss-build.xml wstools </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:45435;left:166"><NOBR>注意，wstools 使用 wstools-config.xml 文件控制上述内容的生成。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:45491;left:135"><NOBR>&lt;configuration xmlns=&quot;http://www.jboss.org/jbossws-tools&quot;&gt; </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:45643;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="37"><B>Page 37</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:45754;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:46787;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:46785;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:46803;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:46785;left:745"><NOBR>31</NOBR></DIV>
<DIV style="position:absolute;top:45785;left:162"><NOBR>&lt;java-wsdl&gt;</NOBR></DIV>
<DIV style="position:absolute;top:45808;left:189"><NOBR>&lt;service name=&quot;TellerService&quot; style=&quot;rpc&quot; endpoint=&quot;com.jboss.ebank.TellerEndpoint&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:45831;left:189"><NOBR>&lt;namespaces target-namespace=&quot;http://ebank.jboss.com/teller&quot; </NOBR></DIV>
<DIV style="position:absolute;top:45855;left:270"><NOBR>type-namespace=&quot;http://ebank.jboss.com/teller/types&quot;/&gt;</NOBR></DIV>
<DIV style="position:absolute;top:45878;left:189"><NOBR>&lt;mapping file=&quot;jaxrpc-mapping.xml&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:45902;left:189"><NOBR>&lt;webservices ejb-link=&quot;TellerBean&quot;/&gt;</NOBR></DIV>
<DIV style="position:absolute;top:45925;left:162"><NOBR>&lt;/java-wsdl&gt;</NOBR></DIV>
<DIV style="position:absolute;top:45949;left:135"><NOBR>&lt;/configuration&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:45997;left:166"><NOBR>上述 Ant 任务生成了如下配置信息：</NOBR></DIV>
<DIV style="position:absolute;top:46024;left:198"><NOBR>TellerService.wsdl：这是描述 Web 服务的 WSDL 定义。注意，在运行期，JBossWS</NOBR></DIV>
<DIV style="position:absolute;top:46044;left:198"><NOBR>会替换其中的一些取值。</NOBR></DIV>
<DIV style="position:absolute;top:46070;left:198"><NOBR>jaxrpc-mapping.xml：它描述 WSDL 类型与底层 Java 实现间的映射关系。由于这里</NOBR></DIV>
<DIV style="position:absolute;top:46091;left:198"><NOBR>的客户程序也是采用 Java 编写的，因此开发者在完成客户端映射时能够重用它。</NOBR></DIV>
<DIV style="position:absolute;top:46117;left:198"><NOBR>webservices.xml：描述 webservice。它将 Endpoint 连接到服务器端组件（比如，会</NOBR></DIV>
<DIV style="position:absolute;top:46138;left:198"><NOBR>话 Bean）。同时，它还给出了相关部署文件的位置信息。</NOBR></DIV>
<DIV style="position:absolute;top:46161;left:166"><NOBR>这里的 Web 服务是简单会话 Bean，因此只需要将相关类和部署描述符打包到 EJB  jar</NOBR></DIV>
<DIV style="position:absolute;top:46185;left:135"><NOBR>文件中。其中，package-ws 任务能够完成打包工作，deploy-ws 目标能够将 EJB  jar 部署到</NOBR></DIV>
<DIV style="position:absolute;top:46211;left:135"><NOBR>JBoss。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:46264;left:135"><NOBR>ant -f jboss-build.xml package-ws</NOBR></DIV>
<DIV style="position:absolute;top:46287;left:135"><NOBR>ant -f jboss-build.xml deploy-ws</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:46336;left:166"><NOBR>一旦上述 Web 服务部署完成，用户通过如下 URL 能够查看到 WSDL 文件。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:13px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:46386;left:135"><NOBR><A href="http://localhost:8080/bankws-ejb/TellerService?wsdl">http://localhost:8080/bankws-ejb/TellerService?wsdl</A></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:46430;left:166"><NOBR>在本实例中，创建了 WSDL 文件。反之，用户也可以手工编写用于 Web 服务的 WSDL</NOBR></DIV>
<DIV style="position:absolute;top:46453;left:135"><NOBR>文件，然后借助于 JBossWS 附带的 wstools 工具生成 Java 端点接口。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:46498;left:135"><NOBR>5.3  运行 Web 服务客户</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:46539;left:166"><NOBR>同时，本书还提供了从非 J2EE 环境中访问该 Web 服务的 Java 客户应用。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:46595;left:135"><NOBR>public class WSClient { </NOBR></DIV>
<DIV style="position:absolute;top:46618;left:162"><NOBR>public static void main(String[] args) </NOBR></DIV>
<DIV style="position:absolute;top:46642;left:189"><NOBR>throws Exception</NOBR></DIV>
<DIV style="position:absolute;top:46665;left:162"><NOBR>{</NOBR></DIV>
<DIV style="position:absolute;top:46688;left:189"><NOBR>URL url =</NOBR></DIV>
<DIV style="position:absolute;top:46712;left:243"><NOBR>new URL(&quot;http://localhost:8080/bankws-ejb/TellerService?wsdl&quot;); </NOBR></DIV>
<DIV style="position:absolute;top:46759;left:189"><NOBR>QName qname = new QName(&quot;http://ebank.jboss.com&quot;, </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:46906;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="38"><B>Page 38</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:47017;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:48050;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:48048;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:48066;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:48048;left:745"><NOBR>32</NOBR></DIV>
<DIV style="position:absolute;top:47048;left:351"><NOBR>&quot;TellerService&quot;);</NOBR></DIV>
<DIV style="position:absolute;top:47094;left:189"><NOBR>ServiceFactory factory = ServiceFactory.newInstance(); </NOBR></DIV>
<DIV style="position:absolute;top:47118;left:189"><NOBR>Service </NOBR></DIV>
<DIV style="position:absolute;top:47118;left:283"><NOBR>service = factory.createService(url, qname); </NOBR></DIV>
<DIV style="position:absolute;top:47165;left:189"><NOBR>TellerEndpoint endpoint = (TellerEndpoint) </NOBR></DIV>
<DIV style="position:absolute;top:47188;left:216"><NOBR>service.getPort(TellerEndpoint.class); </NOBR></DIV>
<DIV style="position:absolute;top:47235;left:189"><NOBR>String </NOBR></DIV>
<DIV style="position:absolute;top:47235;left:242"><NOBR>customer = &quot;200&quot;; </NOBR></DIV>
<DIV style="position:absolute;top:47258;left:189"><NOBR>String[] ids </NOBR></DIV>
<DIV style="position:absolute;top:47258;left:290"><NOBR>= endpoint.getAccountsOfCustomer(customer); </NOBR></DIV>
<DIV style="position:absolute;top:47305;left:189"><NOBR>System.out.println(&quot;Customer: &quot; + customer); </NOBR></DIV>
<DIV style="position:absolute;top:47328;left:189"><NOBR>for (int i=0; i&lt;ids.length; i++) { </NOBR></DIV>
<DIV style="position:absolute;top:47352;left:216"><NOBR>System.out.println(&quot;account[&quot; + ids[i] +  &quot;] &quot; +</NOBR></DIV>
<DIV style="position:absolute;top:47375;left:344"><NOBR>endpoint.getAccountBalance(ids[i])); </NOBR></DIV>
<DIV style="position:absolute;top:47399;left:189"><NOBR>}</NOBR></DIV>
<DIV style="position:absolute;top:47422;left:162"><NOBR>}</NOBR></DIV>
<DIV style="position:absolute;top:47446;left:135"><NOBR>} </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:47494;left:166"><NOBR>用户能够使用 Ant 目标 run-ws 运行上述 Java 客户。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:47550;left:135"><NOBR>ant -f jboss-build.xml run-ws </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:47599;left:166"><NOBR>客户端将显示出属于某给定顾客的账号收支情况。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:47655;left:169"><NOBR>[java] Customer: 200 </NOBR></DIV>
<DIV style="position:absolute;top:47679;left:169"><NOBR>[java] account[5005] 3300.00 </NOBR></DIV>
<DIV style="position:absolute;top:47702;left:169"><NOBR>[java] account[5006] 2458.32 </NOBR></DIV>
<DIV style="position:absolute;top:47725;left:169"><NOBR>[java] account[5007] 220.03 </NOBR></DIV>
<DIV style="position:absolute;top:47749;left:169"><NOBR>[java] account[5008] 59601.35 </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:47819;left:135"><NOBR>5.4  监控 Web 服务请求</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:47860;left:166"><NOBR>在处理 Web 服务请求时，开发者都希望能够观察到客户同服务器间传递的实际消息。</NOBR></DIV>
<DIV style="position:absolute;top:47886;left:135"><NOBR>JBoss 通过 org.jboss.ws.server.ServiceEndpoint Category 记录了这类信息。为了能够记录它们，</NOBR></DIV>
<DIV style="position:absolute;top:47907;left:135"><NOBR>需要往 log4j.xml 文件新增如下内容：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:47963;left:135"><NOBR>&lt;category name=&quot;org.jboss.ws.server.ServiceEndpoint&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:47986;left:162"><NOBR>&lt;priority value=&quot;DEBUG&quot;/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48010;left:135"><NOBR>&lt;/category&gt;</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:48169;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="39"><B>Page 39</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:48280;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:49313;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:49311;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:49329;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:49311;left:745"><NOBR>33</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:48325;left:166"><NOBR>一旦设置好后，所有的 SOAP 请求和响应都将记录到 server.log 文件中。比如，在调用</NOBR></DIV>
<DIV style="position:absolute;top:48351;left:135"><NOBR>getAccountOfCustomer 方法后，能够在 server.log 中发现如下内容：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:48404;left:135"><NOBR>2005-05-16 17:50:43,479 DEBUG [org.jboss.axis.transport.http.AxisServlet]</NOBR></DIV>
<DIV style="position:absolute;top:48428;left:135"><NOBR>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48451;left:135"><NOBR>&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; </NOBR></DIV>
<DIV style="position:absolute;top:48474;left:148"><NOBR>xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; </NOBR></DIV>
<DIV style="position:absolute;top:48498;left:223"><NOBR>xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48521;left:142"><NOBR>&lt;soapenv:Body&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48545;left:148"><NOBR>&lt;ns1:getAccountsOfCustomer xmlns:ns1=&quot;http://ebank.jboss.com&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48568;left:155"><NOBR>&lt;in0&gt;200&lt;/in0&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48591;left:148"><NOBR>&lt;/ns1:getAccountsOfCustomer&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48615;left:142"><NOBR>&lt;/soapenv:Body&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48638;left:135"><NOBR>&lt;/soapenv:Envelope&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48662;left:135"><NOBR>... </NOBR></DIV>
<DIV style="position:absolute;top:48685;left:135"><NOBR>2005-05-16 17:50:44,240 DEBUG [org.jboss.axis.transport.http.AxisServlet]</NOBR></DIV>
<DIV style="position:absolute;top:48708;left:135"><NOBR>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48732;left:135"><NOBR>&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; </NOBR></DIV>
<DIV style="position:absolute;top:48755;left:256"><NOBR>xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; </NOBR></DIV>
<DIV style="position:absolute;top:48779;left:256"><NOBR>xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48802;left:142"><NOBR>&lt;soapenv:Body&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48825;left:148"><NOBR>&lt;ns1:getAccountsOfCustomerResponse xmlns:ns1=&quot;http://ebank.jboss.com&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48849;left:155"><NOBR>&lt;getAccountsOfCustomerResponse&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48872;left:162"><NOBR>&lt;accounts&gt;5005&lt;/accounts&gt;</NOBR></DIV>
<DIV style="position:absolute;top:48896;left:162"><NOBR>&lt;accounts&gt;5006&lt;/accounts&gt;</NOBR></DIV>
<DIV style="position:absolute;top:48919;left:162"><NOBR>&lt;accounts&gt;5007&lt;/accounts&gt;</NOBR></DIV>
<DIV style="position:absolute;top:48942;left:162"><NOBR>&lt;accounts&gt;5008&lt;/accounts&gt;</NOBR></DIV>
<DIV style="position:absolute;top:48966;left:155"><NOBR>&lt;/getAccountsOfCustomerResponse&gt; </NOBR></DIV>
<DIV style="position:absolute;top:48989;left:148"><NOBR>&lt;/ns1:getAccountsOfCustomerResponse&gt; </NOBR></DIV>
<DIV style="position:absolute;top:49013;left:142"><NOBR>&lt;/soapenv:Body&gt; </NOBR></DIV>
<DIV style="position:absolute;top:49036;left:135"><NOBR>&lt;/soapenv:Envelope&gt; </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:49432;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="40"><B>Page 40</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:49543;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:50576;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:50574;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:50592;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:50574;left:745"><NOBR>34</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:49592;left:135"><NOBR>第 6 章 JMS 和消息驱动 Bean </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:49653;left:166"><NOBR>Duke 银行应用并没有使用到 JMS 消息，因此本章将再次参考 J2EE Tutorial 中有关消息</NOBR></DIV>
<DIV style="position:absolute;top:49674;left:135"><NOBR>驱动 Bean（Message Driven Bean，MDB）的实例，从而研究如何在 JBoss 中使用消息。本</NOBR></DIV>
<DIV style="position:absolute;top:49697;left:135"><NOBR>书仍然假定用户已经熟悉 JMS 和 MDB 基本概念。其中，J2EE Tutorial 中用于 MDB 的代码</NOBR></DIV>
<DIV style="position:absolute;top:49721;left:135"><NOBR>位　于 j2eetutorial14/examples/ejb/simplemessage 。　位　于 simplemessage 目　录　下　存　在</NOBR></DIV>
<DIV style="position:absolute;top:49747;left:135"><NOBR>jboss-build.xml 文件，供从头编译和运行 JBoss 版本的 MDB 使用。</NOBR></DIV>
<DIV style="position:absolute;top:49767;left:166"><NOBR>实例代码很简单。仅仅有两个类，一个用于客户端，一个用于 MDB（同其他 EJB 不同，</NOBR></DIV>
<DIV style="position:absolute;top:49791;left:135"><NOBR>它不需要其他接口）。客户将消息发布到 JMS  Queue 中，MDB 借助于标准的 onMessage 方</NOBR></DIV>
<DIV style="position:absolute;top:49814;left:135"><NOBR>法处理这些消息。其中，这些消息都是 javax.jms.TextMessage 类型，该 MDB 只是简单地打</NOBR></DIV>
<DIV style="position:absolute;top:49838;left:135"><NOBR>印出各个消息含有的文本信息。</NOBR></DIV>
<DIV style="position:absolute;top:49861;left:166"><NOBR>同容器相关的任务有两个。其一，在 JBoss 中设置 Queue。其二，配置 MDB，以接收</NOBR></DIV>
<DIV style="position:absolute;top:49884;left:135"><NOBR>来自该 Queue 的消息。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:49929;left:135"><NOBR>6.1  构建实例</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:49974;left:135"><NOBR><B>6.1.1  </B>编译并打包 <B>MDB </B>和客户</NOBR></DIV>
<DIV style="position:absolute;top:50017;left:166"><NOBR>从 simplemessage 目录调用 compile-mdb 目标，能够完成代码的编译工作。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:50073;left:135"><NOBR>ant -f jboss-build.xml compile-mdb </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:50122;left:166"><NOBR>然后，依次运行如下 Ant 目标，能够在 jar 目录生成 MDB 存档、客户存档以及由它们</NOBR></DIV>
<DIV style="position:absolute;top:50145;left:135"><NOBR>合并的 EAR 文件。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:50201;left:135"><NOBR>ant -f jboss-build.xml package-mdb </NOBR></DIV>
<DIV style="position:absolute;top:50224;left:135"><NOBR>ant -f jboss-build.xml package-mdb-client </NOBR></DIV>
<DIV style="position:absolute;top:50248;left:135"><NOBR>ant -f jboss-build.xml assemble-mdb </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:50297;left:166"><NOBR>请注意，这同 Duke 银行应用建立的目录结构相同，即 dd 目录含有部署描述符、jar 目</NOBR></DIV>
<DIV style="position:absolute;top:50320;left:135"><NOBR>录含有构建过程生成的存档。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:50368;left:135"><NOBR><B>6.1.1.1  </B>指定 <B>MDB </B>监听的 <B>Queue </B></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:50410;left:166"><NOBR>同 JBoss 具体容器其他信息一样，通过 jboss.xml 能够指定 MDB 使用的 Queue 名。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:50466;left:135"><NOBR>&lt;jboss&gt;</NOBR></DIV>
<DIV style="position:absolute;top:50489;left:162"><NOBR>&lt;enterprise-beans&gt; </NOBR></DIV>
<DIV style="position:absolute;top:50512;left:189"><NOBR>&lt;message-driven&gt;</NOBR></DIV>
<DIV style="position:absolute;top:50536;left:216"><NOBR>&lt;ejb-name&gt;SimpleMessageBean&lt;/ejb-name&gt;</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:50695;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="41"><B>Page 41</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:50806;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:51839;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:51837;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:51855;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:51837;left:745"><NOBR>35</NOBR></DIV>
<DIV style="position:absolute;top:50837;left:216"><NOBR>&lt;destination-jndi-name&gt;queue/MyQueue&lt;/destination-jndi-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:50860;left:189"><NOBR>&lt;/message-driven&gt;</NOBR></DIV>
<DIV style="position:absolute;top:50883;left:162"><NOBR>&lt;/enterprise-beans&gt; </NOBR></DIV>
<DIV style="position:absolute;top:50907;left:135"><NOBR>&lt;/jboss&gt;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:50956;left:166"><NOBR>因此，该 MDB 将处理来自 JNDI 名为&ldquo;queue/MyQueue&rdquo;的 Queue 中的消息。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:51001;left:135"><NOBR>6.2  部署和运行实例</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:51042;left:166"><NOBR>将 SimpleMessage.ear 文件拷贝到 JBoss 的 deploy 目录，就完成了 MDB 的部署。其中，</NOBR></DIV>
<DIV style="position:absolute;top:51068;left:135"><NOBR>Ant 目标 deploy-mdb 能够完成其部署。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:51121;left:135"><NOBR>ant -f jboss-build.xml deploy-mdb </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:51170;left:166"><NOBR>如下给出了成功部署 SimpleMessage.ear 的示例。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:51226;left:135"><NOBR>08:20:08,188 INFO  [EARDeployer] Init J2EE application: </NOBR></DIV>
<DIV style="position:absolute;top:51249;left:135"><NOBR>file:/tmp/jboss-4.0.4.GA/server/default/deploy/SimpleMessage.ear</NOBR></DIV>
<DIV style="position:absolute;top:51272;left:135"><NOBR>08:20:08,370 INFO  [EjbModule] Deploying SimpleMessageEJB </NOBR></DIV>
<DIV style="position:absolute;top:51296;left:135"><NOBR>08:20:08,565 INFO  [ClientDeployer] Client ENC bound under: SimpleMessageClient </NOBR></DIV>
<DIV style="position:absolute;top:51319;left:135"><NOBR>08:20:08,712 WARN  [JMSContainerInvoker] Could not find the queue</NOBR></DIV>
<DIV style="position:absolute;top:51343;left:135"><NOBR>destination-jndi-name=queue/MyQueue </NOBR></DIV>
<DIV style="position:absolute;top:51366;left:135"><NOBR>08:20:08,719 WARN  [JMSContainerInvoker] destination not found: queue/MyQueue </NOBR></DIV>
<DIV style="position:absolute;top:51389;left:135"><NOBR>reason: javax.naming.NameNotFoundException: MyQueue not bound </NOBR></DIV>
<DIV style="position:absolute;top:51413;left:135"><NOBR>08:20:08,719 WARN  [JMSContainerInvoker] creating a new temporary destination: queue/MyQueue </NOBR></DIV>
<DIV style="position:absolute;top:51436;left:135"><NOBR>08:20:08,772 INFO  [MyQueue] Bound to JNDI name: queue/MyQueue</NOBR></DIV>
<DIV style="position:absolute;top:51460;left:135"><NOBR>08:20:08,952 INFO  [EJBDeployer] Deployed: </NOBR></DIV>
<DIV style="position:absolute;top:51483;left:135"><NOBR>file:/tmp/jboss-4.0.4.GA/server/default/tmp/deploy/tmp51464SimpleMessage.ear-contents </NOBR></DIV>
<DIV style="position:absolute;top:51506;left:135"><NOBR>/simplemessage.jar </NOBR></DIV>
<DIV style="position:absolute;top:51530;left:135"><NOBR>08:20:08,996 INFO  [EARDeployer] Started J2EE application: </NOBR></DIV>
<DIV style="position:absolute;top:51553;left:135"><NOBR>file:/tmp/jboss-4.0.4.GA/server/default/deploy/SimpleMessage.ear</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:51602;left:166"><NOBR>如果用户仔细的话，能够看到一些警告信息，即部署描述符中指定的 JMS  Queue 不存</NOBR></DIV>
<DIV style="position:absolute;top:51626;left:135"><NOBR>在。对于 JBoss 而言，会为应用创建临时的 Queue，并绑定到相同的 Queue 名。用户可以通</NOBR></DIV>
<DIV style="position:absolute;top:51649;left:135"><NOBR>过 JNDIView MBean 验证，位于全局 JNDI 命名空间中。接下来，来研究如何显示地创建 JMS</NOBR></DIV>
<DIV style="position:absolute;top:51672;left:135"><NOBR>目的地。</NOBR></DIV>
<DIV style="position:absolute;top:51720;left:135"><NOBR><B>6.2.1  </B>运行客户应用</NOBR></DIV>
<DIV style="position:absolute;top:51762;left:166"><NOBR>通过 Ant 目标 run-mdb 能够运行客户应用。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:51958;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="42"><B>Page 42</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:52069;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:53102;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:53100;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:53118;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:53100;left:745"><NOBR>36</NOBR></DIV>
<DIV style="position:absolute;top:52100;left:135"><NOBR>ant -f jboss-build.xml run-mdb </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:52149;left:166"><NOBR>用户能够在客户和服务器控制台浏览到它们各自发送和接收消息的输出信息。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:52194;left:135"><NOBR>6.3  管理 JMS 目的地</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:52234;left:166"><NOBR>同 JBoss 其他架构组件一样，JMS Topic 和 Queue 也是基于 MBean 实现的。用户可以通</NOBR></DIV>
<DIV style="position:absolute;top:52258;left:135"><NOBR>过两种方式创建它们。其一，将 MBean 声明添加给相应的配置文件。其二，使用 JMX 控制</NOBR></DIV>
<DIV style="position:absolute;top:52281;left:135"><NOBR>台应用动态创建它们。然而，对于第二种方式，如果服务器重启，则动态创建的 MBean 将</NOBR></DIV>
<DIV style="position:absolute;top:52305;left:135"><NOBR>丢弃掉。</NOBR></DIV>
<DIV style="position:absolute;top:52352;left:135"><NOBR><B>6.3.1 jbossmq-destinations-service.xml </B>文件</NOBR></DIV>
<DIV style="position:absolute;top:52394;left:166"><NOBR>通过 deploy/jms 目录能够找到 jbossmq-destinations-service.xml 文件。它含有 JMS 目的</NOBR></DIV>
<DIV style="position:absolute;top:52418;left:135"><NOBR>地列表，并且配置了供测试目的的 Topic 和 Queue 列表。为添加 SimpleMessage 需要的 Queue，</NOBR></DIV>
<DIV style="position:absolute;top:52441;left:135"><NOBR>用户只需简单地将如下 MBean 声明添加到文件中。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:52497;left:135"><NOBR>&lt;mbean code=&quot;org.jboss.mq.server.jmx.Queue&quot; </NOBR></DIV>
<DIV style="position:absolute;top:52520;left:175"><NOBR>name=&quot;jboss.mq.destination:service=Queue,name=MyQueue&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:52544;left:135"><NOBR>&lt;/mbean&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:52616;left:135"><NOBR><B>6.3.2  </B>从 <B>JMX </B>控制台使用 <B>DestinationManager </B></NOBR></DIV>
<DIV style="position:absolute;top:52659;left:166"><NOBR>当 JBoss 处于运行状态时，将 Web 浏览器定位到 JMX 控制台应用，然后请用户找到</NOBR></DIV>
<DIV style="position:absolute;top:52685;left:135"><NOBR>jboss.mq 域名。然后，单击 service=DestinationManager。其中，DestinationManager MBean</NOBR></DIV>
<DIV style="position:absolute;top:52706;left:135"><NOBR>是 JBossMQ 中的主要 JMS 服务，用户能够使用它在运行时创建、销毁 Topic 和 Queue。请</NOBR></DIV>
<DIV style="position:absolute;top:52729;left:135"><NOBR>找到 createQueue 操作。用户需要为它提供两个参数。其一，用于 Queue MBean 的名字（一</NOBR></DIV>
<DIV style="position:absolute;top:52752;left:135"><NOBR>般情况下，与应用代码无关）。其二，JNDI 名。请分别输入 MyQueue 和 queue/MyQueue。</NOBR></DIV>
<DIV style="position:absolute;top:52776;left:135"><NOBR>本书采用了标准的 JBoss 约定，即将 Queue 绑定在 JNDI 名 queue 中、Topic 绑定在 JNDI 名</NOBR></DIV>
<DIV style="position:absolute;top:52802;left:135"><NOBR>topic 中。用户可以不遵循该约定，而使用任何名字。请注意，如果某名字已被占用，则将</NOBR></DIV>
<DIV style="position:absolute;top:52823;left:135"><NOBR>失败（比如，如果用户已根据上述方式部署了 SimpleMessage 应用，或者使用 XML 配置文</NOBR></DIV>
<DIV style="position:absolute;top:52846;left:135"><NOBR>件添加了 Queue MBean。）。如果遇到这种失败，则用户需要删除现有的 Queue，或者尝试使</NOBR></DIV>
<DIV style="position:absolute;top:52869;left:135"><NOBR>用其他的名字。</NOBR></DIV>
<DIV style="position:absolute;top:52916;left:135"><NOBR><B>6.3.3  </B>管理目的地</NOBR></DIV>
<DIV style="position:absolute;top:52959;left:166"><NOBR>用户能够访问表示 Queue 或 Topic 的 MBean 的属性和操作，而且它们是借助于 JMX 暴</NOBR></DIV>
<DIV style="position:absolute;top:52982;left:135"><NOBR>露的。请用户再次查看 JMX 控制台主视图，应该能够找到 jboss.mq.destination 部分，其中</NOBR></DIV>
<DIV style="position:absolute;top:53006;left:135"><NOBR>存在供 SimpleMessage 使用的 Queue 入口（无论 Queue 是通过何种方式创建的）。单击后，</NOBR></DIV>
<DIV style="position:absolute;top:53029;left:135"><NOBR>用户能够看到该 Queue 的属性。其中，QueueDepth 表示当前处于 Queue 中的消息数量。</NOBR></DIV>
<DIV style="position:absolute;top:53052;left:166"><NOBR>作为练习，用户可以暂时停止对 MDB 的消息分发。具体停止步骤如下：用户需要在 JMX</NOBR></DIV>
<DIV style="position:absolute;top:53076;left:135"><NOBR>控制台中定位到 jboss.j2ee 域名，然后用户能够看到 MBean 列表，其中有负责调用 MDB 的</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:53221;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="43"><B>Page 43</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:53332;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:54365;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:54363;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:54381;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:54363;left:745"><NOBR>37</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:53356;left:135"><NOBR>MBean 实例。其名字为 binding=message-driven-bean,jndiName=local/SimpleMessageEJB, </NOBR></DIV>
<DIV style="position:absolute;top:53380;left:135"><NOBR>plugin=invoker,service=EJB。</NOBR></DIV>
<DIV style="position:absolute;top:53400;left:166"><NOBR>用户可以使用对应 MBean 支持的操作来启动或停止消息的分发。请调用 stopDelivery</NOBR></DIV>
<DIV style="position:absolute;top:53424;left:135"><NOBR>方法，然后运行客户应用几次。用户然后能够看到 QueueDepth 也会相应增长。如果调用</NOBR></DIV>
<DIV style="position:absolute;top:53450;left:135"><NOBR>startDelivery 方法，则立即能够看到消息的到来。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:54484;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="44"><B>Page 44</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:54595;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:55628;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55626;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:55644;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:55626;left:745"><NOBR>38</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:54644;left:135"><NOBR>第 7 章　容器管理持久化</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:54705;left:166"><NOBR>Duke 银行应用使用 Bean 管理持久化（Bean-Managed Persistence，BMP）。然而，EJB 2.0</NOBR></DIV>
<DIV style="position:absolute;top:54726;left:135"><NOBR>引入的容器管理持久化（Container-Managed  Persistence，CMP）改进了 BMP，使得实际应</NOBR></DIV>
<DIV style="position:absolute;top:54749;left:135"><NOBR>用中很少使用 BMP。本章内容将使用 J2EE Tutorial 中的 RosterApp 实例应用，它涉及到 CMP</NOBR></DIV>
<DIV style="position:absolute;top:54773;left:135"><NOBR>和 CMR 的使用。在用户继续深入本章之前，请务必阅读 CMP 相关教程，从而对 CMP 及其</NOBR></DIV>
<DIV style="position:absolute;top:54796;left:135"><NOBR>关系有较好的理解。</NOBR></DIV>
<DIV style="position:absolute;top:54819;left:166"><NOBR>用户通过 j2eetutorial14/examples/cmproster 能够找到代码。该应用实现了俱乐部队员的</NOBR></DIV>
<DIV style="position:absolute;top:54843;left:135"><NOBR>花名册。一共存在 3 个实体 Bean：PlayerEJB、TeamEJB、LeagueEJB；1 个会话 Bean：RosterEJB，</NOBR></DIV>
<DIV style="position:absolute;top:54866;left:135"><NOBR>它操作上述 3 个实体 Bean，并且位客户应用提供业务方法。只有该会话 Bean 提供了远程接</NOBR></DIV>
<DIV style="position:absolute;top:54890;left:135"><NOBR>口。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:54935;left:135"><NOBR>7.1  构建实例</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:54975;left:166"><NOBR>将上述 EJB 打包成两个单独的 jar 文件，一个是实体 Bean，另一个是会话 Bean。同以</NOBR></DIV>
<DIV style="position:absolute;top:54999;left:135"><NOBR>前一样，需要为各个 jar 提供 ejb-jar.xml 文件。本实例不需要 jboss.xml 文件。所有构建数据</NOBR></DIV>
<DIV style="position:absolute;top:55022;left:135"><NOBR>库模式的 CMP 信息都包含在标准描述符中。本章将在后续内容中讨论 JBoss 具体的自定义</NOBR></DIV>
<DIV style="position:absolute;top:55046;left:135"><NOBR>工作。</NOBR></DIV>
<DIV style="position:absolute;top:55069;left:166"><NOBR>将 examples/ejb/cmproster 目录作为工作目录，然后运行 compile-cmp 目标，从而完成所</NOBR></DIV>
<DIV style="position:absolute;top:55092;left:135"><NOBR>有代码的编译工作。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55148;left:135"><NOBR>ant -f jboss-build.xml compile-cmp </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:55197;left:166"><NOBR>然后，运行 package-team，以构建包含实体 Bean 的 EJB jar 文件。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55253;left:135"><NOBR>ant -f jboss-build.xml package-team</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:55302;left:166"><NOBR>运行 package-roster 目标，以构建包会话 Bean 的 EJB jar 文件。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55358;left:135"><NOBR>ant -f jboss-build.xml package-roster </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:55407;left:166"><NOBR>通过 jar 目录能够找到它们。运行 package-roster-client 目标能够构建客户 jar 文件。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55463;left:135"><NOBR>ant -f jboss-build.xml package-roster-client </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:55512;left:166"><NOBR>最后，使用 assemble-roster 目标，以集成 RosterApp EAR 存档。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55568;left:135"><NOBR>ant -f jboss-build.xml assemble-roster </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:55747;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="45"><B>Page 45</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55858;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:56891;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:56889;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:56907;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:56889;left:745"><NOBR>39</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:55882;left:135"><NOBR>7.2  部署和运行实例</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:55922;left:166"><NOBR>使用 Ant 目标 deploy-cmp 能够应用的部署。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:55978;left:135"><NOBR>ant -f jboss-build.xml deploy-cmp </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:56027;left:166"><NOBR>从 jar 目录将 RosterApp.ear 文件拷贝到 JBoss  deploy 目录（或者使用 Ant 目标</NOBR></DIV>
<DIV style="position:absolute;top:56053;left:135"><NOBR>deploy-cmp），然后查看服务器的输出信息。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:56107;left:135"><NOBR>13:49:11,044 INFO  [EARDeployer] Init J2EE application: file:/private/tmp/jboss-4.0.4/serv </NOBR></DIV>
<DIV style="position:absolute;top:56130;left:135"><NOBR>er/default/deploy/RosterApp.ear</NOBR></DIV>
<DIV style="position:absolute;top:56153;left:135"><NOBR>13:49:11,884 INFO  [EjbModule] Deploying RosterBean </NOBR></DIV>
<DIV style="position:absolute;top:56177;left:135"><NOBR>13:49:13,366 INFO  [EjbModule] Deploying TeamBean </NOBR></DIV>
<DIV style="position:absolute;top:56200;left:135"><NOBR>13:49:13,751 INFO  [EjbModule] Deploying LeagueBean </NOBR></DIV>
<DIV style="position:absolute;top:56224;left:135"><NOBR>13:49:13,842 INFO  [EjbModule] Deploying PlayerBean </NOBR></DIV>
<DIV style="position:absolute;top:56247;left:135"><NOBR>13:49:14,377 INFO  [EJBDeployer] Deployed: file:/private/tmp/jboss-4.0.4/server/default/tm</NOBR></DIV>
<DIV style="position:absolute;top:56270;left:135"><NOBR>p/deploy/tmp29312RosterApp.ear-contents/roster-ejb.jar </NOBR></DIV>
<DIV style="position:absolute;top:56294;left:135"><NOBR>13:49:17,931 INFO  [EJBDeployer] Deployed: file:/private/tmp/jboss-4.0.4/server/default/tm</NOBR></DIV>
<DIV style="position:absolute;top:56317;left:135"><NOBR>p/deploy/tmp29312RosterApp.ear-contents/team-ejb.jar </NOBR></DIV>
<DIV style="position:absolute;top:56341;left:135"><NOBR>13:49:17,991 INFO  [EARDeployer] Started J2EE application: file:/private/tmp/jboss-4.0.4/s </NOBR></DIV>
<DIV style="position:absolute;top:56364;left:135"><NOBR>erver/default/deploy/RosterApp.ear </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:56413;left:166"><NOBR>其中，有几点值得用户注意。在 Duke 银行应用中，本书在 jboss.xml 文件中指定了</NOBR></DIV>
<DIV style="position:absolute;top:56439;left:135"><NOBR>EJBHome 引用的 JNDI 名。如果没有提供这些 JNDI 名，JBoss 默认使用 EJB 名代替。因此，</NOBR></DIV>
<DIV style="position:absolute;top:56460;left:135"><NOBR>会话 Bean 绑定到 RosterBean，等等。通过 JMX 控制台能够确认这些信息。</NOBR></DIV>
<DIV style="position:absolute;top:56483;left:166"><NOBR>初次部署该应用时，JBoss 会自动创建要求的数据库表。如果用户查看数据库模式（第</NOBR></DIV>
<DIV style="position:absolute;top:56509;left:135"><NOBR>4.1.7.3 有介绍），则能够看到 JBoss 为每个实体 Bean 创建了表。而且还创建了一张关系表，</NOBR></DIV>
<DIV style="position:absolute;top:56530;left:135"><NOBR>以处理队员（player）和对（team），这个多队多关系。其中，表名和列名对应于实体 Bean</NOBR></DIV>
<DIV style="position:absolute;top:56553;left:135"><NOBR>名和各个属性。如果这些名字能够满足要求，则用户不用进一步指定数据库模式。现在，用</NOBR></DIV>
<DIV style="position:absolute;top:56577;left:135"><NOBR>户需要手工将 PlayerBean 中的 position 域映射到 pos 列，因此默认列名 position 是 HSQL 中</NOBR></DIV>
<DIV style="position:absolute;top:56600;left:135"><NOBR>的关键字。通过 jbosscmp-jdbc.xml 文件能够定义模式。</NOBR></DIV>
<DIV style="position:absolute;top:56624;left:166"><NOBR>请注意，如果将 org.jboss.ejb.plugins.cmp 包（2.2.2 节）的日志级别调整到 DEBUG，则</NOBR></DIV>
<DIV style="position:absolute;top:56650;left:135"><NOBR>CMP 引擎将把执行的 SQL 命令都打印出来。这对于理解 CMP 引擎的工作机制以及不同调</NOBR></DIV>
<DIV style="position:absolute;top:56670;left:135"><NOBR>优参数是如何影响数据装载很有帮助。</NOBR></DIV>
<DIV style="position:absolute;top:56718;left:135"><NOBR><B>7.2.1  </B>运行客户应用</NOBR></DIV>
<DIV style="position:absolute;top:56760;left:166"><NOBR>客户应用借助于会话 Bean 接口能够完成数据的创建和获得。它创建俱乐部、队以及队</NOBR></DIV>
<DIV style="position:absolute;top:56783;left:135"><NOBR>员，并将它们添加到数据库中。其中，用户获取数据的会话 Bean 方法主要是封装了对 EJB </NOBR></DIV>
<DIV style="position:absolute;top:56809;left:135"><NOBR>finder 方法的调用。运行客户应用和输出日志信息如下。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:56863;left:135"><NOBR>$ ant -f jboss-build.xml run-cmp </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:57010;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="46"><B>Page 46</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:57121;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:58154;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:58152;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:58170;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:58152;left:745"><NOBR>40</NOBR></DIV>
<DIV style="position:absolute;top:57152;left:135"><NOBR>Buildfile: jboss-build.xml</NOBR></DIV>
<DIV style="position:absolute;top:57198;left:135"><NOBR>run-cmp: </NOBR></DIV>
<DIV style="position:absolute;top:57222;left:135"><NOBR>[java] P10 Terry Smithson midfielder 100.0 </NOBR></DIV>
<DIV style="position:absolute;top:57245;left:135"><NOBR>[java] P6 Ian Carlyle goalkeeper 555.0 </NOBR></DIV>
<DIV style="position:absolute;top:57269;left:135"><NOBR>[java] P7 Rebecca Struthers midfielder 777.0 </NOBR></DIV>
<DIV style="position:absolute;top:57292;left:135"><NOBR>[java] P8 Anne Anderson forward 65.0 </NOBR></DIV>
<DIV style="position:absolute;top:57315;left:135"><NOBR>[java] P9 Jan Wesley defender 100.0 </NOBR></DIV>
<DIV style="position:absolute;top:57362;left:135"><NOBR>[java] T1 Honey Bees Visalia </NOBR></DIV>
<DIV style="position:absolute;top:57386;left:135"><NOBR>[java] T2 Gophers Manteca </NOBR></DIV>
<DIV style="position:absolute;top:57409;left:135"><NOBR>[java] T5 Crows Orland </NOBR></DIV>
<DIV style="position:absolute;top:57456;left:135"><NOBR>[java] P2 Alice Smith defender 505.0 </NOBR></DIV>
<DIV style="position:absolute;top:57479;left:135"><NOBR>[java] P22 Janice Walker defender 857.0 </NOBR></DIV>
<DIV style="position:absolute;top:57503;left:135"><NOBR>[java] P25 Frank Fletcher defender 399.0 </NOBR></DIV>
<DIV style="position:absolute;top:57526;left:135"><NOBR>[java] P5 Barney Bold defender 100.0 </NOBR></DIV>
<DIV style="position:absolute;top:57549;left:135"><NOBR>[java] P9 Jan Wesley defender 100.0 </NOBR></DIV>
<DIV style="position:absolute;top:57596;left:135"><NOBR>[java] L1 Mountain Soccer </NOBR></DIV>
<DIV style="position:absolute;top:57620;left:135"><NOBR>[java] L2 Valley Basketball </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:57669;left:166"><NOBR>请注意，客户应用没有删除数据。因此如果如果运行客户应用两次以上，应用将抛出异</NOBR></DIV>
<DIV style="position:absolute;top:57692;left:135"><NOBR>常，因为实体已经存在。如果再次运行，则需要删除这些数据。其中，最简单的方式（如果</NOBR></DIV>
<DIV style="position:absolute;top:57715;left:135"><NOBR>使用 HSQL）是删除当前工作服务器配置中 data/hypersonic 目录中的内容（假定，用户没有</NOBR></DIV>
<DIV style="position:absolute;top:57739;left:135"><NOBR>保存其他重要的数据在这里），然后重启服务器。本书同时也提供了简单的 SQL 脚本，以复</NOBR></DIV>
<DIV style="position:absolute;top:57762;left:135"><NOBR>位数据库，即运行 db-delete 目标。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:57818;left:135"><NOBR>ant -f jboss-build.xml db-delete </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:57867;left:166"><NOBR>用户也可以直接使用 HSQL 管理器工具，通过 SQL 命令删除数据。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:57912;left:135"><NOBR>7.3  自定义 CMP </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:57953;left:166"><NOBR>用户通过 jbosscmp-jdbc.xml 文件能够进一步自定义 CMP 引擎的行为。该文件用于基本</NOBR></DIV>
<DIV style="position:absolute;top:57976;left:135"><NOBR>信息配置，比如数据源名、类型映射（Hypersonic、Oracle 等等）、在部署时是否自动创建数</NOBR></DIV>
<DIV style="position:absolute;top:58000;left:135"><NOBR>据库表、在关闭服务器时是否自动删除数据库表。用户能够自定义 EJB 映射到的数据库表</NOBR></DIV>
<DIV style="position:absolute;top:58023;left:135"><NOBR>名和列名，还可以根据自身要求调整 CMP 引擎装载数据的方式。比如，通过使用 read-ahead</NOBR></DIV>
<DIV style="position:absolute;top:58046;left:135"><NOBR>元素，用户能够通过单个 SQL 调用读取并缓存多个 EJB 的数据块，供后续访问使用。用户</NOBR></DIV>
<DIV style="position:absolute;top:58070;left:135"><NOBR>可以指定 eager 装载组，即初始时，只装载实体 Bean 的某些域数据。相反，通过指定 lazy</NOBR></DIV>
<DIV style="position:absolute;top:58093;left:135"><NOBR>装载组，能够实现延时装载。使用类似的机制能够实现 EJB 间关系的访问。如果用户使用</NOBR></DIV>
<DIV style="position:absolute;top:58119;left:135"><NOBR>BMP，则不可能有这么灵活，因为每个 Bean 必须使用单个 SQL 调用装载。因此，用户需要</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:58273;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="47"><B>Page 47</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:58384;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:59417;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:59415;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:59433;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:59415;left:745"><NOBR>41</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:58406;left:135"><NOBR>开发自身的 SQL，并手工实现关系管理。选择 CMP，还是 BMP，已经很明显了。极少情况</NOBR></DIV>
<DIV style="position:absolute;top:58429;left:135"><NOBR>下，用户需要在应用中使用 BMP。</NOBR></DIV>
<DIV style="position:absolute;top:58452;left:166"><NOBR>当然，调整 CMP 引擎的详细内容并不是本书的讨论主题。通过阅读</NOBR></DIV>
<DIV style="position:absolute;top:58479;left:135"><NOBR>docs/dtd/jbosscmp-jdbc_4_0.dtd（提供了详细注释），用户能够较好地了解 CMP 引擎。在 conf</NOBR></DIV>
<DIV style="position:absolute;top:58499;left:135"><NOBR>目录中还存在标准设置，即 standardjbosscmp-jdbc.xml 文件，它提供了默认设置，并且提供</NOBR></DIV>
<DIV style="position:absolute;top:58523;left:135"><NOBR>了常见数据库的类型映射列表。该文件的开头部分如下。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:58578;left:135"><NOBR>&lt;jbosscmp-jdbc&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58602;left:162"><NOBR>&lt;defaults&gt;</NOBR></DIV>
<DIV style="position:absolute;top:58625;left:189"><NOBR>&lt;datasource&gt;java:/DefaultDS&lt;/datasource&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58649;left:189"><NOBR>&lt;datasource-mapping&gt;Hypersonic SQL&lt;/datasource-mapping&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58695;left:189"><NOBR>&lt;create-table&gt;true&lt;/create-table&gt;</NOBR></DIV>
<DIV style="position:absolute;top:58719;left:189"><NOBR>&lt;remove-table&gt;false&lt;/remove-table&gt;</NOBR></DIV>
<DIV style="position:absolute;top:58742;left:189"><NOBR>&lt;read-only&gt;false&lt;/read-only&gt;</NOBR></DIV>
<DIV style="position:absolute;top:58766;left:189"><NOBR>&lt;read-time-out&gt;300000&lt;/read-time-out&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58789;left:189"><NOBR>&lt;row-locking&gt;false&lt;/row-locking&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58812;left:189"><NOBR>&lt;pk-constraint&gt;true&lt;/pk-constraint&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58836;left:189"><NOBR>&lt;fk-constraint&gt;false&lt;/fk-constraint&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58859;left:189"><NOBR>&lt;preferred-relation-mapping&gt;foreign-key&lt;/preferred-relation-mapping&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58883;left:189"><NOBR>&lt;read-ahead&gt;</NOBR></DIV>
<DIV style="position:absolute;top:58906;left:216"><NOBR>&lt;strategy&gt;on-load&lt;/strategy&gt;</NOBR></DIV>
<DIV style="position:absolute;top:58929;left:216"><NOBR>&lt;page-size&gt;1000&lt;/page-size&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58953;left:216"><NOBR>&lt;eager-load-group&gt;*&lt;/eager-load-group&gt; </NOBR></DIV>
<DIV style="position:absolute;top:58976;left:189"><NOBR>&lt;/read-ahead&gt;</NOBR></DIV>
<DIV style="position:absolute;top:59000;left:189"><NOBR>&lt;list-cache-max&gt;1000&lt;/list-cache-max&gt;</NOBR></DIV>
<DIV style="position:absolute;top:59023;left:135"><NOBR>... </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:59072;left:166"><NOBR>用户可以看到：standardjbosscmp-jdbc.xml 设置了数据源，并将嵌入式 Hypersonic 数据</NOBR></DIV>
<DIV style="position:absolute;top:59095;left:135"><NOBR>库作为默认数据库，将 table-creation 设置为 true，将 removal 设置为 false。因此，如果表不</NOBR></DIV>
<DIV style="position:absolute;top:59119;left:135"><NOBR>存在，CMP 引擎会创建它。read-only 和 read-time-out 元素分别指定数据是否只读和数据的</NOBR></DIV>
<DIV style="position:absolute;top:59142;left:135"><NOBR>有效时间（单位：毫秒）。请注意，大部分元素都能够用于不同粒度，比如每实体 Bean 级别，</NOBR></DIV>
<DIV style="position:absolute;top:59166;left:135"><NOBR>或者实体 Bean 的域级别（详细内容，请参考 DTD）。使用了 on-load 策略的 read-ahead 元素</NOBR></DIV>
<DIV style="position:absolute;top:59189;left:135"><NOBR>表明，在访问实体 Bean（而不是调用 finder 方法）时才装载 EJB 数据。page-size 表明，SQL</NOBR></DIV>
<DIV style="position:absolute;top:59212;left:135"><NOBR>命令一次最多能够装载 1000 个实体。用户能够在 jbosscmp-jdbc.xml 文件中覆盖默认设置，</NOBR></DIV>
<DIV style="position:absolute;top:59236;left:135"><NOBR>或者直接修改 standardjbosscmp-jdbc.xml 文件。</NOBR></DIV>
<DIV style="position:absolute;top:59259;left:166"><NOBR>《The JBoss 4 Application Server Guide》一书给出了 CMP 引擎及其不同装载策略的详细</NOBR></DIV>
<DIV style="position:absolute;top:59283;left:135"><NOBR>阐述。</NOBR></DIV>
<DIV style="position:absolute;top:59330;left:135"><NOBR><B>7.3.1 XDoclet</B></NOBR></DIV>
<DIV style="position:absolute;top:59372;left:166"><NOBR>开发和维护部署描述符很费时间，而且容易出错。尤其是对于那些需要完整自定义 CMP</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:59536;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="48"><B>Page 48</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:59647;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:60680;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:60678;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:60696;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:60678;left:745"><NOBR>42</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:59669;left:135"><NOBR>引擎行为的应用，即需要维护内容很多的、复杂的文件，则更容易出错。如果用户在使用</NOBR></DIV>
<DIV style="position:absolute;top:59695;left:135"><NOBR>CMP（或者，EJB），则学习使用 XDoclet 代码生成引擎（http://xdoclet.sourceforge.net）很有</NOBR></DIV>
<DIV style="position:absolute;top:59715;left:135"><NOBR>必要。XDoclet 使用 JavaDoc 风格属性标签，并能够为用户生成部署描述符、EJB 接口以及</NOBR></DIV>
<DIV style="position:absolute;top:59739;left:135"><NOBR>其他产出物。XDoclet 对 JBossCMP 提供了完整支持，并且学习曲线非常平滑，因此本书强</NOBR></DIV>
<DIV style="position:absolute;top:59762;left:135"><NOBR>烈推荐（事实上，确实如此）将 XDoclet 用于实际项目。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:60799;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="49"><B>Page 49</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:60910;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:61943;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:61941;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:61959;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:61941;left:745"><NOBR>43</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:60959;left:135"><NOBR>第 8 章　使用其他数据库</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:61017;left:166"><NOBR>在以前的章节，本书的应用仅仅使用了 JBoss 默认数据源。其中，默认数据源由嵌入式</NOBR></DIV>
<DIV style="position:absolute;top:61044;left:135"><NOBR>HSQL 数据库实例提供，并且绑定到 JNDI 名，&ldquo;java:/DefaultDS&rdquo;。在 JBoss 中集成数据库对</NOBR></DIV>
<DIV style="position:absolute;top:61064;left:135"><NOBR>于运行实例带来了很多便利，而且 HSQL 适合于大部分场合。然而，用户可能需要使用其</NOBR></DIV>
<DIV style="position:absolute;top:61088;left:135"><NOBR>他数据库，或者替换默认数据源，或者从同一服务器中访问多个数据库。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:61133;left:135"><NOBR>8.1  配置数据源</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:61176;left:166"><NOBR>JBoss 中的数据库连接管理完全由 JBoss JCA 实现处理。因此，借助于 JCA 资源适配器</NOBR></DIV>
<DIV style="position:absolute;top:61197;left:135"><NOBR>能够访问数据库，并且能够处理连接池、安全性和事务。</NOBR></DIV>
<DIV style="position:absolute;top:61244;left:135"><NOBR><B>8.1.1  </B>包裹 <B>JDBC </B>的资源适配器</NOBR></DIV>
<DIV style="position:absolute;top:61286;left:166"><NOBR>如果没有为数据库提供专有适配器，则用户需要配置使用 JBoss 提供的、包裹了 JDBC</NOBR></DIV>
<DIV style="position:absolute;top:61310;left:135"><NOBR>的资源适配器（2.2.4 节曾给出过讨论）。很明显，用户需要提供 JDBC 驱动，并提供相应的</NOBR></DIV>
<DIV style="position:absolute;top:61333;left:135"><NOBR>类（仅仅需要将驱动 jar 或 zip 文件拷贝到当前工作的服务器配置中的 lib 目录）。其中，不</NOBR></DIV>
<DIV style="position:absolute;top:61357;left:135"><NOBR>同数据源配置的主要区别在于，它们是使用本地，还是XA事务的JDBC适配器。如果某JDBC</NOBR></DIV>
<DIV style="position:absolute;top:61380;left:135"><NOBR>驱动提供了 javax.sql.XADataSource 实现，则支持 XA 事务的数据源可用。有一点请注意，</NOBR></DIV>
<DIV style="position:absolute;top:61403;left:135"><NOBR>即使 XADataSource 实现可用，用户还是可以选择使用本地事务（比如，请参考 JBoss 提供</NOBR></DIV>
<DIV style="position:absolute;top:61427;left:135"><NOBR>的两份 Oracle 配置文件）。同时，还存在 no-transaction 配置，用户应该很少以这种方式使用</NOBR></DIV>
<DIV style="position:absolute;top:61450;left:135"><NOBR>数据库。</NOBR></DIV>
<DIV style="position:absolute;top:61497;left:135"><NOBR><B>8.1.2  </B>数据源配置文件</NOBR></DIV>
<DIV style="position:absolute;top:61540;left:166"><NOBR>数据源配置文件的后缀为-ds.xml，因此 JCA 部署器能够正确处理它们。其中，目录</NOBR></DIV>
<DIV style="position:absolute;top:61566;left:135"><NOBR>docs/example/jca 包含了用于各种数据库的配置实例，用户最好能够以其中一个为切入点。</NOBR></DIV>
<DIV style="position:absolute;top:61586;left:135"><NOBR>数据源配置文件格式的完整描述请参考 docs/dtd/jboss-ds_1_5.dtd。其他有关该文件和 JBoss</NOBR></DIV>
<DIV style="position:absolute;top:61613;left:135"><NOBR>JCA 实现，用户可以参考《The JBoss 4 Application Server Guide》一书。</NOBR></DIV>
<DIV style="position:absolute;top:61633;left:166"><NOBR>本地事务数据源可使用 local-tx-datasource 元素配置、 XA 事务数据源可使用</NOBR></DIV>
<DIV style="position:absolute;top:61659;left:135"><NOBR>xa-tx-datasource 元素配置。示例文件 generic-ds.xml 展示了如何同时使用这两种类型，以及</NOBR></DIV>
<DIV style="position:absolute;top:61680;left:135"><NOBR>其他可用元素（比如，连接池）的配置。对于同时提供了本地和 XA 配置的数据库实例有</NOBR></DIV>
<DIV style="position:absolute;top:61706;left:135"><NOBR>Oracle、DB2、Informix。</NOBR></DIV>
<DIV style="position:absolute;top:61727;left:166"><NOBR>如果用户查看 firebird-ds.xml、facets-ds.xml、sap3-ds.xml 实例文件，则将注意到它们的</NOBR></DIV>
<DIV style="position:absolute;top:61750;left:135"><NOBR>格式完全不同，即根元素为 connection-factories，而不是 datasources。这些文件是基于通用</NOBR></DIV>
<DIV style="position:absolute;top:61774;left:135"><NOBR>的 JCA 配置语法，供配置了相应的 JCA 资源适配器使用。正如本书于 2.2.4 节阐述的一样，</NOBR></DIV>
<DIV style="position:absolute;top:61797;left:135"><NOBR>该语法不是针对数据源配置的，比如用于配置 JMS 资源适配器的 jmx-ds.xml 文件。</NOBR></DIV>
<DIV style="position:absolute;top:61820;left:166"><NOBR>接下来，本书将给出具体配置的详细步骤。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:61865;left:135"><NOBR>8.2  将 MySQL 作为默认数据源</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:61909;left:166"><NOBR>MySQL 是世界范围内使用最为流行的开源数据库之一，并且许多大型公司一直都在使</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:62062;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="50"><B>Page 50</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:62173;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:63206;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:63204;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:63222;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:63204;left:745"><NOBR>44</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:62195;left:135"><NOBR>用它，比如 Yahoo 和 NASA。官方提供的 JDBC 驱动称之为 Connector/J。在本实例中，使用</NOBR></DIV>
<DIV style="position:absolute;top:62218;left:135"><NOBR>了 MySQL 4.1.17 和 Connector/J 3.0.15。通过 http://www.mysql.com 能够下载到它们。</NOBR></DIV>
<DIV style="position:absolute;top:62265;left:135"><NOBR><B>8.2.1  </B>创建数据库和用户</NOBR></DIV>
<DIV style="position:absolute;top:62307;left:166"><NOBR>本书假定用户已经熟悉 MySQL 的安装，而且知道如何运行它和其基本知识。通过命令</NOBR></DIV>
<DIV style="position:absolute;top:62331;left:135"><NOBR>行运行 mysql 客户应用能够执行一些管理工作。用户应该以具有足够权限的用户连接到</NOBR></DIV>
<DIV style="position:absolute;top:62357;left:135"><NOBR>MySQL 服务器（比如，通过指定-uroot 选项，使得以 MySQL root 用户运行）。</NOBR></DIV>
<DIV style="position:absolute;top:62378;left:166"><NOBR>首先，创建数据库 jboss，供 JBoss 使用。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:62434;left:135"><NOBR>mysql&gt; CREATE DATABASE jboss; </NOBR></DIV>
<DIV style="position:absolute;top:62457;left:135"><NOBR>Query OK, 1 row affected (0.05 sec) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:62506;left:166"><NOBR>然后，验证是否成功创建。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:62562;left:135"><NOBR>mysql&gt; SHOW DATABASES; </NOBR></DIV>
<DIV style="position:absolute;top:62585;left:135"><NOBR>+----------+ </NOBR></DIV>
<DIV style="position:absolute;top:62609;left:135"><NOBR>| Database | </NOBR></DIV>
<DIV style="position:absolute;top:62632;left:135"><NOBR>+----------+ </NOBR></DIV>
<DIV style="position:absolute;top:62655;left:135"><NOBR>| jboss </NOBR></DIV>
<DIV style="position:absolute;top:62655;left:196"><NOBR>| </NOBR></DIV>
<DIV style="position:absolute;top:62679;left:135"><NOBR>| mysql</NOBR></DIV>
<DIV style="position:absolute;top:62679;left:201"><NOBR>| </NOBR></DIV>
<DIV style="position:absolute;top:62702;left:135"><NOBR>| test</NOBR></DIV>
<DIV style="position:absolute;top:62702;left:193"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:62726;left:135"><NOBR>+----------+ </NOBR></DIV>
<DIV style="position:absolute;top:62749;left:135"><NOBR>3 rows in set (0.00 sec) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:62798;left:166"><NOBR>接下来，创建用户名为 jboss、密码为 password 的用户，以访问 jboss 数据库。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:62854;left:135"><NOBR>mysql&gt; GRANT ALL PRIVILEGES ON jboss.* TO jboss@localhost IDENTIFIED BY &#39;password&#39;; </NOBR></DIV>
<DIV style="position:absolute;top:62877;left:135"><NOBR>Query OK, 0 rows affected (0.06 sec) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:62926;left:166"><NOBR>最后，再次验证一切是否就绪。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:62982;left:135"><NOBR>mysql&gt; select User,Host,Password from mysql.User; </NOBR></DIV>
<DIV style="position:absolute;top:63006;left:135"><NOBR>+-------+-----------+------------------+ </NOBR></DIV>
<DIV style="position:absolute;top:63029;left:135"><NOBR>| User | Host</NOBR></DIV>
<DIV style="position:absolute;top:63029;left:252"><NOBR>| Password</NOBR></DIV>
<DIV style="position:absolute;top:63029;left:371"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63052;left:135"><NOBR>+-------+-----------+------------------+ </NOBR></DIV>
<DIV style="position:absolute;top:63076;left:135"><NOBR>| root | localhost |</NOBR></DIV>
<DIV style="position:absolute;top:63076;left:359"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63099;left:135"><NOBR>| root | &percnt;</NOBR></DIV>
<DIV style="position:absolute;top:63099;left:254"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63099;left:378"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63123;left:135"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63123;left:185"><NOBR>| localhost |</NOBR></DIV>
<DIV style="position:absolute;top:63123;left:367"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63146;left:135"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63146;left:185"><NOBR>| &percnt;</NOBR></DIV>
<DIV style="position:absolute;top:63146;left:263"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63146;left:387"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:63169;left:135"><NOBR>| jboss | localhost | 5d2e19393cc5ef67 |</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:63325;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="51"><B>Page 51</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:63436;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:64469;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:64467;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:64485;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:64467;left:745"><NOBR>45</NOBR></DIV>
<DIV style="position:absolute;top:63467;left:135"><NOBR>+-------+-----------+------------------+ </NOBR></DIV>
<DIV style="position:absolute;top:63490;left:135"><NOBR>5 rows in set (0.02 sec) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:63563;left:135"><NOBR><B>8.2.2  </B>安装 <B>JDBC </B>驱动和部署数据源</NOBR></DIV>
<DIV style="position:absolute;top:63605;left:166"><NOBR>为将 MySQL JDBC 驱动供 JBoss 使用，用户需要将 Connector/J 发布版中的</NOBR></DIV>
<DIV style="position:absolute;top:63631;left:135"><NOBR>mysql-connector-java-3.0.15-ga-bin.jar 拷贝到 default 服务器配置中的 lib 目录（当然，用户必</NOBR></DIV>
<DIV style="position:absolute;top:63652;left:135"><NOBR>须在使用 default 服务器配置）。然后，在 deploy 目录创建称之为 mysql-ds.xml 的数据源配置。</NOBR></DIV>
<DIV style="position:absolute;top:63675;left:135"><NOBR>另外，相应的 username 和 password 在上述过程已经给出。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:63731;left:135"><NOBR>&lt;datasources&gt; </NOBR></DIV>
<DIV style="position:absolute;top:63755;left:162"><NOBR>&lt;local-tx-datasource&gt; </NOBR></DIV>
<DIV style="position:absolute;top:63778;left:189"><NOBR>&lt;jndi-name&gt;MySqlDS&lt;/jndi-name&gt;</NOBR></DIV>
<DIV style="position:absolute;top:63801;left:189"><NOBR>&lt;connection-url&gt;jdbc:mysql://localhost:3306/jboss&lt;/connection-url&gt; </NOBR></DIV>
<DIV style="position:absolute;top:63825;left:189"><NOBR>&lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt; </NOBR></DIV>
<DIV style="position:absolute;top:63848;left:189"><NOBR>&lt;user-name&gt;jboss&lt;/user-name&gt;</NOBR></DIV>
<DIV style="position:absolute;top:63872;left:189"><NOBR>&lt;password&gt;password&lt;/password&gt; </NOBR></DIV>
<DIV style="position:absolute;top:63895;left:162"><NOBR>&lt;/local-tx-datasource&gt; </NOBR></DIV>
<DIV style="position:absolute;top:63919;left:135"><NOBR>&lt;/datasources&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:63967;left:166"><NOBR>由于新加了 jar 文件到 lib 目录（译者注：default/lib）中，因此用户需要告知 JBoss，因</NOBR></DIV>
<DIV style="position:absolute;top:63991;left:135"><NOBR>此如果在 JBoss 运行期间加入 jar 到 lib 目录，则需要重启 JBoss 服务器。</NOBR></DIV>
<DIV style="position:absolute;top:64038;left:135"><NOBR><B>8.2.3  </B>测试 <B>MySQL </B>数据源</NOBR></DIV>
<DIV style="position:absolute;top:64080;left:166"><NOBR>本章将使用 CMP roster 应用测试 MySQL 数据源。其中，唯一需要改变的是将类型映射</NOBR></DIV>
<DIV style="position:absolute;top:64104;left:135"><NOBR>从 Hypersonic 修改为 MySQL。用户可以添加新的 jbosscmp-jdbc.xml 给 EJB 部署单元，或者</NOBR></DIV>
<DIV style="position:absolute;top:64127;left:135"><NOBR>修改全局默认 conf/standardjbosscmp-jdbc.xml 设置。当然，第二种方法更简单，因为不用重</NOBR></DIV>
<DIV style="position:absolute;top:64151;left:135"><NOBR>新打包应用。其缺点是，需要重启 JBoss，否则修改不能够生效。编辑该文件，然后将</NOBR></DIV>
<DIV style="position:absolute;top:64177;left:135"><NOBR>datasource-mapping 元素修改为 mySQL。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:64230;left:135"><NOBR>&lt;jbosscmp-jdbc&gt; </NOBR></DIV>
<DIV style="position:absolute;top:64253;left:162"><NOBR>&lt;defaults&gt;</NOBR></DIV>
<DIV style="position:absolute;top:64277;left:189"><NOBR>&lt;datasource&gt;java:/MySqlDS&lt;/datasource&gt; </NOBR></DIV>
<DIV style="position:absolute;top:64300;left:189"><NOBR>&lt;datasource-mapping&gt;mySQL&lt;/datasource-mapping&gt; </NOBR></DIV>
<DIV style="position:absolute;top:64323;left:162"><NOBR>&lt;/defaults&gt;</NOBR></DIV>
<DIV style="position:absolute;top:64370;left:162"><NOBR>&lt;enterprise-beans&gt; </NOBR></DIV>
<DIV style="position:absolute;top:64394;left:135"><NOBR>... </NOBR></DIV>
<DIV style="position:absolute;top:64417;left:162"><NOBR>&lt;/enterprise-beans&gt; </NOBR></DIV>
<DIV style="position:absolute;top:64441;left:135"><NOBR>&lt;/jbosscmp-jdbc&gt; </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:64588;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="52"><B>Page 52</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:64699;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:65732;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:65730;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:65748;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:65730;left:745"><NOBR>46</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:64744;left:166"><NOBR>重启 JBoss 后，用户应该能够部署应用，并同 7.2 节一样，查看表信息。同 MySQL 客</NOBR></DIV>
<DIV style="position:absolute;top:64767;left:135"><NOBR>户端能够看到它们。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:64823;left:135"><NOBR>mysql&gt; show tables;</NOBR></DIV>
<DIV style="position:absolute;top:64847;left:135"><NOBR>+-----------------------------------+ </NOBR></DIV>
<DIV style="position:absolute;top:64870;left:135"><NOBR>| Tables_in_jboss</NOBR></DIV>
<DIV style="position:absolute;top:64870;left:357"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:64893;left:135"><NOBR>+-----------------------------------+ </NOBR></DIV>
<DIV style="position:absolute;top:64917;left:135"><NOBR>| LeagueBean</NOBR></DIV>
<DIV style="position:absolute;top:64917;left:370"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:64940;left:135"><NOBR>| PlayerBean</NOBR></DIV>
<DIV style="position:absolute;top:64940;left:365"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:64964;left:135"><NOBR>| PlayerBean_teams_TeamBean_players |</NOBR></DIV>
<DIV style="position:absolute;top:64987;left:135"><NOBR>| TeamBean</NOBR></DIV>
<DIV style="position:absolute;top:64987;left:375"><NOBR>|</NOBR></DIV>
<DIV style="position:absolute;top:65010;left:135"><NOBR>+-----------------------------------+ </NOBR></DIV>
<DIV style="position:absolute;top:65034;left:135"><NOBR>4 rows in set (0.00 sec) </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:65083;left:166"><NOBR>用户还能够看到 JMS 持久化数据库表也在这里，因为本书已经将 MySQL 作为默认数</NOBR></DIV>
<DIV style="position:absolute;top:65106;left:135"><NOBR>据源了。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:65151;left:135"><NOBR>8.3  设置 Oracle9i 的 XADataSource </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:65192;left:166"><NOBR>在商业数据库领域，Oracle是主要的竞争者之一。因此，大部分用户都会涉及到Oracle</NOBR></DIV>
<DIV style="position:absolute;top:65215;left:135"><NOBR>的使用。用户可以<A href="http://www.oracle.com/">通过</A><FONT color="#0000ff" face="Times"><A href="http://www.oracle.com/">http://www.oracle.com</A></FONT><A href="http://www.oracle.com/"></A>免费下载，供非商业目的使用。安装和配置Oracle</NOBR></DIV>
<DIV style="position:absolute;top:65239;left:135"><NOBR>并不是很关键的问题。Oracle是功能强大的数据库，而且它还提供了很多额外的功能和技术</NOBR></DIV>
<DIV style="position:absolute;top:65262;left:135"><NOBR>（Apache Web服务器、多个JDK、ORB等等）。这些方面可能并不用户所需要的，但通常都</NOBR></DIV>
<DIV style="position:absolute;top:65286;left:135"><NOBR>会随Oracle数据库一同安装。因此，本书假定用户已安装了Oracle，比如，本文使用Oracle 10g。</NOBR></DIV>
<DIV style="position:absolute;top:65333;left:135"><NOBR><B>8.3.1  </B>出于 <B>Oracle </B>兼容性而设置 <B>Pad </B>值</NOBR></DIV>
<DIV style="position:absolute;top:65375;left:166"><NOBR>如果用户查看 default/conf 目录中的 jboss-service.xml 文件，将发现如下 MBean 服务。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:65431;left:135"><NOBR>&lt;!-- The configurable Xid factory. For use with Oracle, set pad to true --&gt; </NOBR></DIV>
<DIV style="position:absolute;top:65454;left:135"><NOBR>&lt;mbean code=&quot;org.jboss.tm.XidFactory&quot;</NOBR></DIV>
<DIV style="position:absolute;top:65478;left:182"><NOBR>name=&quot;jboss:service=XidFactory&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:65501;left:162"><NOBR>&lt;!--attribute name=&quot;Pad&quot;&gt;true&lt;/attribute--&gt; </NOBR></DIV>
<DIV style="position:absolute;top:65525;left:135"><NOBR>&lt;/mbean&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:65574;left:166"><NOBR>事务服务需要使用 XidFactory  MBean 服务创建 XA 事务标识。其中的注释表明：如果</NOBR></DIV>
<DIV style="position:absolute;top:65597;left:135"><NOBR>使用 Oracle 数据库，则用户需要将属性 Pad 设置为 true 的那行也包括进来。这使得 XA 事</NOBR></DIV>
<DIV style="position:absolute;top:65620;left:135"><NOBR>务标识能够达到 64 位的最大长度。记得去重启 JBoss 应用服务器，否则修改不会生效。当</NOBR></DIV>
<DIV style="position:absolute;top:65644;left:135"><NOBR>然，还是等安装 JDBC 驱动后再说吧！</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:65851;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="53"><B>Page 53</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:65962;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:66995;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:66993;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:67011;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:66993;left:745"><NOBR>47</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:65986;left:135"><NOBR><B>8.3.2  </B>安装 <B>JDBC </B>驱动和部署数据源</NOBR></DIV>
<DIV style="position:absolute;top:66029;left:166"><NOBR>通过$ORACLE_HOME/jdbc/lib 目录能够找到 Oracle JDBC 驱动。其中，用户可能都比</NOBR></DIV>
<DIV style="position:absolute;top:66052;left:135"><NOBR>较熟悉旧版本的 Oracle  JDBC 驱动，比如 classes12.zip。在写作本书时，其最新版为</NOBR></DIV>
<DIV style="position:absolute;top:66078;left:135"><NOBR>ojdbc14.jar。同时，为解决 Oracle JDBC 使用过程中的一些问题，用户可以使用后缀为_g 的</NOBR></DIV>
<DIV style="position:absolute;top:66099;left:135"><NOBR>调试版本。同样，用户需要将相应的 jar 文件拷贝到 JBoss default 配置的 lib 目录中。用于非</NOBR></DIV>
<DIV style="position:absolute;top:66125;left:135"><NOBR>XA 的基本驱动类是 oracle.jdbc.driver.OracleDriver。本书将使用的 XADataSource 类称之为</NOBR></DIV>
<DIV style="position:absolute;top:66149;left:135"><NOBR>oracle.jdbc.xa.client.OracleXADataSource。</NOBR></DIV>
<DIV style="position:absolute;top:66169;left:166"><NOBR>用户需要拷贝一份 oracle-xa-ds.xml 配置文件，然后修改它，比如需要设置正确的 URL、</NOBR></DIV>
<DIV style="position:absolute;top:66193;left:135"><NOBR>用户名、密码。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:66248;left:135"><NOBR>&lt;datasources&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66272;left:162"><NOBR>&lt;xa-datasource&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66295;left:189"><NOBR>&lt;jndi-name&gt;XAOracleDS&lt;/jndi-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66319;left:189"><NOBR>&lt;track-connection-by-tx&gt;true&lt;/track-connection-by-tx&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66342;left:189"><NOBR>&lt;isSameRM-override-value&gt;false&lt;/isSameRM-override-value&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66365;left:189"><NOBR>&lt;xa-datasource-class&gt;oracle.jdbc.xa.client.OracleXADataSource&lt;/xa-datasource-class&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66389;left:189"><NOBR>&lt;xa-datasource-property name=&quot;URL&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66412;left:216"><NOBR>jdbc:oracle:thin:@monkeymachine:1521:jboss </NOBR></DIV>
<DIV style="position:absolute;top:66436;left:189"><NOBR>&lt;/xa-datasource-property&gt;</NOBR></DIV>
<DIV style="position:absolute;top:66459;left:189"><NOBR>&lt;xa-datasource-property name=&quot;User&quot;&gt;jboss&lt;/xa-datasource-property&gt;</NOBR></DIV>
<DIV style="position:absolute;top:66482;left:189"><NOBR>&lt;xa-datasource-property name=&quot;Password&quot;&gt;password&lt;/xa-datasource-property&gt;</NOBR></DIV>
<DIV style="position:absolute;top:66506;left:189"><NOBR>&lt;exception-sorter-class-name&gt;</NOBR></DIV>
<DIV style="position:absolute;top:66529;left:216"><NOBR>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter </NOBR></DIV>
<DIV style="position:absolute;top:66553;left:189"><NOBR>&lt;/exception-sorter-class-name&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66576;left:189"><NOBR>&lt;no-tx-separate-pools/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66599;left:162"><NOBR>&lt;/xa-datasource&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66646;left:162"><NOBR>&lt;mbean code=&quot;org.jboss.resource.adapter.jdbc.xa.oracle.OracleXAExceptionFormatter&quot; </NOBR></DIV>
<DIV style="position:absolute;top:66670;left:135"><NOBR>name=&quot;jboss.jca:service=OracleXAExceptionFormatter&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66693;left:189"><NOBR>&lt;depends optional-attribute-name=&quot;TransactionManagerService&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:66716;left:216"><NOBR>jboss:service=TransactionManager</NOBR></DIV>
<DIV style="position:absolute;top:66740;left:189"><NOBR>&lt;/depends&gt;</NOBR></DIV>
<DIV style="position:absolute;top:66763;left:162"><NOBR>&lt;/mbean&gt;</NOBR></DIV>
<DIV style="position:absolute;top:66787;left:135"><NOBR>&lt;/datasources&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:66836;left:166"><NOBR>本书使用了 Oracle Thin（纯 Java）驱动，并假定数据库运行在主机 monkeymachine 上。</NOBR></DIV>
<DIV style="position:absolute;top:66859;left:135"><NOBR>同时，数据库名（用 Oracle 行话说，就是 SID）为 jboss。本书还假定用户创建的 jboss 用户</NOBR></DIV>
<DIV style="position:absolute;top:66882;left:135"><NOBR>具有足够的权限。对于本实例而言，只需要给它赋予 dba 的权限。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:66938;left:135"><NOBR>SQL&gt; connect / as sysdba </NOBR></DIV>
<DIV style="position:absolute;top:66962;left:135"><NOBR>Connected. </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:67114;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="54"><B>Page 54</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:67225;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:68258;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:68256;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:68274;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:68256;left:745"><NOBR>48</NOBR></DIV>
<DIV style="position:absolute;top:67256;left:135"><NOBR>SQL&gt; create user jboss identified by password; </NOBR></DIV>
<DIV style="position:absolute;top:67279;left:135"><NOBR>User created.</NOBR></DIV>
<DIV style="position:absolute;top:67302;left:135"><NOBR>SQL&gt; grant dba to jboss; </NOBR></DIV>
<DIV style="position:absolute;top:67326;left:135"><NOBR>Grant succeeded. </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:67375;left:166"><NOBR>好了，请将配置文件拷贝到 deploy 目录。通过 JBoss 服务器控制台，用户应该可以看到</NOBR></DIV>
<DIV style="position:absolute;top:67398;left:135"><NOBR>如下输出信息。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:67454;left:135"><NOBR>11:33:45,174 INFO  [WrapperDataSourceService] Bound connection factory for resource adapter</NOBR></DIV>
<DIV style="position:absolute;top:67477;left:135"><NOBR>for ConnectionManager &#39;jboss.jca:name=XAOracleDS,service=DataSourceBinding to JNDI name </NOBR></DIV>
<DIV style="position:absolute;top:67501;left:135"><NOBR>&#39;java:XAOracleDS&#39;</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:67550;left:166"><NOBR>同以前一样，如果用户从 JMX 控制台使用 JNDIView  MBean 服务，将从列表中看到</NOBR></DIV>
<DIV style="position:absolute;top:67576;left:135"><NOBR>java:/XAOracleDS。</NOBR></DIV>
<DIV style="position:absolute;top:67620;left:135"><NOBR><B>8.3.3  </B>测试 <B>Oracle </B>数据源</NOBR></DIV>
<DIV style="position:absolute;top:67663;left:166"><NOBR>本节内容将再次使用 CMP 实例，以试用新创建的数据源。因此，用户需要将如下内容</NOBR></DIV>
<DIV style="position:absolute;top:67686;left:135"><NOBR>添加到 jbosscmp-jdbc.xml 文件中。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:67742;left:135"><NOBR>&lt;jbosscmp-jdbc&gt; </NOBR></DIV>
<DIV style="position:absolute;top:67765;left:162"><NOBR>&lt;defaults&gt;</NOBR></DIV>
<DIV style="position:absolute;top:67789;left:189"><NOBR>&lt;datasource&gt;java:/XAOracleDS&lt;/datasource&gt; </NOBR></DIV>
<DIV style="position:absolute;top:67812;left:189"><NOBR>&lt;datasource-mapping&gt;Oracle9i&lt;/datasource-mapping&gt;</NOBR></DIV>
<DIV style="position:absolute;top:67836;left:162"><NOBR>&lt;/defaults&gt;</NOBR></DIV>
<DIV style="position:absolute;top:67859;left:135"><NOBR>&lt;/jbosscmp-jdbc&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:67908;left:166"><NOBR>另外，还存在其他可用的 Oracle 类型映射。如果用户使用了旧版本的 Oracle，则查看</NOBR></DIV>
<DIV style="position:absolute;top:67934;left:135"><NOBR>conf/standardjbosscmp-jdbc.xml 文件能够找到相应的类型映射。同上一样，用户可以修改其</NOBR></DIV>
<DIV style="position:absolute;top:67955;left:135"><NOBR>默认取值，即为所有 CMP 部署应用设置全局值，而且用户不用重新打包 EAR 文件。</NOBR></DIV>
<DIV style="position:absolute;top:67978;left:166"><NOBR>同以前部署应用一样，检查是否有错误信息输出。然后，使用 Oracle SQL Plus 工具再</NOBR></DIV>
<DIV style="position:absolute;top:68002;left:135"><NOBR>次验证是否有数据库表创建。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:68058;left:135"><NOBR>SQL&gt; select table_name from user_tables; </NOBR></DIV>
<DIV style="position:absolute;top:68104;left:135"><NOBR>TABLE_NAME </NOBR></DIV>
<DIV style="position:absolute;top:68128;left:135"><NOBR>------------------------------ </NOBR></DIV>
<DIV style="position:absolute;top:68151;left:135"><NOBR>TEAMBEAN </NOBR></DIV>
<DIV style="position:absolute;top:68175;left:135"><NOBR>LEAGUEBEAN </NOBR></DIV>
<DIV style="position:absolute;top:68198;left:135"><NOBR>PLAYERBEAN</NOBR></DIV>
<DIV style="position:absolute;top:68221;left:135"><NOBR>PLAYERBEAN_TEAMS_TEAM_1OFLZV8 </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:68377;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="55"><B>Page 55</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:68488;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:69521;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:69519;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:69537;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:69519;left:745"><NOBR>49</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:69640;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="56"><B>Page 56</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:69751;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:70784;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:70782;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:70800;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:70782;left:745"><NOBR>50</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:69800;left:135"><NOBR>第 9 章　使用 Hibernate </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:69861;left:166"><NOBR>Hibernate，非常流行的持久化引擎。无论是在功能上，还是使用的简单性，它都能够替</NOBR></DIV>
<DIV style="position:absolute;top:69882;left:135"><NOBR>代实体 Bean。它对运行环境没有任何要求，无论是在应用服务器中，还是在应用服务器之</NOBR></DIV>
<DIV style="position:absolute;top:69905;left:135"><NOBR>外。然而，当在 JBoss 服务器中运行时，开发者可以选择将应用部署成 HAR 存档，使得</NOBR></DIV>
<DIV style="position:absolute;top:69931;left:135"><NOBR>Hibernate 的应用更简单。JBoss 能够管理 Hibernate Session 及其他配置细节。通过少许配置，</NOBR></DIV>
<DIV style="position:absolute;top:69952;left:135"><NOBR>开发者即可在 JBoss 中使用到 Hibernate 技术了。</NOBR></DIV>
<DIV style="position:absolute;top:69975;left:166"><NOBR>本章将重温第七章，CMP。其中，给出了 CMP roster 应用。本文将使用 Hibernate 访问</NOBR></DIV>
<DIV style="position:absolute;top:69999;left:135"><NOBR>数据库表。另外，我们还将创建 HAR 文件，并从 Web 应用中访问到 HAR 中的 Hibernate</NOBR></DIV>
<DIV style="position:absolute;top:70022;left:135"><NOBR>对象。当然，整个应用将打包成 EAR 文件。</NOBR></DIV>
<DIV style="position:absolute;top:70046;left:166"><NOBR>其中，examples/hibernate 目录存放了相应的源代码。当然，这需要同 CMP roster 应用</NOBR></DIV>
<DIV style="position:absolute;top:70069;left:135"><NOBR>配合使用。因为，HAR 存档需要使用 CMP roster 中的表和数据。</NOBR></DIV>
<DIV style="position:absolute;top:70092;left:166"><NOBR>我们也将研究 JBoss 中如何部署 Hibernate 应用的详细步骤。至于 Hibernate 更完整的介</NOBR></DIV>
<DIV style="position:absolute;top:70116;left:135"><NOBR>绍，请参考《Hibernate in Action》一书，由 Christian Bauer 和 Gavin King 于 Manning 在 2004</NOBR></DIV>
<DIV style="position:absolute;top:70139;left:135"><NOBR>年出版发行。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:70184;left:135"><NOBR>9.1  创建 Hibernate 存档</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:70225;left:166"><NOBR>我们待开发的 Web 应用中，只会涉及到单个 org.jboss.roster.Player  Java 类同 Hibernate</NOBR></DIV>
<DIV style="position:absolute;top:70248;left:135"><NOBR>相关。它能够映射到 CMP roster 应用中的 PlayerBean 实体 Bean。Player 对象只是简单的 POJO</NOBR></DIV>
<DIV style="position:absolute;top:70272;left:135"><NOBR>对象，同 Hibernate 并无直接联系。对应的 Hibernate 映射文件 Player.hbm.xml 如下：</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:70329;left:135"><NOBR>&lt;!DOCTYPE hibernate-mapping PUBLIC </NOBR></DIV>
<DIV style="position:absolute;top:70352;left:162"><NOBR>&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; </NOBR></DIV>
<DIV style="position:absolute;top:70376;left:162"><NOBR>&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:70423;left:135"><NOBR>&lt;hibernate-mapping&gt; </NOBR></DIV>
<DIV style="position:absolute;top:70446;left:162"><NOBR>&lt;class name=&quot;org.jboss.roster.Player&quot; table=&quot;PlayerBean&quot;&gt;</NOBR></DIV>
<DIV style="position:absolute;top:70469;left:182"><NOBR>&lt;id name=&quot;id&quot; type=&quot;string&quot; column=&quot;playerID&quot;&gt; </NOBR></DIV>
<DIV style="position:absolute;top:70493;left:209"><NOBR>&lt;generator class=&quot;assigned&quot; /&gt;</NOBR></DIV>
<DIV style="position:absolute;top:70516;left:182"><NOBR>&lt;/id&gt;</NOBR></DIV>
<DIV style="position:absolute;top:70563;left:182"><NOBR>&lt;property name=&quot;position&quot; type=&quot;string&quot; column=&quot;POS&quot; </NOBR></DIV>
<DIV style="position:absolute;top:70563;left:520"><NOBR>/&gt; </NOBR></DIV>
<DIV style="position:absolute;top:70586;left:182"><NOBR>&lt;property name=&quot;name&quot;</NOBR></DIV>
<DIV style="position:absolute;top:70586;left:350"><NOBR>type=&quot;string&quot; column=&quot;name&quot;</NOBR></DIV>
<DIV style="position:absolute;top:70586;left:534"><NOBR>/&gt;</NOBR></DIV>
<DIV style="position:absolute;top:70610;left:182"><NOBR>&lt;property name=&quot;salary&quot;</NOBR></DIV>
<DIV style="position:absolute;top:70610;left:339"><NOBR>type=&quot;float&quot; column=&quot;salary&quot; /&gt;</NOBR></DIV>
<DIV style="position:absolute;top:70633;left:162"><NOBR>&lt;/class&gt;</NOBR></DIV>
<DIV style="position:absolute;top:70657;left:135"><NOBR>&lt;/hibernate-mapping&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:70707;left:166"><NOBR>除了 Palyer  对象和映射文件外，开发者还需要准备 hibernate-service.xml 文件。它能够</NOBR></DIV>
<DIV style="position:absolute;top:70731;left:135"><NOBR>创建 MBean，从而管理 Hibernate 的运行期配置。具体如下：</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:70903;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="57"><B>Page 57</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:71014;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:72047;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:72045;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:72063;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:72045;left:745"><NOBR>51</NOBR></DIV>
<DIV style="position:absolute;top:71046;left:135"><NOBR>&lt;server&gt; </NOBR></DIV>
<DIV style="position:absolute;top:71069;left:162"><NOBR>&lt;mbean code=&quot;org.jboss.hibernate.jmx.Hibernate&quot; </NOBR></DIV>
<DIV style="position:absolute;top:71093;left:209"><NOBR>name=&quot;jboss.har:service=Hibernate&quot;&gt;</NOBR></DIV>
<DIV style="position:absolute;top:71116;left:189"><NOBR>&lt;attribute name=&quot;DatasourceName&quot;&gt;java:/DefaultDS&lt;/attribute&gt;</NOBR></DIV>
<DIV style="position:absolute;top:71140;left:189"><NOBR>&lt;attribute name=&quot;Dialect&quot;&gt;org.hibernate.dialect.HSQLDialect&lt;/attribute&gt; </NOBR></DIV>
<DIV style="position:absolute;top:71163;left:189"><NOBR>&lt;attribute name=&quot;SessionFactoryName&quot;&gt;java:/hibernate/SessionFactory&lt;/attribute&gt; </NOBR></DIV>
<DIV style="position:absolute;top:71186;left:189"><NOBR>&lt;attribute name=&quot;CacheProviderClass&quot;&gt;</NOBR></DIV>
<DIV style="position:absolute;top:71210;left:216"><NOBR>org.hibernate.cache.HashtableCacheProvider </NOBR></DIV>
<DIV style="position:absolute;top:71233;left:189"><NOBR>&lt;/attribute&gt;</NOBR></DIV>
<DIV style="position:absolute;top:71257;left:189"><NOBR>&lt;!-- &lt;attribute name=&quot;Hbm2ddlAuto&quot;&gt;create-drop&lt;/attribute&gt; --&gt; </NOBR></DIV>
<DIV style="position:absolute;top:71280;left:162"><NOBR>&lt;/mbean&gt;</NOBR></DIV>
<DIV style="position:absolute;top:71304;left:135"><NOBR>&lt;/server&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:71357;left:166"><NOBR>Hibernate 开发者应该很熟悉这一配置信息。在运行期，JBoss 会将 java:/DefaultDS 数据</NOBR></DIV>
<DIV style="position:absolute;top:71377;left:135"><NOBR>源提供给 Hibernate，并且会将 Hibernate SessionFactory 绑定到 JNDI 树上。</NOBR></DIV>
<DIV style="position:absolute;top:71401;left:166"><NOBR>编译和打包 Hibernate 存档的 Ant 任务如下。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:71457;left:135"><NOBR>ant -f jboss-build.xml compile</NOBR></DIV>
<DIV style="position:absolute;top:71480;left:135"><NOBR>ant -f jboss-build.xml package-har </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:71532;left:166"><NOBR>HAR 文件的内容如下。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:71587;left:135"><NOBR>$ jar tf jar/roster.har </NOBR></DIV>
<DIV style="position:absolute;top:71610;left:135"><NOBR>META-INF/</NOBR></DIV>
<DIV style="position:absolute;top:71633;left:135"><NOBR>META-INF/MANIFEST.MF </NOBR></DIV>
<DIV style="position:absolute;top:71657;left:135"><NOBR>META-INF/hibernate-service.xml </NOBR></DIV>
<DIV style="position:absolute;top:71680;left:135"><NOBR>org/ </NOBR></DIV>
<DIV style="position:absolute;top:71703;left:135"><NOBR>org/jboss/ </NOBR></DIV>
<DIV style="position:absolute;top:71727;left:135"><NOBR>org/jboss/roster/ </NOBR></DIV>
<DIV style="position:absolute;top:71750;left:135"><NOBR>org/jboss/roster/Player.class </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:71773;left:135"><NOBR>org/jboss/roster/Player.hbm.xml</NOBR></DIV>
<DIV style="position:absolute;top:71824;left:166"><NOBR>开发者可能会问，Hibernate 将会持久化哪些对象。Hibernate 部署器会在 HAR 存档中搜</NOBR></DIV>
<DIV style="position:absolute;top:71848;left:135"><NOBR>索 Hibernate 映射文件。因此，JBoss 对 Hibernate 集成做了大量的工作。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:71892;left:135"><NOBR>9.2  使用 Hibernate 对象</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:71933;left:166"><NOBR>在部署完成 HAR 存档后，开发者可以在应用的其他地方使用 SessionFactory。作为实例，</NOBR></DIV>
<DIV style="position:absolute;top:71957;left:135"><NOBR>本书创建了简单的 JSP 页面，它从 SessionFactory 创建了 Session，然后做了一次 Hibernate</NOBR></DIV>
<DIV style="position:absolute;top:71980;left:135"><NOBR>查询。在实际开发应用中，开发者一般都是通过 Servlet 或 Session Bean 访问 SessionFactory。</NOBR></DIV>
<DIV style="position:absolute;top:72006;left:135"><NOBR>JSP 中访问 Hibernate SessionFactory 的代码如下。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:72166;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="58"><B>Page 58</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:72277;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:73310;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:73308;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:73326;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:73308;left:745"><NOBR>52</NOBR></DIV>
<DIV style="position:absolute;top:72333;left:164"><NOBR>InitialContext ctx </NOBR></DIV>
<DIV style="position:absolute;top:72333;left:300"><NOBR>= new InitialContext(); </NOBR></DIV>
<DIV style="position:absolute;top:72356;left:162"><NOBR>SessionFactory factory = (SessionFactory)</NOBR></DIV>
<DIV style="position:absolute;top:72379;left:337"><NOBR>ctx.lookup(&quot;java:/hibernate/SessionFactory&quot;); </NOBR></DIV>
<DIV style="position:absolute;top:72403;left:162"><NOBR>Session</NOBR></DIV>
<DIV style="position:absolute;top:72403;left:257"><NOBR>hsession = factory.openSession(); </NOBR></DIV>
<DIV style="position:absolute;top:72426;left:162"><NOBR>try {</NOBR></DIV>
<DIV style="position:absolute;top:72449;left:189"><NOBR>request.setAttribute(&quot;players&quot;,</NOBR></DIV>
<DIV style="position:absolute;top:72473;left:216"><NOBR>hsession.find(&quot;from org.jboss.roster.Player order by name&quot;)); </NOBR></DIV>
<DIV style="position:absolute;top:72496;left:162"><NOBR>} finally {</NOBR></DIV>
<DIV style="position:absolute;top:72520;left:189"><NOBR>hsession.close();</NOBR></DIV>
<DIV style="position:absolute;top:72543;left:162"><NOBR>}</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:72594;left:166"><NOBR>运行 Ant package-web 任务，能够完成 Web 应用的打包。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:72650;left:135"><NOBR>ant -f jboss-build.xml package-web </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:72699;left:166"><NOBR>最后，roster.war 存档将放置到 jar 目录下。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:72743;left:135"><NOBR>9.3  打包完整的应用</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:72784;left:166"><NOBR>接下来，开发者需要将应用打包成 EAR 文件。具体使用的 Ant 任务是 assemble。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:72840;left:135"><NOBR>ant -f jboss-build.xml assemble </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:72889;left:166"><NOBR>即，创建 HibernateRoster.ear 文件。该 EAR 文件包括 roster.har 和 roster.war 文件。另外，</NOBR></DIV>
<DIV style="position:absolute;top:72913;left:135"><NOBR>还有一些部署描述符。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:72968;left:135"><NOBR>$ jar tf jar/HibernateRoster.ear </NOBR></DIV>
<DIV style="position:absolute;top:72992;left:135"><NOBR>META-INF/</NOBR></DIV>
<DIV style="position:absolute;top:73015;left:135"><NOBR>META-INF/MANIFEST.MF </NOBR></DIV>
<DIV style="position:absolute;top:73039;left:135"><NOBR>META-INF/application.xml </NOBR></DIV>
<DIV style="position:absolute;top:73062;left:135"><NOBR>META-INF/jboss-app.xml </NOBR></DIV>
<DIV style="position:absolute;top:73085;left:135"><NOBR>roster.har </NOBR></DIV>
<DIV style="position:absolute;top:73109;left:135"><NOBR>roster.war </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:73158;left:166"><NOBR>正如本文在 application.xml 文件声明 WAR 文件一样，开发者还需要声明 HAR 文件。</NOBR></DIV>
<DIV style="position:absolute;top:73181;left:135"><NOBR>由于 Hibernate 存档不是标准的 J2EE 部署单元，因此需要借助于 jboss-app.xml 部署描述符</NOBR></DIV>
<DIV style="position:absolute;top:73205;left:135"><NOBR>实现对 Hibernate 存档的声明。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:73260;left:135"><NOBR>&lt;!DOCTYPE jboss-app PUBLIC &quot;-//JBoss//DTD J2EE Application 1.4//EN&quot; </NOBR></DIV>
<DIV style="position:absolute;top:73284;left:196"><NOBR>&quot;http://www.jboss.org/j2ee/dtd/jboss-app_4_0.dtd&quot;&gt; </NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:73429;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="59"><B>Page 59</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:73540;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:74573;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:74571;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:74589;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:74571;left:745"><NOBR>53</NOBR></DIV>
<DIV style="position:absolute;top:73571;left:135"><NOBR>&lt;jboss-app&gt; </NOBR></DIV>
<DIV style="position:absolute;top:73594;left:155"><NOBR>&lt;module&gt; </NOBR></DIV>
<DIV style="position:absolute;top:73617;left:175"><NOBR>&lt;har&gt;roster.har&lt;/har&gt;</NOBR></DIV>
<DIV style="position:absolute;top:73641;left:155"><NOBR>&lt;/module&gt; </NOBR></DIV>
<DIV style="position:absolute;top:73664;left:135"><NOBR>&lt;/jboss-app&gt; </NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:73713;left:166"><NOBR>至此，可以开始部署 EAR 应用了。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:16px;font-family:Times">
<DIV style="position:absolute;top:73758;left:135"><NOBR>9.4  部署、运行应用</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:73799;left:166"><NOBR>一旦 EAR 文件创建成功，开发者可以使用 Ant deploy 任务部署它，即将 EAR 文件拷贝</NOBR></DIV>
<DIV style="position:absolute;top:73822;left:135"><NOBR>到 JBoss deploy 目录。</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:73878;left:135"><NOBR>ant -f jboss-build.xml deploy</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:73927;left:166"><NOBR>通过<FONT color="#0000ff" face="Times"><A href="http://localhost:8080/roster/players.jsp">http://localhost:8080/roster/players.jsp</A></FONT><A href="http://localhost:8080/roster/players.jsp"></A>能够访问到上述应用。其中，开发者可以浏览</NOBR></DIV>
<DIV style="position:absolute;top:73951;left:135"><NOBR>到依据队员名排序的队员列表。如果开发者没有看到任何数据，则请检查是否在第 7 章成功</NOBR></DIV>
<DIV style="position:absolute;top:73974;left:135"><NOBR>部署了CMP roster应用。因此，EAR需要使用该应用创建的表及其数据。</NOBR></DIV>
</SPAN></FONT>

<DIV style="position:absolute;top:74692;left:0"><HR><TABLE border="0" width="100&percnt;"><TBODY><TR><TD bgcolor="eeeeee" align="right"><FONT face="arial,sans-serif"><A name="60"><B>Page 60</B></A></FONT></TD></TR></TBODY></TABLE></DIV><FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:74803;left:432"><NOBR>专注于 Java EE 平台、敏捷方法及 Open Source 技术咨询</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:11px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:75836;left:143"><NOBR>www.open-v.com</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:11px;font-family:Times">
<DIV style="position:absolute;top:75834;left:575"><NOBR>拓宽视野，奔向成功</NOBR></DIV>
<DIV style="position:absolute;top:75852;left:575"><NOBR><I>Open View, Victory Open </I></NOBR></DIV>
<DIV style="position:absolute;top:75834;left:745"><NOBR>54</NOBR></DIV>
</SPAN></FONT>
<FONT size="4" face="Times"><SPAN style="font-size:22px;font-family:Times">
<DIV style="position:absolute;top:74852;left:135"><NOBR>附录 A  其他信息资料</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:74910;left:198"><NOBR>进一步信息，请参考《JBoss: A Developer&rsquo;s Notebook》。它将由 Oreilly、于 2005 年</NOBR></DIV>
<DIV style="position:absolute;top:74934;left:198"><NOBR>发行。Norman Richards 和 Sam Griffith 是该书的作者。</NOBR></DIV>
<DIV style="position:absolute;top:74957;left:198"><NOBR>有关JBoss的高级主题，请参考如下文档：《The JBoss 4 Application Server Guide》，</NOBR></DIV>
<DIV style="position:absolute;top:74981;left:198"><NOBR>其网址位于，<FONT color="#0000ff" face="Times"><A href="http://www.jboss.org/docs/index">http://www.jboss.org/docs/index</A></FONT>。（译者注：中文版已经由电子工业出</NOBR></DIV>
<DIV style="position:absolute;top:75004;left:198"><NOBR>版社于 2004 年 11 月出版，第 3 版）。您通过Sams出版社也可以购买到它，书名是</NOBR></DIV>
<DIV style="position:absolute;top:75027;left:198"><NOBR>《JBoss 4.0: The Official Guide》，于 2005 年出版发行。</NOBR></DIV>
<DIV style="position:absolute;top:75051;left:198"><NOBR>为实现运行的良好性能和高可用性，需要使用群集JBoss服务器。相关文档，请参</NOBR></DIV>
<DIV style="position:absolute;top:75074;left:198"><NOBR>考，《 JBoss  Clustering 》 (Sacha Labourey 和 Bill Burke) ，其网址也是位于，</NOBR></DIV>
</SPAN></FONT>
<FONT size="3" color="#0000ff" face="Times"><SPAN style="font-size:13px;font-family:Times;color:#0000ff">
<DIV style="position:absolute;top:75100;left:198"><NOBR><A href="http://www.jboss.org/docs/index">http://www.jboss.org/docs/index</A><FONT color="#000000" face="Times">。（译者注：开发者通过</FONT><FONT color="#000000" face="Times">JBoss</FONT><FONT color="#000000" face="Times">网站能够下载到它。）</FONT></NOBR></DIV>
</SPAN></FONT>
<FONT size="3" face="Times"><SPAN style="font-size:13px;font-family:Times">
<DIV style="position:absolute;top:75121;left:198"><NOBR>有关结合 JBoss 的 EJB 教程，请参考《Enterprise JavaBeans》第四版，由 Oreilly 于</NOBR></DIV>
<DIV style="position:absolute;top:75147;left:198"><NOBR>2004 年出版。该书由 Richard Monson-Haefel、Bill Burke、Sacha Labourey 共同完</NOBR></DIV>
<DIV style="position:absolute;top:75168;left:198"><NOBR>成。</NOBR></DIV>
<DIV style="position:absolute;top:75191;left:198"><NOBR>至于其他的EJB教程，本书还将推荐经典的《Mastering Enterprise JavaBeans》第二</NOBR></DIV>
<DIV style="position:absolute;top:75215;left:198"><NOBR>版，由Wiley于 2001 年出版。该书由Ed. Roman等人写作完成。通过如下网址能够</NOBR></DIV>
<DIV style="position:absolute;top:75238;left:198"><NOBR>下载到其免费电子版，<A href="http://www.theserverside.com/books/masteringEJB/index.jsp"></A><FONT color="#0000ff" face="Times"><A href="http://www.theserverside.com/books/masteringEJB/index.jsp">http://www.theserverside.com/books/masteringEJB/index.jsp</A></FONT><A href="http://www.theserverside.com/books/masteringEJB/index.jsp"></A>。</NOBR></DIV>
<DIV style="position:absolute;top:75261;left:198"><NOBR>有关 J2EE 1.4 Web 服务的其他内容，请参考《J2EE Web Services》，由 Addison-Wesley</NOBR></DIV>
<DIV style="position:absolute;top:75285;left:198"><NOBR>于 2003 年出版。该书由 Richard Monson-Haefel 完成。</NOBR></DIV>
<DIV style="position:absolute;top:75308;left:198"><NOBR>有关如何使用 XDoclet 以简化 J2EE 开发的资料，则请参考《XDoclet in Action》，</NOBR></DIV>
<DIV style="position:absolute;top:75332;left:198"><NOBR>由 Manning 于 2003 年出版。该书由 Craig Walls、Norman Richards 完成。</NOBR></DIV>
<DIV style="position:absolute;top:75355;left:198"><NOBR>有关 Hibernate 的更多内容，请参考《Hibernate in Action》，由 Manning 于 2004 年</NOBR></DIV>
<DIV style="position:absolute;top:75378;left:198"><NOBR>出版。该书由 Christian Bauer、Gavin King 完成。</NOBR></DIV>
</SPAN></FONT>


</DIV></BODY></HTML>